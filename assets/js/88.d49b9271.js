(window.webpackJsonp=window.webpackJsonp||[]).push([[88],{426:function(t,e,a){"use strict";a.r(e);var r=a(4),s=Object(r.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("p",[e("a",{attrs:{href:"https://websec.readthedocs.io/zh/latest/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://websec.readthedocs.io/zh/latest/"),e("OutboundLink")],1)]),t._v(" "),e("p",[e("img",{attrs:{src:"https://gcore.jsdelivr.net/gh/wu529778790/image/blog/1642257523(1).png",alt:"1642257523(1)"}})]),t._v(" "),e("h2",{attrs:{id:"如何防范-iframe-被钓鱼网站嵌套导致的安全问题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#如何防范-iframe-被钓鱼网站嵌套导致的安全问题"}},[t._v("#")]),t._v(" 如何防范 iframe 被钓鱼网站嵌套导致的安全问题")]),t._v(" "),e("p",[t._v("面试官提示，iframe 如何判断是否被嵌套？（想到可以通过 top 变量值是否等于 window 来判断）")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("top"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("location "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" location"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  top"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("location"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("href "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" location"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("href"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[t._v("可以有多种方式绕开，不建议这样做")]),t._v(" "),e("p",[t._v("比如下面的方法就可以绕过")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("document"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('\'<iframe seamless sandbox security="restricted" id="url_mainframe" frameborder="0" scrolling="yes" name="main" src="http://192.168.57.1:8023/" style="height:100%; visibility: inherit; width: 100%; z-index: 1;overflow: visible;"></iframe>\'')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("p",[t._v("虽然网页无法获取非同域名下的内嵌网页的 DOM 相关信息，但是假如用户习惯了在某个非官方的登入入口进入，当该非官方的页面某天更改代码，假设前几次进入的是一个伪造的界面（钓鱼网站），之后登陆出错后再切成 iframe，用户信息就会被盗取，所以有这个风险，参考 baidu、youku、youtube 都有做这个处理；")]),t._v(" "),e("p",[t._v("Refused to display 'https://youku.com/' in a frame because it set 'X-Frame-Options' to 'sameorigin'.")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://blog.csdn.net/weixin_33769125/article/details/91434181",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://blog.csdn.net/weixin_33769125/article/details/91434181"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("mdn\n"),e("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/CSP",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://developer.mozilla.org/zh-CN/docs/Web/HTTP/CSP"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("阮一峰的 csp\n"),e("a",{attrs:{href:"http://www.ruanyifeng.com/blog/2016/09/csp.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://www.ruanyifeng.com/blog/2016/09/csp.html"),e("OutboundLink")],1)]),t._v(" "),e("p",[e("a",{attrs:{href:"https://juejin.cn/post/6844903843658989576",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://juejin.cn/post/6844903843658989576"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("禁止网站被 iframe 嵌套的几种方式\n"),e("a",{attrs:{href:"https://juejin.cn/post/6998541496945213477",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://juejin.cn/post/6998541496945213477"),e("OutboundLink")],1)]),t._v(" "),e("h3",{attrs:{id:"正确的做法就是后端添加响应头-x-frame-options"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#正确的做法就是后端添加响应头-x-frame-options"}},[t._v("#")]),t._v(" 正确的做法就是后端添加响应头 X-Frame-Options")]),t._v(" "),e("p",[t._v("X-Frame-Options 有三个值")]),t._v(" "),e("p",[t._v("建议后端通过添加响应头的方法实现")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/X-Frame-Options",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/X-Frame-Options"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("deny")]),t._v(" "),e("p",[t._v("表示该页面不允许在 frame 中展示，即便是在相同域名的页面中嵌套也不允许。")]),t._v(" "),e("p",[t._v("sameorigin")]),t._v(" "),e("p",[t._v("表示该页面可以在相同域名页面的 frame 中展示。")]),t._v(" "),e("p",[t._v("allow-from uri")]),t._v(" "),e("p",[t._v("表示该页面可以在指定来源的 frame 中展示。")])])}),[],!1,null,null,null);e.default=s.exports}}]);