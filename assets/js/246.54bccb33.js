(window.webpackJsonp=window.webpackJsonp||[]).push([[246],{583:function(s,a,t){"use strict";t.r(a);var l=t(4),v=Object(l.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("ä»Šå¤©æˆ‘è¦è·Ÿä½ ä»‹ç»å¦å¤–ä¸€æ¬¾åŒæ ·ååˆ†ä¼˜ç§€çš„æ‰“åŒ…å·¥å…·ï¼šRollupã€‚")]),s._v(" "),a("p",[s._v("Rollup æ˜¯ä¸€æ¬¾ ES Modules æ‰“åŒ…å™¨ã€‚å®ƒä¹Ÿå¯ä»¥å°†é¡¹ç›®ä¸­æ•£è½çš„ç»†å°æ¨¡å—æ‰“åŒ…ä¸ºæ•´å—ä»£ç ï¼Œä»è€Œä½¿å¾—è¿™äº›åˆ’åˆ†çš„æ¨¡å—å¯ä»¥æ›´å¥½åœ°è¿è¡Œåœ¨æµè§ˆå™¨ç¯å¢ƒæˆ–è€… Node.js ç¯å¢ƒã€‚")]),s._v(" "),a("p",[s._v("ä»ä½œç”¨ä¸Šæ¥çœ‹ï¼ŒRollup ä¸ Webpack éå¸¸ç±»ä¼¼ã€‚ä¸è¿‡ç›¸æ¯”äº Webpackï¼ŒRollup è¦å°å·§çš„å¤šã€‚å› ä¸º Webpack åœ¨é…åˆä¸€äº›æ’ä»¶çš„ä½¿ç”¨ä¸‹ï¼Œå‡ ä¹å¯ä»¥å®Œæˆå¼€å‘è¿‡ç¨‹ä¸­ç»å¤§å¤šæ•°å‰ç«¯å·¥ç¨‹åŒ–çš„å·¥ä½œã€‚è€Œ Rollup å¯ä»¥è¯´ä»…ä»…æ˜¯ä¸€ä¸ª ES Modules æ‰“åŒ…å™¨ï¼Œæ²¡æœ‰æ›´å¤šå…¶ä»–çš„åŠŸèƒ½äº†ã€‚")]),s._v(" "),a("p",[s._v("ä¾‹å¦‚ï¼Œåœ¨ Webpack ä¸­æ”¯æŒ HMR è¿™ç§å¯¹å¼€å‘è¿‡ç¨‹ååˆ†å‹å¥½çš„åŠŸèƒ½ï¼Œè€Œåœ¨ Rollup ä¸­å°±æ²¡æœ‰åŠæ³•å®Œå…¨æ”¯æŒã€‚")]),s._v(" "),a("p",[s._v("Rollup è¯ç”Ÿçš„ç›®çš„å¹¶ä¸æ˜¯è¦ä¸ Webpack è¿™æ ·çš„å·¥å…·å…¨é¢ç«äº‰ã€‚å®ƒçš„åˆè¡·åªæ˜¯å¸Œæœ›èƒ½å¤Ÿ"),a("strong",[s._v("æä¾›ä¸€ä¸ªé«˜æ•ˆçš„ ES Modules æ‰“åŒ…å™¨ï¼Œå……åˆ†åˆ©ç”¨ ES Modules çš„å„é¡¹ç‰¹æ€§ï¼Œæ„å»ºå‡ºç»“æ„æ‰å¹³ï¼Œæ€§èƒ½å‡ºä¼—çš„ç±»åº“")]),s._v("ã€‚")]),s._v(" "),a("p",[s._v("è‡³äºå®ƒçš„å…¶ä»–ç‰¹ç‚¹å’Œä¼˜åŠ¿ï¼Œæˆ‘ä»¬éœ€è¦ä¸Šæ‰‹è¿‡åæ‰èƒ½æ·±å…¥äº†è§£ã€‚")]),s._v(" "),a("h3",[s._v("å¿«é€Ÿä¸Šæ‰‹")]),s._v(" "),a("p",[s._v("è¿™é‡Œæˆ‘å‡†å¤‡äº†ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œå…·ä½“ç»“æ„å¦‚ä¸‹ï¼š")]),s._v(" "),a("pre",[a("code",{staticClass:"lang-java",attrs:{"data-language":"java"}},[s._v(".\nâ”œâ”€â”€ src\nâ”‚   â”œâ”€â”€ index.js\nâ”‚   â”œâ”€â”€ logger.js\nâ”‚   â””â”€â”€ messages.js\nâ””â”€â”€ "),a("span",{staticClass:"hljs-keyword"},[s._v("package")]),s._v(".json\n")])]),s._v(" "),a("p",[s._v("åœ¨è¿™ä¸ªç¤ºä¾‹çš„æºä»£ç ä¸­æˆ‘å‡†å¤‡äº†ä¸‰ä¸ªæ–‡ä»¶ï¼Œå¹¶ä¸”ä½¿ç”¨ ES Modules ç»„ç»‡çš„ä»£ç æ¨¡å—åŒ–ã€‚éƒ¨åˆ†ä»£ç å¦‚ä¸‹ï¼š")]),s._v(" "),a("pre",[a("code",{staticClass:"lang-javascript",attrs:{"data-language":"javascript"}},[a("span",{staticClass:"hljs-comment"},[s._v("// ./src/messages.js")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("export")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("default")]),s._v(" {\n  "),a("span",{staticClass:"hljs-attr"},[s._v("hi")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'Hey Guys, I am zce~'")]),s._v("\n}\n"),a("span",{staticClass:"hljs-comment"},[s._v("// ./src/logger.js")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("export")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" log = "),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-params"},[s._v("msg")]),s._v(" =>")]),s._v(" {\n  "),a("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log("),a("span",{staticClass:"hljs-string"},[s._v("'---------- INFO ----------'")]),s._v(")\n  "),a("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log(msg)\n  "),a("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log("),a("span",{staticClass:"hljs-string"},[s._v("'--------------------------'")]),s._v(")\n}\n"),a("span",{staticClass:"hljs-keyword"},[s._v("export")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" error = "),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-params"},[s._v("msg")]),s._v(" =>")]),s._v(" {\n  "),a("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".error("),a("span",{staticClass:"hljs-string"},[s._v("'---------- ERROR ----------'")]),s._v(")\n  "),a("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".error(msg)\n  "),a("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".error("),a("span",{staticClass:"hljs-string"},[s._v("'---------------------------'")]),s._v(")\n}\n"),a("span",{staticClass:"hljs-comment"},[s._v("// ./src/index.js")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" { log } "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'./logger'")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" messages "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'./messages'")]),s._v("\nlog(messages.hi)\n")])]),s._v(" "),a("p",[s._v("å¦‚ä¸Šè¿°ä»£ç æ‰€ç¤ºï¼Œå…¶ä¸­ï¼š")]),s._v(" "),a("ul",[a("li",[s._v("messages.js æ–‡ä»¶ä¸­ä»¥é»˜è®¤å¯¼å‡ºçš„æ–¹å¼å¯¼å‡ºäº†ä¸€ä¸ªå¯¹è±¡ï¼›")]),s._v(" "),a("li",[s._v("logger.js æ–‡ä»¶ä¸­å•ä¸ªå¯¼å‡ºäº†ä¸¤ä¸ªå‡½æ•°æˆå‘˜ï¼›")]),s._v(" "),a("li",[s._v("æœ€ååœ¨ index.js æ–‡ä»¶ä¸­å¯¼å…¥äº†è¿™ä¸¤ä¸ªæ¨¡å—ï¼Œå¹¶ä¸”ä½¿ç”¨äº†å®ƒä»¬ã€‚")])]),s._v(" "),a("p",[s._v("æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°è¯•ä½¿ç”¨ Rollup å®Œæˆè¿™ä¸ªç¤ºä¾‹åº”ç”¨çš„æ‰“åŒ…ã€‚è¿™é‡Œéœ€è¦å…ˆé€šè¿‡ npm å®‰è£… rollup è¿™ä¸ªæ¨¡å—ã€‚å…·ä½“å‘½ä»¤å¦‚ä¸‹ï¼š")]),s._v(" "),a("pre",[a("code",{staticClass:"lang-shell",attrs:{"data-language":"shell"}},[a("span",{staticClass:"hljs-meta"},[s._v("$")]),a("span",{staticClass:"bash"},[s._v(" npm i rollup --save-dev")]),s._v("\n")])]),s._v(" "),a("p",[s._v("å®‰è£…å®Œæˆè¿‡åï¼Œrollup è¿™ä¸ªæ¨¡å—åŒæ ·ä¼šåœ¨ node_modules/.bin ç›®å½•ä¸­ä¸ºæˆ‘ä»¬æä¾›ä¸€ä¸ª CLI ç¨‹åºï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡è¿™ä¸ª CLI å»ä½¿ç”¨ Rollup æ‰“åŒ…ã€‚å…·ä½“å‘½ä»¤å¦‚ä¸‹ï¼š")]),s._v(" "),a("pre",[a("code",{staticClass:"lang-shell",attrs:{"data-language":"shell"}},[a("span",{staticClass:"hljs-meta"},[s._v("$")]),a("span",{staticClass:"bash"},[s._v(" npx rollup")]),s._v("\n")])]),s._v(" "),a("blockquote",[a("p",[s._v("P.S. å¯¹äº node_modules/.bin ç›®å½•ä¸‹çš„ CLIï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ npx å‘½ä»¤æˆ–è€… yarn å‘½ä»¤ç›´æ¥å¯åŠ¨ã€‚")])]),s._v(" "),a("p",[s._v("æ‰§è¡Œ rollup å‘½ä»¤ï¼Œåœ¨ä¸ä¼ é€’ä»»ä½•å‚æ•°çš„æƒ…å†µä¸‹ï¼Œè¿™ä¸ªå‘½ä»¤ä¼šè‡ªåŠ¨æ‰“å°å‡ºå®ƒçš„å¸®åŠ©ä¿¡æ¯ã€‚å…·ä½“å¦‚ä¸‹å›¾ï¼š")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s0.lgstatic.com/i/image/M00/13/01/CgqCHl7OSaeAFukyAAE1QDF-mHI012.png",alt:"image (11).png"}})]),s._v(" "),a("p",[s._v("åœ¨è¿™ä¸ªå¸®åŠ©ä¿¡æ¯çš„ä¸€å¼€å§‹ï¼Œå°±å·²ç»å‘Šè¯‰æˆ‘ä»¬ rollup å‘½ä»¤çš„æ­£ç¡®ç”¨æ³•äº†ï¼šæˆ‘ä»¬åº”è¯¥é€šè¿‡å‚æ•°æŒ‡å®šä¸€ä¸ªæ‰“åŒ…å…¥å£æ–‡ä»¶ã€‚æ­£ç¡®å‘½ä»¤å¦‚ä¸‹ï¼š")]),s._v(" "),a("pre",[a("code",{staticClass:"lang-shell",attrs:{"data-language":"shell"}},[a("span",{staticClass:"hljs-meta"},[s._v("$")]),a("span",{staticClass:"bash"},[s._v(" npx rollup ./src/index.js")]),s._v("\n")])]),s._v(" "),a("p",[s._v("è¿™é‡ŒæŒ‡å®šçš„æ‰“åŒ…å…¥å£æ˜¯ src/index.js æ–‡ä»¶ã€‚å†æ¬¡æ‰§è¡Œ rollup å‘½ä»¤ï¼Œå…·ä½“æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s0.lgstatic.com/i/image/M00/12/F6/Ciqc1F7OSa-AOq5aAAEb_vSj5jo673.png",alt:"image (12).png"}})]),s._v(" "),a("p",[s._v("æ ¹æ®æ§åˆ¶å°çš„è¾“å‡ºç»“æœï¼Œæˆ‘ä»¬å‘ç° Rollup ç›´æ¥å°†æ‰“åŒ…ç»“æœæ‰“å°åˆ°æ§åˆ¶å°ä¸­äº†ã€‚")]),s._v(" "),a("p",[s._v("å½“ç„¶ï¼Œæ­£å¸¸æƒ…å†µä¸‹æˆ‘ä»¬è¿˜æ˜¯éœ€è¦å°†æ‰“åŒ…ç»“æœè¾“å‡ºåˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ã€‚å…·ä½“å°±æ˜¯é€šè¿‡ CLI çš„ --file å‚æ•°æŒ‡å®šè¾“å‡ºæ–‡ä»¶è·¯å¾„ï¼Œå…·ä½“å‘½ä»¤å¦‚ä¸‹ï¼š")]),s._v(" "),a("pre",[a("code",{staticClass:"lang-shell",attrs:{"data-language":"shell"}},[a("span",{staticClass:"hljs-meta"},[s._v("$")]),a("span",{staticClass:"bash"},[s._v(" npx rollup ./src/index.js --file ./dist/bundle.js")]),s._v("\n")])]),s._v(" "),a("p",[s._v("è¿™æ ·æ‰“åŒ…çš„ç»“æœå°±ä¼šè¾“å‡ºåˆ°æ–‡ä»¶ä¸­ã€‚")]),s._v(" "),a("p",[s._v("å®Œæˆä»¥åï¼Œæˆ‘ä»¬æ‰¾åˆ° Rollup æ‰“åŒ…è¾“å‡ºçš„æ–‡ä»¶ï¼Œå…·ä½“ç»“æœå¦‚ä¸‹ï¼š")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s0.lgstatic.com/i/image/M00/12/F6/Ciqc1F7OSbeAHIZBAADh3GsHnjA087.png",alt:"image (13).png"}})]),s._v(" "),a("p",[s._v("åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­æˆ‘ä»¬çš„ç¬¬ä¸€å°è±¡å°±æ˜¯ï¼ŒRollup æ‰“åŒ…ç»“æœæƒŠäººçš„ç®€æ´ï¼ŒåŸºæœ¬ä¸Šå°±è·Ÿæˆ‘ä»¬æ‰‹å†™çš„ä»£ç ä¸€æ ·ã€‚ç›¸æ¯”äº Webpack å¤§é‡çš„å¼•å¯¼ä»£ç å’Œä¸€å †çš„æ¨¡å—å‡½æ•°ï¼Œè¿™é‡Œçš„è¾“å‡ºç»“æœæ²¡æœ‰ä»»ä½•å¤šä½™ä»£ç ï¼Œå°±æ˜¯æŠŠæ‰“åŒ…è¿‡ç¨‹ä¸­çš„å„ä¸ªæ¨¡å—æŒ‰ç…§ä¾èµ–é¡ºåºï¼Œå…ˆåæ‹¼æ¥åˆ°äº†ä¸€èµ·ã€‚")]),s._v(" "),a("p",[s._v("è€Œä¸”æˆ‘ä»¬ä»”ç»†è§‚å¯Ÿæ‰“åŒ…ç»“æœï¼Œä½ ä¼šå‘ç°ï¼Œåœ¨æˆ‘ä»¬è¾“å‡ºçš„ç»“æœä¸­åªä¼šä¿ç•™é‚£äº›ç”¨åˆ°çš„éƒ¨åˆ†ï¼Œå¯¹äºæœªå¼•ç”¨éƒ¨åˆ†éƒ½æ²¡æœ‰è¾“å‡ºã€‚è¿™æ˜¯å› ä¸º Rollup é»˜è®¤ä¼šè‡ªåŠ¨å¼€å¯ Tree-shaking ä¼˜åŒ–è¾“å‡ºç»“æœï¼ŒTree-shaking çš„æ¦‚å¿µæœ€æ—©ä¹Ÿå°±æ˜¯ Rollup è¿™ä¸ªå·¥å…·æå‡ºçš„ã€‚")]),s._v(" "),a("h4",[s._v("é…ç½®æ–‡ä»¶")]),s._v(" "),a("p",[s._v("Rollup åŒæ ·æ”¯æŒä»¥é…ç½®æ–‡ä»¶çš„æ–¹å¼å»é…ç½®æ‰“åŒ…è¿‡ç¨‹ä¸­çš„å„é¡¹å‚æ•°ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª rollup.config.js çš„é…ç½®æ–‡ä»¶ã€‚å…·ä½“ç»“æ„å¦‚ä¸‹ï¼š")]),s._v(" "),a("pre",[a("code",{staticClass:"lang-java",attrs:{"data-language":"java"}},[s._v(" .\n â”œâ”€â”€ src\n â”‚   â”œâ”€â”€ index.js\n â”‚   â”œâ”€â”€ logger.js\n â”‚   â””â”€â”€ messages.js\n â”œâ”€â”€ "),a("span",{staticClass:"hljs-keyword"},[s._v("package")]),s._v(".json\n+â””â”€â”€ rollup.config.js\n")])]),s._v(" "),a("p",[s._v("è¿™ä¸ªæ–‡ä»¶è™½ç„¶åŒæ ·æ˜¯è¿è¡Œåœ¨ Node.js ç¯å¢ƒä¸­ï¼Œä½†æ˜¯ Rollup ä¼šé¢å¤–å¤„ç†é…ç½®æ–‡ä»¶ï¼Œæ‰€ä»¥åœ¨ rollup.config.js ä¸­æˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨ ES Modules æ ‡å‡†ã€‚å…·ä½“ä»£ç å¦‚ä¸‹ï¼š")]),s._v(" "),a("pre",[a("code",{staticClass:"lang-javascript",attrs:{"data-language":"javascript"}},[a("span",{staticClass:"hljs-comment"},[s._v("// ./rollup.config.js")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("export")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("default")]),s._v(" {\n  "),a("span",{staticClass:"hljs-attr"},[s._v("input")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'src/index.js'")]),s._v(",\n  "),a("span",{staticClass:"hljs-attr"},[s._v("output")]),s._v(": {\n    "),a("span",{staticClass:"hljs-attr"},[s._v("file")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'dist/bundle.js'")]),s._v(",\n    "),a("span",{staticClass:"hljs-attr"},[s._v("format")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'es'")]),s._v(" "),a("span",{staticClass:"hljs-comment"},[s._v("// è¾“å‡ºæ ¼å¼")]),s._v("\n  }\n}\n")])]),s._v(" "),a("p",[s._v("è¿™ä¸ªæ–‡ä»¶ä¸­éœ€è¦å¯¼å‡ºä¸€ä¸ªé…ç½®å¯¹è±¡ï¼Œåœ¨è¿™ä¸ªå¯¹è±¡ä¸­æˆ‘ä»¬å¯ä»¥é€šè¿‡ input å±æ€§æŒ‡å®šæ‰“åŒ…çš„å…¥å£æ–‡ä»¶è·¯å¾„ï¼Œé€šè¿‡ output æŒ‡å®šè¾“å‡ºç›¸å…³é…ç½®ï¼Œoutput å±æ€§æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œåœ¨ output å¯¹è±¡ä¸­å¯ä»¥ä½¿ç”¨ file å±æ€§æŒ‡å®šè¾“å‡ºçš„æ–‡ä»¶åï¼Œformat å±æ€§æŒ‡å®šè¾“å‡ºä»£ç çš„æ ¼å¼ã€‚")]),s._v(" "),a("p",[s._v("å®Œæˆä»¥åï¼Œæˆ‘ä»¬å›åˆ°å‘½ä»¤è¡Œï¼Œå†æ¬¡æ‰§è¡Œ rollup å‘½ä»¤ï¼Œä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œéœ€è¦é€šè¿‡ --config å‚æ•°æ¥è¡¨æ˜ä½¿ç”¨é¡¹ç›®ä¸­çš„é…ç½®æ–‡ä»¶ã€‚ä½ ä¹Ÿå¯ä»¥é€šè¿‡è¿™ä¸ªå‚æ•°æ¥æŒ‡å®šä¸åŒçš„é…ç½®æ–‡ä»¶åç§°ã€‚å…·ä½“å‘½ä»¤å¦‚ä¸‹ï¼š")]),s._v(" "),a("pre",[a("code",{staticClass:"lang-shell",attrs:{"data-language":"shell"}},[a("span",{staticClass:"hljs-meta"},[s._v("$")]),a("span",{staticClass:"bash"},[s._v(" npx rollup --config "),a("span",{staticClass:"hljs-comment"},[s._v("# ä½¿ç”¨é»˜è®¤é…ç½®æ–‡ä»¶")])]),s._v("\n"),a("span",{staticClass:"hljs-meta"},[s._v("$")]),a("span",{staticClass:"bash"},[s._v(" npx rollup --config rollup.prod.js "),a("span",{staticClass:"hljs-comment"},[s._v("# æŒ‡å®šé…ç½®æ–‡ä»¶è·¯å¾„")])]),s._v("\n")])]),s._v(" "),a("h4",[s._v("è¾“å‡ºæ ¼å¼")]),s._v(" "),a("p",[s._v("Rollup æ‰“åŒ…æ”¯æŒå¤šç§è¾“å‡ºæ ¼å¼ï¼Œè¿™é‡Œæˆ‘ä»¬å›åˆ°é…ç½®æ–‡ä»¶ä¸­ï¼Œé…ç½®åŒæ—¶è¾“å‡ºæ‰€æœ‰æ ¼å¼ä¸‹çš„æ–‡ä»¶ï¼Œå…·ä½“é…ç½®å¦‚ä¸‹ï¼š")]),s._v(" "),a("pre",[a("code",{staticClass:"lang-javascript",attrs:{"data-language":"javascript"}},[a("span",{staticClass:"hljs-comment"},[s._v("// ./rollup.config.js")]),s._v("\n"),a("span",{staticClass:"hljs-comment"},[s._v("// æ‰€æœ‰ Rollup æ”¯æŒçš„æ ¼å¼")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" formats = ["),a("span",{staticClass:"hljs-string"},[s._v("'es'")]),s._v(", "),a("span",{staticClass:"hljs-string"},[s._v("'amd'")]),s._v(", "),a("span",{staticClass:"hljs-string"},[s._v("'cjs'")]),s._v(", "),a("span",{staticClass:"hljs-string"},[s._v("'iife'")]),s._v(", "),a("span",{staticClass:"hljs-string"},[s._v("'umd'")]),s._v(", "),a("span",{staticClass:"hljs-string"},[s._v("'system'")]),s._v("]\n"),a("span",{staticClass:"hljs-keyword"},[s._v("export")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("default")]),s._v(" formats.map("),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-params"},[s._v("format")]),s._v(" =>")]),s._v(" ({\n  "),a("span",{staticClass:"hljs-attr"},[s._v("input")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'src/index.js'")]),s._v(",\n  "),a("span",{staticClass:"hljs-attr"},[s._v("output")]),s._v(": {\n    "),a("span",{staticClass:"hljs-attr"},[s._v("file")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("`dist/bundle."),a("span",{staticClass:"hljs-subst"},[s._v("${format}")]),s._v(".js`")]),s._v(",\n    format\n  }\n}))\n")])]),s._v(" "),a("p",[s._v("åœ¨è¿™ä¸ªé…ç½®å½“ä¸­æˆ‘ä»¬å¯¼å‡ºäº†ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„ä¸­çš„æ¯ä¸ªæˆå‘˜éƒ½æ˜¯ä¸€ä¸ªå•ç‹¬çš„æ‰“åŒ…é…ç½®ï¼Œè¿™æ · Rollup å°±ä¼šåˆ†åˆ«æŒ‰ç…§æ¯ä¸ªé…ç½®å•ç‹¬æ‰“åŒ…ã€‚è¿™ä¸€ç‚¹ä¸ Webpack éå¸¸ç›¸ä¼¼ã€‚")]),s._v(" "),a("p",[s._v("é…ç½®å®Œæˆä¹‹åï¼Œæˆ‘ä»¬å›åˆ°å‘½ä»¤è¡Œç»ˆç«¯ï¼Œå†æ¬¡è¿è¡Œ Rollup æ‰“åŒ…ã€‚é‚£è¿™æ¬¡æ‰“åŒ…è¿‡åï¼Œdist ç›®å½•ä¸‹å°±ä¼šç”Ÿæˆä¸åŒæ ¼å¼çš„è¾“å‡ºç»“æœï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s0.lgstatic.com/i/image/M00/12/F6/Ciqc1F7OScSAL2axAABjmxxZoIs900.png",alt:"image (14).png"}})]),s._v(" "),a("p",[s._v("ä½ å¯ä»¥è‡ªå·±ä¾æ¬¡å»äº†è§£ä¸€ä¸‹æ¯ç§æ ¼å¼çš„è¾“å‡ºç»“æœï¼Œå…¶å®ä¸åŒçš„è¾“å‡ºæ ¼å¼å¤§éƒ½æ˜¯ä¸ºäº†é€‚é…ä¸åŒçš„è¿è¡Œç¯å¢ƒï¼Œå¹¶æ²¡æœ‰ä»€ä¹ˆéœ€è¦é¢å¤–ç†è§£çš„åœ°æ–¹ã€‚")]),s._v(" "),a("h4",[s._v("ä½¿ç”¨æ’ä»¶")]),s._v(" "),a("p",[s._v("Rollup è‡ªèº«çš„åŠŸèƒ½å°±åªæ˜¯ ES Modules æ¨¡å—çš„åˆå¹¶ï¼Œå¦‚æœæœ‰æ›´é«˜çº§çš„è¦æ±‚ï¼Œä¾‹å¦‚åŠ è½½å…¶ä»–ç±»å‹çš„èµ„æºæ–‡ä»¶æˆ–è€…æ”¯æŒå¯¼å…¥ CommonJS æ¨¡å—ï¼Œåˆæˆ–æ˜¯ç¼–è¯‘ ES æ–°ç‰¹æ€§ï¼Œè¿™äº›é¢å¤–çš„éœ€æ±‚ Rollup åŒæ ·æ”¯æŒä½¿ç”¨æ’ä»¶å»æ‰©å±•å®ç°ã€‚")]),s._v(" "),a("p",[s._v("Webpack ä¸­åˆ’åˆ†äº† Loaderã€Plugin å’Œ Minimizer ä¸‰ç§æ‰©å±•æ–¹å¼ï¼Œè€Œæ’ä»¶æ˜¯ Rollup çš„å”¯ä¸€çš„æ‰©å±•æ–¹å¼ã€‚")]),s._v(" "),a("p",[s._v("è¿™é‡Œæˆ‘ä»¬å…ˆæ¥å°è¯•ä½¿ç”¨ä¸€ä¸ªå¯ä»¥è®©æˆ‘ä»¬åœ¨ä»£ç ä¸­å¯¼å…¥ JSON æ–‡ä»¶çš„æ’ä»¶ï¼š"),a("a",{attrs:{href:"https://github.com/rollup/plugins/tree/master/packages/json"}},[s._v("@rollup/plugin-json")]),s._v("ï¼Œé€šè¿‡è¿™ä¸ªè¿‡ç¨‹æ¥äº†è§£å¦‚ä½•åœ¨ Rollup ä¸­ä½¿ç”¨æ’ä»¶ã€‚")]),s._v(" "),a("p",[s._v("é¦–å…ˆæˆ‘ä»¬éœ€è¦å°† @rollup/plugin-json ä½œä¸ºé¡¹ç›®çš„å¼€å‘ä¾èµ–å®‰è£…è¿›æ¥ã€‚å…·ä½“å®‰è£…å‘½ä»¤ï¼š")]),s._v(" "),a("pre",[a("code",{staticClass:"lang-shell",attrs:{"data-language":"shell"}},[a("span",{staticClass:"hljs-meta"},[s._v("$")]),a("span",{staticClass:"bash"},[s._v(" npm i @rollup/plugin-json --save-dev")]),s._v("\n")])]),s._v(" "),a("p",[s._v("å®‰è£…å®Œæˆè¿‡åï¼Œæˆ‘ä»¬æ‰“å¼€é…ç½®æ–‡ä»¶ã€‚ç”±äº rollup çš„é…ç½®æ–‡ä»¶ä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨ ES Modulesï¼Œæ‰€ä»¥æˆ‘ä»¬è¿™é‡Œä½¿ç”¨ import å¯¼å…¥è¿™ä¸ªæ’ä»¶æ¨¡å—ã€‚å…·ä½“ä»£ç å¦‚ä¸‹ï¼š")]),s._v(" "),a("pre",[a("code",{staticClass:"lang-javascript",attrs:{"data-language":"javascript"}},[a("span",{staticClass:"hljs-comment"},[s._v("// ./rollup.config.js")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" json "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'@rollup/plugin-json'")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("export")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("default")]),s._v(" {\n  "),a("span",{staticClass:"hljs-attr"},[s._v("input")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'src/index.js'")]),s._v(",\n  "),a("span",{staticClass:"hljs-attr"},[s._v("output")]),s._v(": {\n    "),a("span",{staticClass:"hljs-attr"},[s._v("file")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'dist/bundle.js'")]),s._v(",\n    "),a("span",{staticClass:"hljs-attr"},[s._v("format")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'es'")]),s._v("\n  },\n  "),a("span",{staticClass:"hljs-attr"},[s._v("plugins")]),s._v(": [\n    json()\n  ]\n}\n")])]),s._v(" "),a("p",[s._v("@rollup/plugin-json æ¨¡å—çš„é»˜è®¤å¯¼å‡ºå°±æ˜¯ä¸€ä¸ªæ’ä»¶å‡½æ•°ã€‚æˆ‘ä»¬å¯ä»¥å°†è¿™ä¸ªå‡½æ•°çš„è°ƒç”¨ç»“æœæ·»åŠ åˆ°é…ç½®å¯¹è±¡çš„ plugins æ•°ç»„ä¸­ï¼Œæ³¨æ„è¿™é‡Œæ˜¯å°†è°ƒç”¨ç»“æœæ”¾åˆ°æ•°ç»„ä¸­ï¼Œè€Œä¸æ˜¯å°†è¿™ä¸ªå‡½æ•°ç›´æ¥æ”¾è¿›å»ã€‚")]),s._v(" "),a("p",[s._v("é…ç½®å¥½è¿™ä¸ªæ’ä»¶è¿‡åï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨ä»£ç ä¸­é€šè¿‡ import å¯¼å…¥ json æ–‡ä»¶äº†ã€‚æˆ‘ä»¬å›åˆ° index.js æ–‡ä»¶ä¸­ï¼Œè¿™é‡Œæˆ‘ä»¬å°è¯•é€šè¿‡ import å¯¼å…¥ package.jsonï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š")]),s._v(" "),a("pre",[a("code",{staticClass:"lang-javascript",attrs:{"data-language":"javascript"}},[a("span",{staticClass:"hljs-comment"},[s._v("// ./src/index.js")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" { name, version } "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'../package.json'")]),s._v("\n"),a("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log(name, version)\n")])]),s._v(" "),a("p",[s._v("é‚£è¿™ä¸ª JSON æ–‡ä»¶ä¸­çš„æ¯ä¸€ä¸ªå±æ€§éƒ½ä¼šä½œä¸ºå•ç‹¬çš„å¯¼å‡ºæˆå‘˜ã€‚æˆ‘ä»¬å¯ä»¥æå–ä¸€ä¸‹ JSON ä¸­çš„ name å’Œ versionï¼Œç„¶åæŠŠå®ƒæ‰“å°å‡ºæ¥ã€‚")]),s._v(" "),a("p",[s._v("å®Œæˆä»¥åï¼Œæˆ‘ä»¬æ‰“å¼€å‘½ä»¤è¡Œç»ˆç«¯ï¼Œå†æ¬¡è¿è¡Œ Rollup æ‰“åŒ…ã€‚æ‰“åŒ…å®Œæˆä»¥åï¼Œæˆ‘ä»¬æ‰¾åˆ°è¾“å‡ºçš„ bundle.jsï¼Œå…·ä½“ç»“æœå¦‚ä¸‹ï¼š")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s0.lgstatic.com/i/image/M00/12/F6/Ciqc1F7OSc6AWooYAABuIh3cPUs738.png",alt:"image (15).png"}})]),s._v(" "),a("p",[s._v("æ­¤æ—¶ä½ å°±èƒ½çœ‹åˆ°ï¼Œpackage.json ä¸­çš„ name å’Œ version æ­£å¸¸è¢«æ‰“åŒ…è¿›æ¥äº†ï¼Œè€Œä¸”å…¶ä»–æ²¡ç”¨åˆ°çš„å±æ€§ä¹Ÿéƒ½è¢« Tree-shaking ç§»é™¤æ‰äº†ã€‚")]),s._v(" "),a("p",[s._v("ä»¥ä¸Šå°±æ˜¯ Rollup ä¸­æ’ä»¶çš„ä½¿ç”¨ã€‚")]),s._v(" "),a("h4",[s._v("åŠ è½½ NPM æ¨¡å—")]),s._v(" "),a("p",[s._v("Rollup é»˜è®¤åªèƒ½å¤ŸæŒ‰ç…§æ–‡ä»¶è·¯å¾„çš„æ–¹å¼åŠ è½½æœ¬åœ°çš„æ¨¡å—æ–‡ä»¶ï¼Œå¯¹äº node_modules ç›®å½•ä¸­çš„ç¬¬ä¸‰æ–¹æ¨¡å—ï¼Œå¹¶ä¸èƒ½åƒ Webpack ä¸€æ ·ï¼Œç›´æ¥é€šè¿‡æ¨¡å—åç§°ç›´æ¥å¯¼å…¥ã€‚")]),s._v(" "),a("p",[s._v("ä¸ºäº†æŠ¹å¹³è¿™ä¸ªå·®å¼‚ï¼ŒRollup ç»™å‡ºäº†ä¸€ä¸ª "),a("a",{attrs:{href:"https://github.com/rollup/plugins/tree/master/packages/node-resolve"}},[s._v("@rollup/plugin-node-resolve")]),s._v(" æ’ä»¶ï¼Œé€šè¿‡ä½¿ç”¨è¿™ä¸ªæ’ä»¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨ä»£ç ä¸­ç›´æ¥ä½¿ç”¨æ¨¡å—åç§°å¯¼å…¥æ¨¡å—äº†ã€‚")]),s._v(" "),a("p",[s._v("åŒæ ·ï¼Œæˆ‘ä»¬éœ€è¦å…ˆå®‰è£…è¿™ä¸ªæ’ä»¶ï¼Œå…·ä½“å‘½ä»¤å¦‚ä¸‹ï¼š")]),s._v(" "),a("pre",[a("code",{staticClass:"lang-shell",attrs:{"data-language":"shell"}},[a("span",{staticClass:"hljs-meta"},[s._v("$")]),a("span",{staticClass:"bash"},[s._v("Â npm i @rollup/plugin-node-resolve --save-dev")]),s._v("\n")])]),s._v(" "),a("p",[s._v("å®‰è£…å®Œæˆè¿‡åï¼Œæ‰“å¼€é…ç½®æ–‡ä»¶ï¼Œè¿™é‡ŒåŒæ ·å¯¼å…¥æ’ä»¶å‡½æ•°ï¼Œç„¶åæŠŠå®ƒé…ç½®åˆ° plugins æ•°ç»„ä¸­ã€‚å…·ä½“é…ç½®å¦‚ä¸‹ï¼š")]),s._v(" "),a("pre",[a("code",{staticClass:"lang-javascript",attrs:{"data-language":"javascript"}},[a("span",{staticClass:"hljs-comment"},[s._v("// ./rollup.config.js")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" json "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'@rollup/plugin-json'")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" resolve "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'@rollup/plugin-node-resolve'")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("export")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("default")]),s._v(" {\n  "),a("span",{staticClass:"hljs-attr"},[s._v("input")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'src/index.js'")]),s._v(",\n  "),a("span",{staticClass:"hljs-attr"},[s._v("output")]),s._v(": {\n    "),a("span",{staticClass:"hljs-attr"},[s._v("file")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'dist/bundle.js'")]),s._v(",\n    "),a("span",{staticClass:"hljs-attr"},[s._v("format")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'es'")]),s._v("\n  },\n  "),a("span",{staticClass:"hljs-attr"},[s._v("plugins")]),s._v(": [\n    json(),\n    resolve()\n  ]\n}\n")])]),s._v(" "),a("p",[s._v("å®Œæˆä»¥åæˆ‘ä»¬å°±å¯ä»¥å›åˆ°ä»£ç ä¸­ç›´æ¥å¯¼å…¥ node_modules ä¸­çš„ç¬¬ä¸‰æ–¹æ¨¡å—äº†ã€‚ä¾‹å¦‚ï¼š")]),s._v(" "),a("pre",[a("code",{staticClass:"lang-javascript",attrs:{"data-language":"javascript"}},[a("span",{staticClass:"hljs-comment"},[s._v("// ./src/index.js")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" { camelCase } "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'lodash-es'")]),s._v("\n"),a("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log(camelCase("),a("span",{staticClass:"hljs-string"},[s._v("'hello rollup'")]),s._v("))\n")])]),s._v(" "),a("p",[s._v("è¿™é‡Œæˆ‘å¯¼å…¥çš„æ˜¯æˆ‘æå‰å®‰è£…å¥½çš„ä¸€ä¸ª "),a("a",{attrs:{href:"https://www.npmjs.com/package/lodash-es"}},[s._v("lodash-es")]),s._v(" æ¨¡å—ï¼Œè¿™ä¸ªæ¨¡å—å°±æ˜¯å¸¸ç”¨çš„ lodash æ¨¡å—çš„ ESM ç‰ˆæœ¬ã€‚å¯¼å…¥è¿‡åæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ¨¡å—æ‰€æä¾›çš„å·¥å…·æ–¹æ³•äº†ã€‚")]),s._v(" "),a("blockquote",[a("p",[s._v("P.S. ç›¸æ¯”äºæ™®é€šçš„ lodashï¼Œlodash-es å¯ä»¥æ›´å¥½åœ°æ”¯æŒ Tree-shakingã€‚")])]),s._v(" "),a("p",[s._v("å®Œæˆè¿‡åæˆ‘ä»¬å†æ¬¡æ‰“å¼€å‘½ä»¤è¡Œç»ˆç«¯ï¼Œè¿è¡Œ Rollup æ‰“åŒ…ï¼Œæ­¤æ—¶ lodash å°±èƒ½å¤Ÿæ‰“åŒ…åˆ°æˆ‘ä»¬çš„ bundle.js ä¸­äº†ã€‚")]),s._v(" "),a("p",[s._v("è¿™é‡Œä½¿ç”¨ Lodash çš„ ESM ç‰ˆæœ¬è€Œä¸æ˜¯ Lodash æ™®é€šç‰ˆæœ¬çš„åŸå› æ˜¯ Rollup é»˜è®¤åªèƒ½å¤„ç† ESM æ¨¡å—ã€‚å¦‚æœè¦ä½¿ç”¨æ™®é€šç‰ˆæœ¬åˆ™éœ€è¦é¢å¤–å¤„ç†ã€‚")]),s._v(" "),a("h4",[s._v("åŠ è½½ CommonJS æ¨¡å—")]),s._v(" "),a("p",[s._v("ç”±äº Rollup è®¾è®¡çš„æ˜¯åªå¤„ç† ES Modules æ¨¡å—çš„æ‰“åŒ…ï¼Œæ‰€ä»¥å¦‚æœåœ¨ä»£ç ä¸­å¯¼å…¥ CommonJS æ¨¡å—ï¼Œé»˜è®¤æ˜¯ä¸è¢«æ”¯æŒçš„ã€‚ä½†æ˜¯ç›®å‰å¤§é‡çš„ NPM æ¨¡å—è¿˜æ˜¯ä½¿ç”¨ CommonJS æ–¹å¼å¯¼å‡ºæˆå‘˜ï¼Œæ‰€ä»¥ä¸ºäº†å…¼å®¹è¿™äº›æ¨¡å—ã€‚å®˜æ–¹ç»™å‡ºäº†ä¸€ä¸ªæ’ä»¶ï¼Œå«ä½œ "),a("a",{attrs:{href:"https://github.com/rollup/plugins/tree/master/packages/commonjs"}},[s._v("@rollup/plugin-commonjs")]),s._v("ã€‚")]),s._v(" "),a("p",[s._v("è¿™ä¸ªæ’ä»¶åœ¨ç”¨æ³•ä¸Šè·Ÿå‰é¢ä¸¤ä¸ªæ’ä»¶æ˜¯ä¸€æ ·çš„ï¼Œæˆ‘å°±ä¸å•ç‹¬æ¼”ç¤ºäº†ã€‚æˆ‘ä»¬ç›´æ¥çœ‹ä¸€ä¸‹è¿™ä¸ªæ’ä»¶çš„æ•ˆæœã€‚è¿™é‡Œæˆ‘æ·»åŠ äº†ä¸€ä¸ª cjs-module.js æ–‡ä»¶ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š")]),s._v(" "),a("pre",[a("code",{staticClass:"lang-javascript",attrs:{"data-language":"javascript"}},[a("span",{staticClass:"hljs-comment"},[s._v("// ./src/cjs-module.js")]),s._v("\n"),a("span",{staticClass:"hljs-built_in"},[s._v("module")]),s._v(".exports = {\n  "),a("span",{staticClass:"hljs-attr"},[s._v("foo")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'bar'")]),s._v("\n}\n")])]),s._v(" "),a("p",[s._v("è¿™ä¸ªæ–‡ä»¶ä¸­ä½¿ç”¨ CommonJS çš„æ–¹å¼å¯¼å‡ºäº†ä¸€ä¸ªå¯¹è±¡ã€‚ç„¶åå›åˆ°å…¥å£æ–‡ä»¶ä¸­é€šè¿‡ ES Modules çš„æ–¹å¼å¯¼å…¥ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š")]),s._v(" "),a("pre",[a("code",{staticClass:"lang-javascript",attrs:{"data-language":"javascript"}},[a("span",{staticClass:"hljs-comment"},[s._v("// ./src/index.js")]),s._v("\n"),a("span",{staticClass:"hljs-comment"},[s._v("// å¯¼å…¥ CommonJS æ¨¡å—æˆå‘˜")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" cjs "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'./cjs-module'")]),s._v("\n"),a("span",{staticClass:"hljs-comment"},[s._v("// ä½¿ç”¨æ¨¡å—æˆå‘˜")]),s._v("\n"),a("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log(cjs) "),a("span",{staticClass:"hljs-comment"},[s._v("// cjs => { foo: 'bar' }")]),s._v("\n")])]),s._v(" "),a("p",[s._v("å…¥å£æ–‡ä»¶å¯¼å…¥çš„ç»“æœå°±æ˜¯ cjs-module.js ä¸­å¯¼å‡ºçš„å¯¹è±¡äº†ã€‚")]),s._v(" "),a("h3",[s._v("Code Splitting")]),s._v(" "),a("p",[s._v("Rollup çš„æœ€æ–°ç‰ˆæœ¬ä¸­å·²ç»å¼€å§‹æ”¯æŒä»£ç æ‹†åˆ†äº†ã€‚æˆ‘ä»¬åŒæ ·å¯ä»¥ä½¿ç”¨ç¬¦åˆ ES Modules æ ‡å‡†çš„åŠ¨æ€å¯¼å…¥æ–¹å¼å®ç°æ¨¡å—çš„æŒ‰éœ€åŠ è½½ã€‚ä¾‹å¦‚ï¼š")]),s._v(" "),a("pre",[a("code",{staticClass:"lang-javascript",attrs:{"data-language":"javascript"}},[a("span",{staticClass:"hljs-comment"},[s._v("// ./src/index.js")]),s._v("\n"),a("span",{staticClass:"hljs-comment"},[s._v("// åŠ¨æ€å¯¼å…¥çš„æ¨¡å—ä¼šè‡ªåŠ¨åˆ†åŒ…")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v("("),a("span",{staticClass:"hljs-string"},[s._v("'./logger'")]),s._v(").then("),a("span",{staticClass:"hljs-function"},[s._v("("),a("span",{staticClass:"hljs-params"},[s._v("{ log }")]),s._v(") =>")]),s._v(" {\n  log("),a("span",{staticClass:"hljs-string"},[s._v("'code splitting~'")]),s._v(")\n})\n")])]),s._v(" "),a("p",[s._v("Rollup å†…éƒ¨ä¹Ÿä¼šå¤„ç†ä»£ç æ‹†åˆ†ã€‚ä¸è¿‡æŒ‰ç…§ä¹‹å‰çš„é…ç½®æ–¹å¼ï¼Œè¿™é‡Œç›´æ¥æ‰“åŒ…ä¼šæŠ¥å‡ºä¸€ä¸ªé”™è¯¯ï¼š")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s0.lgstatic.com/i/image/M00/12/F6/Ciqc1F7OSduAVJ9yAAJP3ntcGOo011.png",alt:"image (16).png"}})]),s._v(" "),a("p",[s._v("å‡ºç°è¿™ä¸ªé”™è¯¯çš„åŸå› æ˜¯ï¼šåœ¨ Rollup åœ¨åˆ†åŒ…è¿‡åä¼šè¾“å‡ºå¤šä¸ª JS æ–‡ä»¶ï¼Œéœ€è¦æˆ‘ä»¬åœ¨é…ç½®ä¸­æŒ‡å®šè¾“å‡ºçš„ç›®å½•ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå…·ä½“çš„æ–‡ä»¶åï¼Œå…·ä½“é…ç½®å¦‚ä¸‹ï¼š")]),s._v(" "),a("pre",[a("code",{staticClass:"lang-javascript",attrs:{"data-language":"javascript"}},[a("span",{staticClass:"hljs-comment"},[s._v("// ./rollup.config.js")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("export")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("default")]),s._v(" {\n  "),a("span",{staticClass:"hljs-attr"},[s._v("input")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'src/index.js'")]),s._v(",\n  "),a("span",{staticClass:"hljs-attr"},[s._v("output")]),s._v(": {\n    "),a("span",{staticClass:"hljs-comment"},[s._v("// file: 'dist/bundle.js', // code splitting è¾“å‡ºçš„æ˜¯å¤šä¸ªæ–‡ä»¶")]),s._v("\n    "),a("span",{staticClass:"hljs-attr"},[s._v("dir")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'dist'")]),s._v(",\n    "),a("span",{staticClass:"hljs-attr"},[s._v("format")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'es'")]),s._v("\n  }\n}\n")])]),s._v(" "),a("p",[s._v("è¿™é‡Œæˆ‘ä»¬å°† output é…ç½®ä¸­çš„ file é€‰é¡¹åˆ æ‰ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯æ·»åŠ ä¸€ä¸ª dir é€‰é¡¹ï¼ŒæŠŠå®ƒè®¾ç½®ä¸º distï¼Œä¹Ÿå°±æ˜¯è¾“å‡ºåˆ° dist ç›®å½•ä¸­ã€‚")]),s._v(" "),a("p",[s._v("è¿™æ ·çš„è¯ï¼Œå†æ¬¡æ‰“åŒ…å°±å¯ä»¥æ­£å¸¸è¾“å‡ºäº†ã€‚å…·ä½“è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s0.lgstatic.com/i/image/M00/12/F6/Ciqc1F7OSeKAKBygAAA30G6xG-U506.png",alt:"image (17).png"}})]),s._v(" "),a("p",[s._v("è¿™æ¬¡æ‰“åŒ…è¿‡ç¨‹ä¸­ï¼ŒRollup å°±ä¼šè‡ªåŠ¨æå–åŠ¨æ€å¯¼å…¥çš„æ¨¡å—åˆ°å•ç‹¬çš„ JS æ–‡ä»¶ä¸­äº†ã€‚")]),s._v(" "),a("h4",[s._v("è¾“å‡ºæ ¼å¼é—®é¢˜")]),s._v(" "),a("p",[s._v("ç›®å‰é‡‡ç”¨çš„è¾“å‡ºæ ¼å¼æ˜¯ esï¼Œæ‰€ä»¥è‡ªåŠ¨åˆ†åŒ…è¿‡åï¼Œå¾—åˆ°çš„ä»£ç è¿˜æ˜¯ä½¿ç”¨ ES Modules å®ç°çš„åŠ¨æ€æ¨¡å—åŠ è½½ï¼Œå…·ä½“è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s0.lgstatic.com/i/image/M00/13/02/CgqCHl7OSemATtitAAFsfyPbzKs108.png",alt:"image (18).png"}})]),s._v(" "),a("p",[s._v("å¾ˆæ˜æ˜¾ï¼Œè¿™ç§æ–¹å¼çš„ä»£ç ä»ç„¶ä¼šå­˜åœ¨ç¯å¢ƒå…¼å®¹æ€§é—®é¢˜ï¼šå¦‚æœåœ¨ä½ç‰ˆæœ¬æµè§ˆå™¨ï¼Œè¿™ç§è¾“å‡ºç»“æœæ˜¯æ— æ³•æ­£å¸¸æ‰§è¡Œçš„ã€‚")]),s._v(" "),a("p",[s._v("è§£å†³è¿™ä¸ªé—®é¢˜çš„åŠæ³•å°±æ˜¯ä¿®æ”¹ Rollup æ‰“åŒ…è¾“å‡ºçš„æ ¼å¼ã€‚ç›®å‰æ‰€æœ‰æ”¯æŒåŠ¨æ€å¯¼å…¥çš„è¾“å‡ºæ ¼å¼ä¸­ï¼Œåªæœ‰ amd å’Œ system ä¸¤ç§æ ¼å¼æ‰“åŒ…çš„ç»“æœé€‚åˆäºæµè§ˆå™¨ç¯å¢ƒã€‚")]),s._v(" "),a("p",[s._v("æ‰€ä»¥åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©ä»¥ amd æˆ–è€… system æ ¼å¼è¾“å‡ºã€‚è¿™é‡Œæˆ‘ä»¬ä»¥ amd ä¸ºä¾‹ï¼Œè¿™é‡Œæˆ‘ä»¬å…ˆå°† Rollup é…ç½®ä¸­çš„ format è®¾ç½®ä¸º amdã€‚å…·ä½“é…ç½®å¦‚ä¸‹ï¼š")]),s._v(" "),a("pre",[a("code",{staticClass:"lang-javascript",attrs:{"data-language":"javascript"}},[a("span",{staticClass:"hljs-comment"},[s._v("// ./rollup.config.js")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("export")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("default")]),s._v(" {\n  "),a("span",{staticClass:"hljs-attr"},[s._v("input")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'src/index.js'")]),s._v(",\n  "),a("span",{staticClass:"hljs-attr"},[s._v("output")]),s._v(": {\n    "),a("span",{staticClass:"hljs-attr"},[s._v("dir")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'dist'")]),s._v(",\n    "),a("span",{staticClass:"hljs-attr"},[s._v("format")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'amd'")]),s._v("\n  }\n}\n")])]),s._v(" "),a("p",[s._v("è¿™æ ·çš„è¯ï¼Œå†æ¬¡æ‰“åŒ…è¾“å‡ºçš„ç»“æœå°±æ˜¯é‡‡ç”¨ AMD æ ‡å‡†ç»„ç»‡çš„ä»£ç äº†ï¼Œå…·ä½“å¦‚ä¸‹ï¼š")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s0.lgstatic.com/i/image/M00/12/F6/Ciqc1F7OSfGAMQ5VAAIowWpAVAg558.png",alt:"image (19).png"}})]),s._v(" "),a("p",[s._v("éœ€è¦æ³¨æ„ä¸€ç‚¹ï¼Œè¿™ç§ AMD æ ‡å‡†åœ¨æµè§ˆå™¨ä¸­ä¹Ÿä¸æ˜¯ç›´æ¥æ”¯æŒçš„ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬è¿˜æ˜¯éœ€è¦ä½¿ç”¨ä¸€ä¸ªæ”¯æŒè¿™ä¸ªæ ‡å‡†çš„åº“æ¥åŠ è½½è¿™äº›è¾“å‡ºçš„æ¨¡å—ï¼Œä¾‹å¦‚ "),a("a",{attrs:{href:"https://requirejs.org"}},[s._v("Require.js")]),s._v("ï¼Œå…·ä½“ä½¿ç”¨æ–¹å¼å‚è€ƒï¼š")]),s._v(" "),a("pre",[a("code",{staticClass:"lang-xml",attrs:{"data-language":"xml"}},[a("span",{staticClass:"hljs-meta"},[s._v("<!DOCTYPE "),a("span",{staticClass:"hljs-meta-keyword"},[s._v("html")]),s._v(">")]),s._v("\n"),a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("html")]),s._v(" "),a("span",{staticClass:"hljs-attr"},[s._v("lang")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"en"')]),s._v(">")]),s._v("\n"),a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("head")]),s._v(">")]),s._v("\n  "),a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("meta")]),s._v(" "),a("span",{staticClass:"hljs-attr"},[s._v("charset")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"UTF-8"')]),s._v(">")]),s._v("\n  "),a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("title")]),s._v(">")]),s._v("AMD Format output"),a("span",{staticClass:"hljs-tag"},[s._v("</"),a("span",{staticClass:"hljs-name"},[s._v("title")]),s._v(">")]),s._v("\n"),a("span",{staticClass:"hljs-tag"},[s._v("</"),a("span",{staticClass:"hljs-name"},[s._v("head")]),s._v(">")]),s._v("\n"),a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("body")]),s._v(">")]),s._v("\n  "),a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("script")]),s._v(" "),a("span",{staticClass:"hljs-attr"},[s._v("src")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"https://unpkg.com/requirejs@2.3.6/require.js"')]),s._v(" "),a("span",{staticClass:"hljs-attr"},[s._v("data-main")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"dist/index.js"')]),s._v(">")]),a("span",{staticClass:"hljs-tag"},[s._v("</"),a("span",{staticClass:"hljs-name"},[s._v("script")]),s._v(">")]),s._v("\n"),a("span",{staticClass:"hljs-tag"},[s._v("</"),a("span",{staticClass:"hljs-name"},[s._v("body")]),s._v(">")]),s._v("\n"),a("span",{staticClass:"hljs-tag"},[s._v("</"),a("span",{staticClass:"hljs-name"},[s._v("html")]),s._v(">")]),s._v("\n")])]),s._v(" "),a("blockquote",[a("p",[s._v("P.S. æœ¬è¯¾æ—¶ä¸­æ‰€æœ‰çš„æ¡ˆä¾‹æºä»£ç ï¼š"),a("a",{attrs:{href:"https://github.com/zce/rollup-demo"}},[s._v("https://github.com/zce/rollup-demo")])])]),s._v(" "),a("h3",[s._v("å†™åœ¨æœ€å")]),s._v(" "),a("p",[s._v("é€šè¿‡ä»¥ä¸Šçš„æ¢ç´¢ï¼Œæˆ‘ä»¬å‘ç° Rollup ç¡®å®æœ‰å®ƒçš„ä¼˜åŠ¿ï¼š")]),s._v(" "),a("ul",[a("li",[s._v("è¾“å‡ºç»“æœæ›´åŠ æ‰å¹³ï¼Œæ‰§è¡Œæ•ˆç‡æ›´é«˜ï¼›")]),s._v(" "),a("li",[s._v("è‡ªåŠ¨ç§»é™¤æœªå¼•ç”¨ä»£ç ï¼›")]),s._v(" "),a("li",[s._v("æ‰“åŒ…ç»“æœä¾ç„¶å®Œå…¨å¯è¯»ã€‚")])]),s._v(" "),a("p",[s._v("ä½†æ˜¯å®ƒçš„ç¼ºç‚¹ä¹ŸåŒæ ·æ˜æ˜¾ï¼š")]),s._v(" "),a("ul",[a("li",[s._v("åŠ è½½é ESM çš„ç¬¬ä¸‰æ–¹æ¨¡å—æ¯”è¾ƒå¤æ‚ï¼›")]),s._v(" "),a("li",[s._v("å› ä¸ºæ¨¡å—æœ€ç»ˆéƒ½è¢«æ‰“åŒ…åˆ°å…¨å±€ä¸­ï¼Œæ‰€ä»¥æ— æ³•å®ç° HMRï¼›")]),s._v(" "),a("li",[s._v("æµè§ˆå™¨ç¯å¢ƒä¸­ï¼Œä»£ç æ‹†åˆ†åŠŸèƒ½å¿…é¡»ä½¿ç”¨ Require.js è¿™æ ·çš„ AMD åº“ã€‚")])]),s._v(" "),a("p",[s._v("ç»¼åˆä»¥ä¸Šç‰¹ç‚¹ï¼Œæˆ‘ä»¬å‘ç°å¦‚æœæˆ‘ä»¬å¼€å‘çš„æ˜¯ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œéœ€è¦å¤§é‡å¼•ç”¨ç¬¬ä¸‰æ–¹æ¨¡å—ï¼ŒåŒæ—¶è¿˜éœ€è¦ HMR æå‡å¼€å‘ä½“éªŒï¼Œè€Œä¸”åº”ç”¨è¿‡å¤§å°±å¿…é¡»è¦åˆ†åŒ…ã€‚é‚£è¿™äº›éœ€æ±‚ Rollup éƒ½æ— æ³•æ»¡è¶³ã€‚")]),s._v(" "),a("p",[s._v("è€Œå¦‚æœæˆ‘ä»¬æ˜¯å¼€å‘ä¸€ä¸ª JavaScript æ¡†æ¶æˆ–è€…åº“ï¼Œé‚£è¿™äº›ä¼˜ç‚¹å°±ç‰¹åˆ«æœ‰å¿…è¦ï¼Œè€Œç¼ºç‚¹å‘¢å‡ ä¹ä¹Ÿéƒ½å¯ä»¥å¿½ç•¥ï¼Œæ‰€ä»¥åœ¨å¾ˆå¤šåƒ React æˆ–è€… Vue ä¹‹ç±»çš„æ¡†æ¶ä¸­éƒ½æ˜¯ä½¿ç”¨çš„ Rollup ä½œä¸ºæ¨¡å—æ‰“åŒ…å™¨ï¼Œè€Œå¹¶é Webpackã€‚")]),s._v(" "),a("p",[s._v("ä½†æ˜¯åˆ°ç›®å‰ä¸ºæ­¢ï¼Œå¼€æºç¤¾åŒºä¸­å¤§å¤šæ•°äººè¿˜æ˜¯å¸Œæœ›è¿™ä¸¤ä¸ªå·¥å…·å…±åŒå­˜åœ¨ï¼Œå¹¶ä¸”èƒ½å¤Ÿç›¸äº’æ”¯æŒå’Œå€Ÿé‰´ï¼ŒåŸå› å¾ˆç®€å•ï¼šè®©æ›´ä¸“ä¸šçš„å·¥å…·å®Œæˆæ›´ä¸“ä¸šçš„äº‹æƒ…ã€‚")]),s._v(" "),a("p",[s._v("æ€»ç»“ä¸€ä¸‹ï¼šWebpack å¤§è€Œå…¨ï¼ŒRollup å°è€Œç¾ã€‚")]),s._v(" "),a("p",[s._v("åœ¨å¯¹å®ƒä»¬çš„é€‰æ‹©ä¸Šï¼Œæˆ‘çš„åŸºæœ¬åŸåˆ™æ˜¯ï¼šåº”ç”¨å¼€å‘ä½¿ç”¨ Webpackï¼Œç±»åº“æˆ–è€…æ¡†æ¶å¼€å‘ä½¿ç”¨ Rollupã€‚")]),s._v(" "),a("p",[s._v("ä¸è¿‡è¿™å¹¶ä¸æ˜¯ç»å¯¹çš„æ ‡å‡†ï¼Œåªæ˜¯ç»éªŒæ³•åˆ™ã€‚å› ä¸º Rollup ä¹Ÿå¯ç”¨äºæ„å»ºç»å¤§å¤šæ•°åº”ç”¨ç¨‹åºï¼Œè€Œ Webpack åŒæ ·ä¹Ÿå¯ä»¥æ„å»ºç±»åº“æˆ–è€…æ¡†æ¶ã€‚")]),s._v(" "),a("p",[s._v("å¦å¤–éšç€è¿‘å‡ å¹´ Webpack çš„å‘å±•ï¼ŒRollup ä¸­çš„å¾ˆå¤šä¼˜åŠ¿å‡ ä¹å·²ç»æŠ¹å¹³äº†ï¼Œæ‰€ä»¥è¿™ç§å¯¹æ¯”æ…¢æ…¢åœ°ä¹Ÿå°±æ²¡æœ‰å¤ªå¤§æ„ä¹‰äº†ã€‚")]),s._v(" "),a("hr"),s._v(" "),a("h3",{attrs:{id:"ç²¾é€‰è¯„è®º"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç²¾é€‰è¯„è®º"}},[s._v("#")]),s._v(" ç²¾é€‰è¯„è®º")]),s._v(" "),a("h5",{attrs:{id:"ç”²"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç”²"}},[s._v("#")]),s._v(" **ç”²ï¼š")]),s._v(" "),a("blockquote",[a("p",[s._v("è€å¸ˆæœ‰è€ƒè™‘æ›´æ–°ä¸‹æ–‡ç« ï¼ŒæŠŠvue3è·Ÿéšå‘å¸ƒçš„viteè¯´è¯´å—ï¼ŸğŸ˜Š")])]),s._v(" "),a("h6",{attrs:{id:"è®²å¸ˆå›å¤"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è®²å¸ˆå›å¤"}},[s._v("#")]),s._v(" Â Â Â  è®²å¸ˆå›å¤ï¼š")]),s._v(" "),a("blockquote",[a("p",[s._v("Â Â Â  ä¹‹å‰å…¬å¼€è¯¾åšäº†ä¸ªç¤ºä¾‹æ•™ç¨‹ï¼Œhttps://github.com/zce/vite-essentials")])]),s._v(" "),a("h5",{attrs:{id:"æµ©"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æµ©"}},[s._v("#")]),s._v(" *æµ©ï¼š")]),s._v(" "),a("blockquote",[a("p",[s._v("rollup å’Œ webpackçš„å¯¹æ¯”å†™çš„å¾ˆä¸é”™")])]),s._v(" "),a("h5",{attrs:{id:"æ’"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ’"}},[s._v("#")]),s._v(" **æ’ï¼š")]),s._v(" "),a("blockquote",[a("p",[s._v("æ”¯æŒæµè§ˆå™¨ç¯å¢ƒè¿˜æœ‰umd æ ¼å¼")])]),s._v(" "),a("h5",{attrs:{id:"æ³¢"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ³¢"}},[s._v("#")]),s._v(" *æ³¢ï¼š")]),s._v(" "),a("blockquote",[a("p",[s._v("vue-cli-serve å•ç‹¬æ‰“åŒ…å‡ºäº†css,æˆ‘å¥½åƒæ²¡æœ‰åšå…¶ä»–é…ç½®ï¼Œä¸çŸ¥é“æ˜¯å“ªä¸ªé…ç½®å¯¼è‡´çš„")])]),s._v(" "),a("h6",{attrs:{id:"è®²å¸ˆå›å¤-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è®²å¸ˆå›å¤-2"}},[s._v("#")]),s._v(" Â Â Â  è®²å¸ˆå›å¤ï¼š")]),s._v(" "),a("blockquote",[a("p",[s._v("Â Â Â  vue-cli-service å†…éƒ¨é›†æˆäº† mini-css-extract æ’ä»¶")])])])}),[],!1,null,null,null);a.default=v.exports}}]);