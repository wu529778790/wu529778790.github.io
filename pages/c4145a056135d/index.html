<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>如何设计一个“万能”项目脚手架？ | 神族九帝&#39;s blog</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/img/favicon.ico">
    <script src="https://pagespy.shenzjd.com/page-spy/index.min.js"></script>
    <script src="https://pagespy.shenzjd.com/plugin/data-harbor/index.min.js"></script>
    <script src="https://pagespy.shenzjd.com/plugin/rrweb/index.min.js"></script>
    <script>
    window.$harbor = new DataHarborPlugin();
    window.$rrweb = new RRWebPlugin();

    [window.$harbor, window.$rrweb].forEach(p => {
      PageSpy.registerPlugin(p)
    })

    window.$pageSpy = new PageSpy();
    </script>
    <meta name="description" content="web前端技术博客,简洁至上,专注web前端学习与总结。JavaScript,js,ES6,TypeScript,vue,css3,html5,Node,git,github等技术文章。">
    <meta name="keywords" content="前端博客,个人技术博客,前端,前端开发,前端框架,web前端,前端面试题,技术文档,学习,面试,JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github,markdown">
    <meta name="baidu-site-verification" content="code-yywEP2q5jK">
    <meta name="theme-color" content="#11a8cd">
    <link rel="preload" href="/assets/css/0.styles.5fd99a46.css" as="style"><link rel="preload" href="/assets/js/app.e16f101c.js" as="script"><link rel="preload" href="/assets/js/3.0daeda44.js" as="script"><link rel="preload" href="/assets/js/179.8ef3efca.js" as="script"><link rel="prefetch" href="/assets/js/1.00bde0af.js"><link rel="prefetch" href="/assets/js/10.17bb35e6.js"><link rel="prefetch" href="/assets/js/100.605f8f47.js"><link rel="prefetch" href="/assets/js/101.446f5e64.js"><link rel="prefetch" href="/assets/js/102.b54402e8.js"><link rel="prefetch" href="/assets/js/103.3e55385e.js"><link rel="prefetch" href="/assets/js/104.ecaf8338.js"><link rel="prefetch" href="/assets/js/105.17a665ce.js"><link rel="prefetch" href="/assets/js/106.8feb43ec.js"><link rel="prefetch" href="/assets/js/107.a89c6115.js"><link rel="prefetch" href="/assets/js/108.ee7d7e25.js"><link rel="prefetch" href="/assets/js/109.105b37a5.js"><link rel="prefetch" href="/assets/js/11.a61e4e13.js"><link rel="prefetch" href="/assets/js/110.828dc308.js"><link rel="prefetch" href="/assets/js/111.ba11a43e.js"><link rel="prefetch" href="/assets/js/112.a42dcf69.js"><link rel="prefetch" href="/assets/js/113.21e2d397.js"><link rel="prefetch" href="/assets/js/114.b9ea327b.js"><link rel="prefetch" href="/assets/js/115.a36698a5.js"><link rel="prefetch" href="/assets/js/116.3229f14b.js"><link rel="prefetch" href="/assets/js/117.ef9b5431.js"><link rel="prefetch" href="/assets/js/118.d89bffcf.js"><link rel="prefetch" href="/assets/js/119.3a8936c5.js"><link rel="prefetch" href="/assets/js/12.0280ae2f.js"><link rel="prefetch" href="/assets/js/120.13d78f64.js"><link rel="prefetch" href="/assets/js/121.757d630e.js"><link rel="prefetch" href="/assets/js/122.1cfa566f.js"><link rel="prefetch" href="/assets/js/123.aa45ef43.js"><link rel="prefetch" href="/assets/js/124.39e6765e.js"><link rel="prefetch" href="/assets/js/125.50f56068.js"><link rel="prefetch" href="/assets/js/126.75709bab.js"><link rel="prefetch" href="/assets/js/127.71a475d6.js"><link rel="prefetch" href="/assets/js/128.29f8056e.js"><link rel="prefetch" href="/assets/js/129.7c834791.js"><link rel="prefetch" href="/assets/js/13.d418fe5d.js"><link rel="prefetch" href="/assets/js/130.cdf8f951.js"><link rel="prefetch" href="/assets/js/131.dde6919a.js"><link rel="prefetch" href="/assets/js/132.554d4de4.js"><link rel="prefetch" href="/assets/js/133.1f342145.js"><link rel="prefetch" href="/assets/js/134.55807db0.js"><link rel="prefetch" href="/assets/js/135.2a10f910.js"><link rel="prefetch" href="/assets/js/136.d2de34b0.js"><link rel="prefetch" href="/assets/js/137.055a6421.js"><link rel="prefetch" href="/assets/js/138.2467f3d6.js"><link rel="prefetch" href="/assets/js/139.d1a9a9d3.js"><link rel="prefetch" href="/assets/js/14.0a9fbaff.js"><link rel="prefetch" href="/assets/js/140.7a25f89d.js"><link rel="prefetch" href="/assets/js/141.c730bb21.js"><link rel="prefetch" href="/assets/js/142.bddd501d.js"><link rel="prefetch" href="/assets/js/143.bf353975.js"><link rel="prefetch" href="/assets/js/144.41873fbd.js"><link rel="prefetch" href="/assets/js/145.fe22e4c8.js"><link rel="prefetch" href="/assets/js/146.41904452.js"><link rel="prefetch" href="/assets/js/147.98612bdd.js"><link rel="prefetch" href="/assets/js/148.8ff8297b.js"><link rel="prefetch" href="/assets/js/149.b175d549.js"><link rel="prefetch" href="/assets/js/15.7fac5236.js"><link rel="prefetch" href="/assets/js/150.5ca9f7eb.js"><link rel="prefetch" href="/assets/js/151.74a6ce33.js"><link rel="prefetch" href="/assets/js/152.c291c10c.js"><link rel="prefetch" href="/assets/js/153.e6897557.js"><link rel="prefetch" href="/assets/js/154.6712e747.js"><link rel="prefetch" href="/assets/js/155.bc6b58ae.js"><link rel="prefetch" href="/assets/js/156.e16f4cd9.js"><link rel="prefetch" href="/assets/js/157.fb06e5d0.js"><link rel="prefetch" href="/assets/js/158.83fe2210.js"><link rel="prefetch" href="/assets/js/159.c709635d.js"><link rel="prefetch" href="/assets/js/16.d2e026bd.js"><link rel="prefetch" href="/assets/js/160.962e2132.js"><link rel="prefetch" href="/assets/js/161.e5abec42.js"><link rel="prefetch" href="/assets/js/162.ab8e3ee6.js"><link rel="prefetch" href="/assets/js/163.3d98e9f4.js"><link rel="prefetch" href="/assets/js/164.59203590.js"><link rel="prefetch" href="/assets/js/165.0103813b.js"><link rel="prefetch" href="/assets/js/166.ffd74452.js"><link rel="prefetch" href="/assets/js/167.9a315ca6.js"><link rel="prefetch" href="/assets/js/168.059bfd86.js"><link rel="prefetch" href="/assets/js/169.0a80161d.js"><link rel="prefetch" href="/assets/js/17.0d16cca3.js"><link rel="prefetch" href="/assets/js/170.56dbd5b3.js"><link rel="prefetch" href="/assets/js/171.31775eb9.js"><link rel="prefetch" href="/assets/js/172.06a24893.js"><link rel="prefetch" href="/assets/js/173.ea78cb34.js"><link rel="prefetch" href="/assets/js/174.6bff6b14.js"><link rel="prefetch" href="/assets/js/175.104bb015.js"><link rel="prefetch" href="/assets/js/176.446cb7df.js"><link rel="prefetch" href="/assets/js/177.c37c2704.js"><link rel="prefetch" href="/assets/js/178.09efb12e.js"><link rel="prefetch" href="/assets/js/18.61c869ca.js"><link rel="prefetch" href="/assets/js/180.0949f086.js"><link rel="prefetch" href="/assets/js/181.0d856c48.js"><link rel="prefetch" href="/assets/js/182.a4614208.js"><link rel="prefetch" href="/assets/js/183.d9175e02.js"><link rel="prefetch" href="/assets/js/184.95ba833c.js"><link rel="prefetch" href="/assets/js/185.66373ae6.js"><link rel="prefetch" href="/assets/js/186.8ffda0e0.js"><link rel="prefetch" href="/assets/js/187.790687e2.js"><link rel="prefetch" href="/assets/js/188.24d122d3.js"><link rel="prefetch" href="/assets/js/189.550915e5.js"><link rel="prefetch" href="/assets/js/19.bd278308.js"><link rel="prefetch" href="/assets/js/190.1c18dba1.js"><link rel="prefetch" href="/assets/js/191.aa21ceb1.js"><link rel="prefetch" href="/assets/js/192.d7c86e3e.js"><link rel="prefetch" href="/assets/js/193.7e790c55.js"><link rel="prefetch" href="/assets/js/194.59b3c903.js"><link rel="prefetch" href="/assets/js/195.cc4d0481.js"><link rel="prefetch" href="/assets/js/196.c67bdd5b.js"><link rel="prefetch" href="/assets/js/197.8fead494.js"><link rel="prefetch" href="/assets/js/198.3c1eddd4.js"><link rel="prefetch" href="/assets/js/199.a910f471.js"><link rel="prefetch" href="/assets/js/2.7266734b.js"><link rel="prefetch" href="/assets/js/20.74a48891.js"><link rel="prefetch" href="/assets/js/200.8f569ce4.js"><link rel="prefetch" href="/assets/js/201.b35eedc2.js"><link rel="prefetch" href="/assets/js/202.83abeedf.js"><link rel="prefetch" href="/assets/js/203.8ced9f29.js"><link rel="prefetch" href="/assets/js/204.756bd39f.js"><link rel="prefetch" href="/assets/js/205.9deee729.js"><link rel="prefetch" href="/assets/js/206.6232e1bc.js"><link rel="prefetch" href="/assets/js/207.a01a0a14.js"><link rel="prefetch" href="/assets/js/208.c6d3db39.js"><link rel="prefetch" href="/assets/js/209.29540038.js"><link rel="prefetch" href="/assets/js/21.2b5ffe31.js"><link rel="prefetch" href="/assets/js/210.8e4811c3.js"><link rel="prefetch" href="/assets/js/211.7a622844.js"><link rel="prefetch" href="/assets/js/212.d4a2690d.js"><link rel="prefetch" href="/assets/js/213.564d541a.js"><link rel="prefetch" href="/assets/js/214.dd12b1f3.js"><link rel="prefetch" href="/assets/js/215.728d40eb.js"><link rel="prefetch" href="/assets/js/216.eda9d6ab.js"><link rel="prefetch" href="/assets/js/217.57407c3e.js"><link rel="prefetch" href="/assets/js/218.944b7c75.js"><link rel="prefetch" href="/assets/js/219.96e6fe74.js"><link rel="prefetch" href="/assets/js/22.09b7ea66.js"><link rel="prefetch" href="/assets/js/220.d80f0a73.js"><link rel="prefetch" href="/assets/js/221.003f1902.js"><link rel="prefetch" href="/assets/js/222.13bf42b0.js"><link rel="prefetch" href="/assets/js/223.a41b8bd9.js"><link rel="prefetch" href="/assets/js/224.bd21e0a3.js"><link rel="prefetch" href="/assets/js/225.0cf01d16.js"><link rel="prefetch" href="/assets/js/226.04c17aee.js"><link rel="prefetch" href="/assets/js/227.a5f40ae2.js"><link rel="prefetch" href="/assets/js/228.3b97c263.js"><link rel="prefetch" href="/assets/js/229.29c9fa59.js"><link rel="prefetch" href="/assets/js/23.c644cba4.js"><link rel="prefetch" href="/assets/js/230.2d367c70.js"><link rel="prefetch" href="/assets/js/231.27011d07.js"><link rel="prefetch" href="/assets/js/232.a9fafe16.js"><link rel="prefetch" href="/assets/js/233.3f11a1f0.js"><link rel="prefetch" href="/assets/js/234.698d7084.js"><link rel="prefetch" href="/assets/js/235.c6450d0a.js"><link rel="prefetch" href="/assets/js/236.540827dd.js"><link rel="prefetch" href="/assets/js/237.a36e1ecd.js"><link rel="prefetch" href="/assets/js/238.4f64bf26.js"><link rel="prefetch" href="/assets/js/239.4fa65c51.js"><link rel="prefetch" href="/assets/js/24.1283b3e2.js"><link rel="prefetch" href="/assets/js/240.e661d37b.js"><link rel="prefetch" href="/assets/js/241.d326d39d.js"><link rel="prefetch" href="/assets/js/242.048487a8.js"><link rel="prefetch" href="/assets/js/243.1aa61f66.js"><link rel="prefetch" href="/assets/js/244.145e7a59.js"><link rel="prefetch" href="/assets/js/245.a2136565.js"><link rel="prefetch" href="/assets/js/246.6d285e3f.js"><link rel="prefetch" href="/assets/js/247.da61161a.js"><link rel="prefetch" href="/assets/js/248.12bd16a9.js"><link rel="prefetch" href="/assets/js/249.2886c43e.js"><link rel="prefetch" href="/assets/js/25.2764b97a.js"><link rel="prefetch" href="/assets/js/250.6e21a363.js"><link rel="prefetch" href="/assets/js/251.4050efed.js"><link rel="prefetch" href="/assets/js/252.c52deaf8.js"><link rel="prefetch" href="/assets/js/253.2bdf0e96.js"><link rel="prefetch" href="/assets/js/254.7364b819.js"><link rel="prefetch" href="/assets/js/255.1b9b9d4c.js"><link rel="prefetch" href="/assets/js/256.4f9df4fb.js"><link rel="prefetch" href="/assets/js/257.70207aa0.js"><link rel="prefetch" href="/assets/js/258.96d79aaa.js"><link rel="prefetch" href="/assets/js/259.a6ed3c06.js"><link rel="prefetch" href="/assets/js/26.bd795c71.js"><link rel="prefetch" href="/assets/js/260.02a3f31e.js"><link rel="prefetch" href="/assets/js/261.103d1c1f.js"><link rel="prefetch" href="/assets/js/262.21d9c70a.js"><link rel="prefetch" href="/assets/js/263.65cbe72a.js"><link rel="prefetch" href="/assets/js/264.92b2d4ac.js"><link rel="prefetch" href="/assets/js/265.214c2ff4.js"><link rel="prefetch" href="/assets/js/266.a4cc6fbc.js"><link rel="prefetch" href="/assets/js/267.315bbd5b.js"><link rel="prefetch" href="/assets/js/268.0f7ae7d2.js"><link rel="prefetch" href="/assets/js/269.32bb373c.js"><link rel="prefetch" href="/assets/js/27.4222ab7b.js"><link rel="prefetch" href="/assets/js/270.27155a7e.js"><link rel="prefetch" href="/assets/js/271.3c23f505.js"><link rel="prefetch" href="/assets/js/272.3e4cf59d.js"><link rel="prefetch" href="/assets/js/273.3a345c25.js"><link rel="prefetch" href="/assets/js/274.674733a7.js"><link rel="prefetch" href="/assets/js/275.6270c4fc.js"><link rel="prefetch" href="/assets/js/276.2a0cd1bd.js"><link rel="prefetch" href="/assets/js/277.c08cf059.js"><link rel="prefetch" href="/assets/js/278.9932d7d6.js"><link rel="prefetch" href="/assets/js/279.74c7fd0b.js"><link rel="prefetch" href="/assets/js/28.39779148.js"><link rel="prefetch" href="/assets/js/280.b374ab11.js"><link rel="prefetch" href="/assets/js/281.f9e4cc73.js"><link rel="prefetch" href="/assets/js/282.2109c0b4.js"><link rel="prefetch" href="/assets/js/283.ed276af5.js"><link rel="prefetch" href="/assets/js/284.0cb6b0e2.js"><link rel="prefetch" href="/assets/js/285.e1538911.js"><link rel="prefetch" href="/assets/js/286.acd5a734.js"><link rel="prefetch" href="/assets/js/287.32196777.js"><link rel="prefetch" href="/assets/js/288.225d6245.js"><link rel="prefetch" href="/assets/js/289.c93b852a.js"><link rel="prefetch" href="/assets/js/29.d5831cab.js"><link rel="prefetch" href="/assets/js/290.05eb54ac.js"><link rel="prefetch" href="/assets/js/291.314c27d6.js"><link rel="prefetch" href="/assets/js/292.9e796d4c.js"><link rel="prefetch" href="/assets/js/293.cd004864.js"><link rel="prefetch" href="/assets/js/294.9706745e.js"><link rel="prefetch" href="/assets/js/295.500b9de8.js"><link rel="prefetch" href="/assets/js/296.df335b2d.js"><link rel="prefetch" href="/assets/js/297.14543418.js"><link rel="prefetch" href="/assets/js/298.bc742bab.js"><link rel="prefetch" href="/assets/js/299.b7675879.js"><link rel="prefetch" href="/assets/js/30.f080541d.js"><link rel="prefetch" href="/assets/js/300.f7961868.js"><link rel="prefetch" href="/assets/js/31.f5b4ea4c.js"><link rel="prefetch" href="/assets/js/32.3301c1a2.js"><link rel="prefetch" href="/assets/js/33.7e1f8fd5.js"><link rel="prefetch" href="/assets/js/34.9bad101d.js"><link rel="prefetch" href="/assets/js/35.30f2eff0.js"><link rel="prefetch" href="/assets/js/36.5ebe01a1.js"><link rel="prefetch" href="/assets/js/37.29cc7e02.js"><link rel="prefetch" href="/assets/js/38.af75b5f5.js"><link rel="prefetch" href="/assets/js/39.738a17c2.js"><link rel="prefetch" href="/assets/js/4.7a28610d.js"><link rel="prefetch" href="/assets/js/40.a3ef64af.js"><link rel="prefetch" href="/assets/js/41.c3ebcab0.js"><link rel="prefetch" href="/assets/js/42.1095f39d.js"><link rel="prefetch" href="/assets/js/43.87c73010.js"><link rel="prefetch" href="/assets/js/44.e9957c44.js"><link rel="prefetch" href="/assets/js/45.dd60d2f1.js"><link rel="prefetch" href="/assets/js/46.2513d0d4.js"><link rel="prefetch" href="/assets/js/47.2359db59.js"><link rel="prefetch" href="/assets/js/48.d26dc923.js"><link rel="prefetch" href="/assets/js/49.98b824b3.js"><link rel="prefetch" href="/assets/js/5.a3af58c6.js"><link rel="prefetch" href="/assets/js/50.10c51e26.js"><link rel="prefetch" href="/assets/js/51.bd1d1add.js"><link rel="prefetch" href="/assets/js/52.3ee029b7.js"><link rel="prefetch" href="/assets/js/53.1a6f6e37.js"><link rel="prefetch" href="/assets/js/54.99dad80e.js"><link rel="prefetch" href="/assets/js/55.a4c26593.js"><link rel="prefetch" href="/assets/js/56.14ec8ec8.js"><link rel="prefetch" href="/assets/js/57.35d908a9.js"><link rel="prefetch" href="/assets/js/58.772c2865.js"><link rel="prefetch" href="/assets/js/59.4dc7bf57.js"><link rel="prefetch" href="/assets/js/6.5e0b6357.js"><link rel="prefetch" href="/assets/js/60.b434716e.js"><link rel="prefetch" href="/assets/js/61.085e72bf.js"><link rel="prefetch" href="/assets/js/62.1dd010ac.js"><link rel="prefetch" href="/assets/js/63.341e5c7e.js"><link rel="prefetch" href="/assets/js/64.d9b74fab.js"><link rel="prefetch" href="/assets/js/65.dedea91e.js"><link rel="prefetch" href="/assets/js/66.6e96603e.js"><link rel="prefetch" href="/assets/js/67.d050f718.js"><link rel="prefetch" href="/assets/js/68.a2ab7a93.js"><link rel="prefetch" href="/assets/js/69.e6ad8dbd.js"><link rel="prefetch" href="/assets/js/7.485d4a5f.js"><link rel="prefetch" href="/assets/js/70.a486949d.js"><link rel="prefetch" href="/assets/js/71.b3f56e8a.js"><link rel="prefetch" href="/assets/js/72.2acace94.js"><link rel="prefetch" href="/assets/js/73.e2465a49.js"><link rel="prefetch" href="/assets/js/74.0e69c707.js"><link rel="prefetch" href="/assets/js/75.6d43f5df.js"><link rel="prefetch" href="/assets/js/76.b38d3c37.js"><link rel="prefetch" href="/assets/js/77.1890cf08.js"><link rel="prefetch" href="/assets/js/78.66c86709.js"><link rel="prefetch" href="/assets/js/79.5def94b2.js"><link rel="prefetch" href="/assets/js/80.91063aea.js"><link rel="prefetch" href="/assets/js/81.8e6f5b4e.js"><link rel="prefetch" href="/assets/js/82.f2de8c8e.js"><link rel="prefetch" href="/assets/js/83.e8142c48.js"><link rel="prefetch" href="/assets/js/84.04af1a51.js"><link rel="prefetch" href="/assets/js/85.ad6c02b5.js"><link rel="prefetch" href="/assets/js/86.5da78155.js"><link rel="prefetch" href="/assets/js/87.ae46d389.js"><link rel="prefetch" href="/assets/js/88.acbcea9b.js"><link rel="prefetch" href="/assets/js/89.84a4e947.js"><link rel="prefetch" href="/assets/js/90.546bc002.js"><link rel="prefetch" href="/assets/js/91.d87a97b7.js"><link rel="prefetch" href="/assets/js/92.1863ea01.js"><link rel="prefetch" href="/assets/js/93.e99da82e.js"><link rel="prefetch" href="/assets/js/94.62bdca5c.js"><link rel="prefetch" href="/assets/js/95.57c64366.js"><link rel="prefetch" href="/assets/js/96.8ea364f9.js"><link rel="prefetch" href="/assets/js/97.eb933c76.js"><link rel="prefetch" href="/assets/js/98.23bf275b.js"><link rel="prefetch" href="/assets/js/99.28e190b3.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.c6e69708.js">
    <link rel="stylesheet" href="/assets/css/0.styles.5fd99a46.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt="神族九帝's blog" class="logo"> <span class="site-name can-hide">神族九帝's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="导航" class="dropdown-title"><!----> <span class="title" style="display:;">导航</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.kdocs.cn/l/cu04FUTRCy3V" target="_blank" rel="noopener noreferrer" class="nav-link external">
  神卡套餐
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://shenzjd.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  神族九帝
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://alist.shenzjd.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  网盘资源
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://news.shenzjd.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  今日热点
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://ps.shenzjd.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  在线PS
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://it-tools.shenzjd.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  IT工具
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://fc.shenzjd.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  FC游戏
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://wallpaper.shenzjd.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  在线壁纸
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面试题" class="dropdown-title"><!----> <span class="title" style="display:;">面试题</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/d4fd303b96708/" class="nav-link">面试突击</a></li><li class="dropdown-item"><!----> <a href="/pages/92a3d01d007d4/" class="nav-link">复习指导</a></li><li class="dropdown-item"><!----> <a href="/pages/41925dd005aac/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/pages/b7bfe8372b67a/" class="nav-link">CSS</a></li><li class="dropdown-item"><!----> <a href="/pages/873bcbd19d49b/" class="nav-link">JavaScript</a></li><li class="dropdown-item"><!----> <a href="/pages/d35a839d5b4b6/" class="nav-link">设计模式</a></li><li class="dropdown-item"><!----> <a href="/pages/62502f3dd8041/" class="nav-link">浏览器</a></li><li class="dropdown-item"><!----> <a href="/pages/462a20be0048a/" class="nav-link">手写系列</a></li><li class="dropdown-item"><!----> <a href="/pages/7860f2c6dd001/" class="nav-link">Vue</a></li><li class="dropdown-item"><!----> <a href="/pages/b9014c6cc5abc/" class="nav-link">Webpack</a></li><li class="dropdown-item"><!----> <a href="/pages/5ff5a12bd4bd2/" class="nav-link">Http</a></li><li class="dropdown-item"><!----> <a href="/pages/274217c7c2876/" class="nav-link">前端优化</a></li><li class="dropdown-item"><!----> <a href="/pages/318726d3f6062/" class="nav-link">项目</a></li><li class="dropdown-item"><!----> <a href="/pages/0d28ab62c07b1/" class="nav-link">面试真题</a></li><li class="dropdown-item"><!----> <a href="/pages/9eaae444f0d5b/" class="nav-link">算法</a></li><li class="dropdown-item"><!----> <a href="/pages/96c5de658a426/" class="nav-link">精选文章</a></li><li class="dropdown-item"><!----> <a href="/pages/11309122e2911/" class="nav-link">八股文</a></li><li class="dropdown-item"><!----> <a href="/pages/294378a3e4f4/" class="nav-link">前端工程化</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="笔记" class="dropdown-title"><!----> <span class="title" style="display:;">笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/b7de4855154b1/" class="nav-link">工作笔记</a></li><li class="dropdown-item"><!----> <a href="/pages/664ab7712895e/" class="nav-link">前端基础建设与架构 30 讲</a></li><li class="dropdown-item"><!----> <a href="/pages/de5e42d9aade5/" class="nav-link">vue2源码学习</a></li><li class="dropdown-item"><!----> <a href="/pages/9a973ad8de378/" class="nav-link">剖析vuejs内部运行机制</a></li><li class="dropdown-item"><!----> <a href="/pages/7b9593fc1d246/" class="nav-link">TypeScript 入门实战笔记</a></li><li class="dropdown-item"><!----> <a href="/pages/1b26a2a3224ed/" class="nav-link">vue3源码学习</a></li><li class="dropdown-item"><!----> <a href="/pages/6840ffe53b64e/" class="nav-link">2周刷完100道前端优质面试真题</a></li><li class="dropdown-item"><!----> <a href="/pages/b2402e45f8434/" class="nav-link">思维导图</a></li><li class="dropdown-item"><!----> <a href="/pages/df8208be80149/" class="nav-link">npm发包</a></li><li class="dropdown-item"><!----> <a href="/pages/9d3cce63f5b1f/" class="nav-link">重学node</a></li><li class="dropdown-item"><!----> <a href="/pages/82d13321f862e/" class="nav-link">前端性能优化方法与实战</a></li><li class="dropdown-item"><!----> <a href="/pages/70523322e3de7/" class="nav-link">webpack原理与实战</a></li><li class="dropdown-item"><!----> <a href="/pages/201ade54239a8/" class="nav-link">webGl</a></li><li class="dropdown-item"><!----> <a href="/pages/493b3e94e222f/" class="nav-link">前端优化</a></li><li class="dropdown-item"><!----> <a href="/pages/9215dd598cf2f/" class="nav-link">Web3</a></li><li class="dropdown-item"><!----> <a href="/pages/b360d8fb74ce7/" class="nav-link">React</a></li><li class="dropdown-item"><!----> <a href="/pages/654a66a46648a/" class="nav-link">更多</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="服务器" class="dropdown-title"><!----> <span class="title" style="display:;">服务器</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/559a89ed185a/" class="nav-link">未来要做的事</a></li><li class="dropdown-item"><!----> <a href="/pages/3643ef45ec2df/" class="nav-link">Stirling-PDF</a></li><li class="dropdown-item"><!----> <a href="/pages/84b570b268311/" class="nav-link">ComfyUI</a></li><li class="dropdown-item"><!----> <a href="/pages/266a6e0607e5b/" class="nav-link">富强</a></li><li class="dropdown-item"><!----> <a href="/pages/48f2f48705e84/" class="nav-link">宝塔面板+青龙面板</a></li><li class="dropdown-item"><!----> <a href="/pages/fd345053693da/" class="nav-link">安卓手机当服务器使用</a></li><li class="dropdown-item"><!----> <a href="/pages/fabb9a071e3ab/" class="nav-link">京东自动评价代码</a></li><li class="dropdown-item"><!----> <a href="/pages/4e2e100aa5bc3/" class="nav-link">搭建x-ui免流服务器(已失效)</a></li><li class="dropdown-item"><!----> <a href="/pages/1ec52a9aef382/" class="nav-link">海外联盟</a></li><li class="dropdown-item"><!----> <a href="/pages/4f8522f268cc3/" class="nav-link">好玩的docker</a></li><li class="dropdown-item"><!----> <a href="/pages/beb6c0bd8a66cea6/" class="nav-link">收藏夹</a></li><li class="dropdown-item"><!----> <a href="/pages/f9ef4c6a6f4e/" class="nav-link">更多</a></li></ul></div></div> <a href="https://github.com/wu529778790/wu529778790.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="/img/logo.png"> <div class="blogger-info"><h3>神族九帝,永不言弃</h3> <span></span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="导航" class="dropdown-title"><!----> <span class="title" style="display:;">导航</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.kdocs.cn/l/cu04FUTRCy3V" target="_blank" rel="noopener noreferrer" class="nav-link external">
  神卡套餐
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://shenzjd.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  神族九帝
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://alist.shenzjd.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  网盘资源
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://news.shenzjd.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  今日热点
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://ps.shenzjd.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  在线PS
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://it-tools.shenzjd.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  IT工具
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://fc.shenzjd.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  FC游戏
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://wallpaper.shenzjd.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  在线壁纸
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面试题" class="dropdown-title"><!----> <span class="title" style="display:;">面试题</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/d4fd303b96708/" class="nav-link">面试突击</a></li><li class="dropdown-item"><!----> <a href="/pages/92a3d01d007d4/" class="nav-link">复习指导</a></li><li class="dropdown-item"><!----> <a href="/pages/41925dd005aac/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/pages/b7bfe8372b67a/" class="nav-link">CSS</a></li><li class="dropdown-item"><!----> <a href="/pages/873bcbd19d49b/" class="nav-link">JavaScript</a></li><li class="dropdown-item"><!----> <a href="/pages/d35a839d5b4b6/" class="nav-link">设计模式</a></li><li class="dropdown-item"><!----> <a href="/pages/62502f3dd8041/" class="nav-link">浏览器</a></li><li class="dropdown-item"><!----> <a href="/pages/462a20be0048a/" class="nav-link">手写系列</a></li><li class="dropdown-item"><!----> <a href="/pages/7860f2c6dd001/" class="nav-link">Vue</a></li><li class="dropdown-item"><!----> <a href="/pages/b9014c6cc5abc/" class="nav-link">Webpack</a></li><li class="dropdown-item"><!----> <a href="/pages/5ff5a12bd4bd2/" class="nav-link">Http</a></li><li class="dropdown-item"><!----> <a href="/pages/274217c7c2876/" class="nav-link">前端优化</a></li><li class="dropdown-item"><!----> <a href="/pages/318726d3f6062/" class="nav-link">项目</a></li><li class="dropdown-item"><!----> <a href="/pages/0d28ab62c07b1/" class="nav-link">面试真题</a></li><li class="dropdown-item"><!----> <a href="/pages/9eaae444f0d5b/" class="nav-link">算法</a></li><li class="dropdown-item"><!----> <a href="/pages/96c5de658a426/" class="nav-link">精选文章</a></li><li class="dropdown-item"><!----> <a href="/pages/11309122e2911/" class="nav-link">八股文</a></li><li class="dropdown-item"><!----> <a href="/pages/294378a3e4f4/" class="nav-link">前端工程化</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="笔记" class="dropdown-title"><!----> <span class="title" style="display:;">笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/b7de4855154b1/" class="nav-link">工作笔记</a></li><li class="dropdown-item"><!----> <a href="/pages/664ab7712895e/" class="nav-link">前端基础建设与架构 30 讲</a></li><li class="dropdown-item"><!----> <a href="/pages/de5e42d9aade5/" class="nav-link">vue2源码学习</a></li><li class="dropdown-item"><!----> <a href="/pages/9a973ad8de378/" class="nav-link">剖析vuejs内部运行机制</a></li><li class="dropdown-item"><!----> <a href="/pages/7b9593fc1d246/" class="nav-link">TypeScript 入门实战笔记</a></li><li class="dropdown-item"><!----> <a href="/pages/1b26a2a3224ed/" class="nav-link">vue3源码学习</a></li><li class="dropdown-item"><!----> <a href="/pages/6840ffe53b64e/" class="nav-link">2周刷完100道前端优质面试真题</a></li><li class="dropdown-item"><!----> <a href="/pages/b2402e45f8434/" class="nav-link">思维导图</a></li><li class="dropdown-item"><!----> <a href="/pages/df8208be80149/" class="nav-link">npm发包</a></li><li class="dropdown-item"><!----> <a href="/pages/9d3cce63f5b1f/" class="nav-link">重学node</a></li><li class="dropdown-item"><!----> <a href="/pages/82d13321f862e/" class="nav-link">前端性能优化方法与实战</a></li><li class="dropdown-item"><!----> <a href="/pages/70523322e3de7/" class="nav-link">webpack原理与实战</a></li><li class="dropdown-item"><!----> <a href="/pages/201ade54239a8/" class="nav-link">webGl</a></li><li class="dropdown-item"><!----> <a href="/pages/493b3e94e222f/" class="nav-link">前端优化</a></li><li class="dropdown-item"><!----> <a href="/pages/9215dd598cf2f/" class="nav-link">Web3</a></li><li class="dropdown-item"><!----> <a href="/pages/b360d8fb74ce7/" class="nav-link">React</a></li><li class="dropdown-item"><!----> <a href="/pages/654a66a46648a/" class="nav-link">更多</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="服务器" class="dropdown-title"><!----> <span class="title" style="display:;">服务器</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/559a89ed185a/" class="nav-link">未来要做的事</a></li><li class="dropdown-item"><!----> <a href="/pages/3643ef45ec2df/" class="nav-link">Stirling-PDF</a></li><li class="dropdown-item"><!----> <a href="/pages/84b570b268311/" class="nav-link">ComfyUI</a></li><li class="dropdown-item"><!----> <a href="/pages/266a6e0607e5b/" class="nav-link">富强</a></li><li class="dropdown-item"><!----> <a href="/pages/48f2f48705e84/" class="nav-link">宝塔面板+青龙面板</a></li><li class="dropdown-item"><!----> <a href="/pages/fd345053693da/" class="nav-link">安卓手机当服务器使用</a></li><li class="dropdown-item"><!----> <a href="/pages/fabb9a071e3ab/" class="nav-link">京东自动评价代码</a></li><li class="dropdown-item"><!----> <a href="/pages/4e2e100aa5bc3/" class="nav-link">搭建x-ui免流服务器(已失效)</a></li><li class="dropdown-item"><!----> <a href="/pages/1ec52a9aef382/" class="nav-link">海外联盟</a></li><li class="dropdown-item"><!----> <a href="/pages/4f8522f268cc3/" class="nav-link">好玩的docker</a></li><li class="dropdown-item"><!----> <a href="/pages/beb6c0bd8a66cea6/" class="nav-link">收藏夹</a></li><li class="dropdown-item"><!----> <a href="/pages/f9ef4c6a6f4e/" class="nav-link">更多</a></li></ul></div></div> <a href="https://github.com/wu529778790/wu529778790.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>工作笔记</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>前端基础建设与架构 30 讲</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/664ab7712895e/" class="sidebar-link">开篇词  像架构师一样思考，突破技术成长瓶颈</a></li><li><a href="/pages/49cd9ababc9a1/" class="sidebar-link">npm 安装机制及企业级部署私服原理</a></li><li><a href="/pages/09fbf8a1156b8/" class="sidebar-link">Yarn 的安装理念及如何破解依赖管理困境</a></li><li><a href="/pages/10f2ebc91b73c/" class="sidebar-link">CI 环境上的 npm 优化及更多工程化问题解析</a></li><li><a href="/pages/245300f457539/" class="sidebar-link">横向对比主流构建工具，了解构建工具的设计考量</a></li><li><a href="/pages/a094da54e65f/" class="sidebar-link">Vite 实现：从源码分析出发，构建 bundlele 开发工程</a></li><li><a href="/pages/3bbfdc8e7cf4/" class="sidebar-link">core-j 及垫片理念：设计一个“最完美”的 Polyfill 方案</a></li><li><a href="/pages/a0e586d6898f9/" class="sidebar-link">梳理混乱的 Babel，不再被编译报错困扰</a></li><li><a href="/pages/3caede772e761/" class="sidebar-link">探索前端工具链生态，制定一个统一标准化 babel-preet</a></li><li><a href="/pages/4dbb987bcfc5f/" class="sidebar-link">从实战出发，从 0 到 1 构建一个符合标准的公共库</a></li><li><a href="/pages/7f9d7786e6aa1/" class="sidebar-link">代码拆分和按需加载：缩减 bundle ize，把性能做到极致</a></li><li><a href="/pages/d7a25227c33fc/" class="sidebar-link">Tree Shaking：移除 JavaScript 上下文中的未引用代码</a></li><li><a href="/pages/d0d381c1e284e/" class="sidebar-link">如何理解 AST 实现和编译原理？</a></li><li><a href="/pages/773169c96a412/" class="sidebar-link">工程化思维处理方案：如何实现应用主题切换功能？</a></li><li><a href="/pages/943231620daa3/" class="sidebar-link">解析 Webpack 源码，实现自己的构建工具</a></li><li><a href="/pages/12102b0892053/" class="sidebar-link">从编译到运行，跨端解析小程序多端方案</a></li><li><a href="/pages/22b509db57f1a/" class="sidebar-link">原生跨平台技术：移动端跨平台到 Flutter 的技术变革</a></li><li><a href="/pages/20b426615a1c8/" class="sidebar-link">学习 axio：封装一个结构清晰的 Fetch 库</a></li><li><a href="/pages/3c41f5dcb7811/" class="sidebar-link">对比 Koa 和 Redux：分析前端中的中间件理念</a></li><li><a href="/pages/328eaba5cae39/" class="sidebar-link">如何理解软件开发灵活性和高定制性？</a></li><li><a href="/pages/8df5b32829fc9/" class="sidebar-link">如何理解前端中面向对象的思想？</a></li><li><a href="/pages/55d7058b01d3d/" class="sidebar-link">如何利用 JavaScript 实现经典数据结构？</a></li><li><a href="/pages/073be8a8552d5/" class="sidebar-link">剖析前端中的数据结构应用场景</a></li><li><a href="/pages/8fad03ebb05b2/" class="sidebar-link">npm cript：打造一体化的构建和部署流程</a></li><li><a href="/pages/d07bdbfe6f9ce/" class="sidebar-link">自动化代码检查：剖析 Lint 工具和工程化接入&amp;优化方案</a></li><li><a href="/pages/378f678a7284b/" class="sidebar-link">如何设计一个前端 + 移动端离线包方案？</a></li><li><a href="/pages/c4145a056135d/" aria-current="page" class="active sidebar-link">如何设计一个“万能”项目脚手架？</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/pages/c78977462af88/" class="sidebar-link">同构渲染架构：实现一个 SSR 应用</a></li><li><a href="/pages/6287d534540ad/" class="sidebar-link">设计性能守卫系统：完善 CICD 流程</a></li><li><a href="/pages/5418c92e818e/" class="sidebar-link">实践打造网关：改造企业 BFF 方案</a></li><li><a href="/pages/eeb2a33385edd/" class="sidebar-link">实现高可用：使用 Puppeteer 生成性能最优的海报系统</a></li><li><a href="/pages/b559221c07262/" class="sidebar-link">结束语  再谈项目的基建和架构，个人的价值和方向</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>vue2源码学习</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>剖析vuejs内部运行机制</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>TypeScript 入门实战笔记</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>vue3源码学习</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>2周刷完100道前端优质面试真题</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>思维导图</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>npm发包</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>重学node</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端性能优化方法与实战</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>webpack原理与实战</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>webGl</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端优化</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Web3</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>React</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>更多</span> <span class="arrow right"></span></p> <!----></section></li></ul> <div class="sidebar-slot sidebar-slot-bottom"><!-- 正方形 -->
      <ins class="adsbygoogle"
          style="display:block"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="3508773082"
          data-ad-format="auto"
          data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div></aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-071ed482><div class="articleInfo" data-v-071ed482><ul class="breadcrumbs" data-v-071ed482><li data-v-071ed482><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-071ed482></a></li> <li data-v-071ed482><a href="/categories/?category=%E7%AC%94%E8%AE%B0" title="分类" data-v-071ed482>笔记</a></li> <li data-v-071ed482><a href="/categories/?category=%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E5%BB%BA%E8%AE%BE%E4%B8%8E%E6%9E%B6%E6%9E%84%2030%20%E8%AE%B2" title="分类" data-v-071ed482>前端基础建设与架构 30 讲</a></li> <!----></ul> <div class="info" data-v-071ed482><div title="作者" class="author iconfont icon-touxiang" data-v-071ed482><a href="https://shenzjd.com" target="_blank" title="作者" class="beLink" data-v-071ed482>wu529778790</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-071ed482><a href="javascript:;" data-v-071ed482>2024-04-07</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">
          如何设计一个“万能”项目脚手架？
        </h1> <div class="page-slot page-slot-top"><!-- 固定100% * 90px可显示，max-height:90px未见显示-->
     <ins class="adsbygoogle"
          style="display:inline-block;width:100%;max-height:90px"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="6625304284"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div> <div class="theme-vdoing-content content__default"><p data-nodeid="1605">脚手架是工程化中不可缺少的一环。究竟什么是脚手架呢？广义上来说，脚手架就是为了保证各施工过程顺利进行而搭设的工作平台。</p> <p data-nodeid="1606">编程领域的脚手架主要为了完成新项目的启动和搭建，能够帮助开发者提升效率和开发体验。对于前端来说，从零开始建立一个项目是复杂的，因此也就存在了较多类型的脚手架：</p> <ul data-nodeid="1607"><li data-nodeid="1608"><p data-nodeid="1609">Vue/React 框架类脚手架</p></li> <li data-nodeid="1610"><p data-nodeid="1611">Webpack 等构建配置类脚手架</p></li> <li data-nodeid="1612"><p data-nodeid="1613">混合脚手架，比如大家熟悉的 Vue-cli 或者 create-react-app</p></li></ul> <p data-nodeid="1614">这一讲我们就深入这些脚手架的原理进行讲解。</p> <h3 data-nodeid="1615">命令行工具原理和实现</h3> <p data-nodeid="6062" class="te-preview-highlight">现代脚手架离不开命令行工具，命令行工具即 Command-line interfaces（CLIs） ，是编程领域的重要概念，也是我们开发中经常接触到的工具之一。</p> <p data-nodeid="1617">比如 Webpack、Babel、npm、Yarn 等都是典型的命令行。此外，流畅的命令行能够迅速启动一个脚手架，实现<strong data-nodeid="1743">自动化和智能化</strong>流程。这一部分，我们就使用 Node.js 来开发一个命令行。</p> <p data-nodeid="1618">我们先来看几个开发命令行工具的关键依赖。</p> <ul data-nodeid="1619"><li data-nodeid="1620"><p data-nodeid="1621"><a href="http://npm.im/inquirer" data-nodeid="1747"><code data-backticks="1" data-nodeid="1746">inquirer</code></a>、<a href="http://npm.im/enquirer" data-nodeid="1751"><code data-backticks="1" data-nodeid="1750">enquirer</code></a>、<a href="https://npm.im/prompts" data-nodeid="1755"><code data-backticks="1" data-nodeid="1754">prompts</code></a>：可以处理复杂的用户输入，完成命令行输入交互。</p></li> <li data-nodeid="1622"><p data-nodeid="1623"><a href="http://npm.im/chalk" data-nodeid="1759"><code data-backticks="1" data-nodeid="1758">chalk</code></a>、<a href="https://npm.im/kleur" data-nodeid="1763"><code data-backticks="1" data-nodeid="1762">kleur</code></a>：使终端可以输出彩色信息文案。</p></li> <li data-nodeid="1624"><p data-nodeid="1625"><a href="http://npm.im/ora" data-nodeid="1767"><code data-backticks="1" data-nodeid="1766">ora</code></a>：可以让命令行出现好看的 Spinners。</p></li> <li data-nodeid="1626"><p data-nodeid="1627"><a href="http://npm.im/boxen" data-nodeid="1771"><code data-backticks="1" data-nodeid="1770">boxen</code></a>：可以在命令行中画出 Boxes 区块。</p></li> <li data-nodeid="1628"><p data-nodeid="1629"><a href="http://npm.im/listr" data-nodeid="1775"><code data-backticks="1" data-nodeid="1774">listr</code></a>：可以在命令行中画出进度列表。</p></li> <li data-nodeid="1630"><p data-nodeid="1631"><a href="http://npm.im/meow" data-nodeid="1779"><code data-backticks="1" data-nodeid="1778">meow</code></a>、<a href="http://npm.im/arg" data-nodeid="1783"><code data-backticks="1" data-nodeid="1782">arg</code></a>：可以进行基础的命令行参数解析。</p></li> <li data-nodeid="1632"><p data-nodeid="1633"><a href="http://npm.im/commander" data-nodeid="1787"><code data-backticks="1" data-nodeid="1786">commander</code></a>、<a href="https://www.npmjs.com/package/yargs" data-nodeid="1791"><code data-backticks="1" data-nodeid="1790">yargs</code></a>：可以进行更加复杂的命令行参数解析。</p></li></ul> <p data-nodeid="1634">我们的目标是支持以下面这种启动方式，建立我们的项目，如下代码：</p> <pre data-nodeid="1635" class="lang-java"><code data-language="java">npm init <span class="hljs-meta">@lucas</span>/project
</code></pre> <p data-nodeid="1636">npm 6.1 及以上版本，我们都可以使用<code data-backticks="1" data-nodeid="1795">npm init</code>或<code data-backticks="1" data-nodeid="1797">yarn create</code>来启动我们的项目，比如下面两个命令就是等价的：</p> <pre data-nodeid="1637" class="lang-java"><code data-language="java"># 使用 Node.js
npm init @lucas/project
# 使用 Yarn
yarn create @lucas/project
</code></pre> <h4 data-nodeid="1638">启动命令行项目</h4> <p data-nodeid="1639">下面开始进入开发，首先我们创建项目：</p> <pre data-nodeid="1640" class="lang-java"><code data-language="java">mkdir create-project &amp;&amp; cd create-project
npm init --yes
</code></pre> <p data-nodeid="1641">接着进入<code data-backticks="1" data-nodeid="1802">create-project</code>文件中，创建<code data-backticks="1" data-nodeid="1804">src</code>目录及<code data-backticks="1" data-nodeid="1806">src/cli.js</code>文件，<code data-backticks="1" data-nodeid="1808">cli.js</code>文件内容如下：</p> <pre data-nodeid="1642" class="lang-java"><code data-language="java"><span class="hljs-function">export function <span class="hljs-title">cli</span><span class="hljs-params">(args)</span> </span>{
 console.log(args);
}
</code></pre> <p data-nodeid="1643">接下来，为了使我们的命令行可以在终端执行，我们新建<code data-backticks="1" data-nodeid="1811">bin/</code>目录，并在其下创建一个<code data-backticks="1" data-nodeid="1813">create-project</code>文件，代码为：</p> <pre data-nodeid="1644" class="lang-java"><code data-language="java">#!/usr/bin/env node
require = require('esm')(module /*, options*/);
require('../src/cli').cli(process.argv);
</code></pre> <p data-nodeid="1645">上述代码中，我们使用了<a href="https://www.npmjs.com/package/esm" data-nodeid="1819"><code data-backticks="1" data-nodeid="1817">esm</code></a> 模块，这样就可以在其他文件中使用<code data-backticks="1" data-nodeid="1821">import</code>关键字，即 ESM 模块规范了。我们在该入口文件中，引入<code data-backticks="1" data-nodeid="1823">cli.js</code>并将命令行参数<a href="https://nodejs.org/api/process.html#process_process_argv" data-nodeid="1827"><code data-backticks="1" data-nodeid="1826">process.argv</code></a>传给<code data-backticks="1" data-nodeid="1829">cli</code>函数执行。</p> <p data-nodeid="1646">当然，为了能够正常使用<a href="https://www.npmjs.com/package/esm" data-nodeid="1835"><code data-backticks="1" data-nodeid="1833">esm</code></a> 模块，我们需要先安装，执行<code data-backticks="1" data-nodeid="1837">npm install esm</code>。</p> <p data-nodeid="1647">此时 package.json 内容如下：</p> <pre data-nodeid="1648" class="lang-java"><code data-language="java">{
 <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;@lucas/create-project&quot;</span>,
 <span class="hljs-string">&quot;version&quot;</span>: <span class="hljs-string">&quot;1.0.0&quot;</span>,
 <span class="hljs-string">&quot;description&quot;</span>: <span class="hljs-string">&quot;A CLI to bootstrap my new projects&quot;</span>,
 <span class="hljs-string">&quot;main&quot;</span>: <span class="hljs-string">&quot;src/index.js&quot;</span>,
 <span class="hljs-string">&quot;bin&quot;</span>: {
   <span class="hljs-string">&quot;@lucas/create-project&quot;</span>: <span class="hljs-string">&quot;bin/create-project&quot;</span>,
   <span class="hljs-string">&quot;create-project&quot;</span>: <span class="hljs-string">&quot;bin/create-project&quot;</span>
 },
 <span class="hljs-string">&quot;publishConfig&quot;</span>: {
   <span class="hljs-string">&quot;access&quot;</span>: <span class="hljs-string">&quot;public&quot;</span>
 },
 <span class="hljs-string">&quot;scripts&quot;</span>: {
   <span class="hljs-string">&quot;test&quot;</span>: <span class="hljs-string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span>
 },
 <span class="hljs-string">&quot;keywords&quot;</span>: [
   <span class="hljs-string">&quot;cli&quot;</span>,
   <span class="hljs-string">&quot;create-project&quot;</span>
 ],
 <span class="hljs-string">&quot;author&quot;</span>: <span class="hljs-string">&quot;YOUR_AUTHOR&quot;</span>,
 <span class="hljs-string">&quot;license&quot;</span>: <span class="hljs-string">&quot;MIT&quot;</span>,
 <span class="hljs-string">&quot;dependencies&quot;</span>: {
   <span class="hljs-string">&quot;esm&quot;</span>: <span class="hljs-string">&quot;^3.2.18&quot;</span>
 }
}
</code></pre> <p data-nodeid="1649">这里需要注意的是 <code data-backticks="1" data-nodeid="1841">bin</code>字段，我们注册了两个可用命令：一个是带有 npm 命名 scope 的，一个是常规的<code data-backticks="1" data-nodeid="1843">create-project</code>命令。</p> <p data-nodeid="1650">为了调试方便，我们使用<a href="https://docs.npmjs.com/cli/link.html" data-nodeid="1848"><code data-backticks="1" data-nodeid="1847">npm link</code></a>命令进行调试，在终端中项目目录下执行：</p> <pre data-nodeid="1651" class="lang-java"><code data-language="java">npm link
</code></pre> <p data-nodeid="1652">上述命令可以在全局范围内添加一个软链到当前项目中。我们执行：</p> <pre data-nodeid="1653" class="lang-java"><code data-language="java">create-project --yes
</code></pre> <p data-nodeid="1654">就会得到下面这样的输出：</p> <pre data-nodeid="1655" class="lang-java"><code data-language="java">[ <span class="hljs-string">'/usr/local/Cellar/node/11.6.0/bin/node'</span>,
  <span class="hljs-string">'/Users/dkundel/dev/create-project/bin/create-project'</span>,
  <span class="hljs-string">'--yes'</span> ]
</code></pre> <p data-nodeid="1656">该输出，就对应了代码中的<a href="https://nodejs.org/api/process.html#process_process_argv" data-nodeid="1855"><code data-backticks="1" data-nodeid="1854">process.argv</code></a>。</p> <h4 data-nodeid="1657">解析处理命令行输入</h4> <p data-nodeid="1658">在解析处理命令行输入之前，我们需要设计命令行支持的几个选项，如下。</p> <ul data-nodeid="1659"><li data-nodeid="1660"><p data-nodeid="1661"><code data-backticks="1" data-nodeid="1859">[template]</code>：支持默认的几种模板类型，用户可以通过 select 进行选择。</p></li> <li data-nodeid="1662"><p data-nodeid="1663"><code data-backticks="1" data-nodeid="1861">--git</code>：等同于<code data-backticks="1" data-nodeid="1863">git init</code>去创建一个新的 Git 项目。</p></li> <li data-nodeid="1664"><p data-nodeid="1665"><code data-backticks="1" data-nodeid="1865">--install</code>：支持自动下载项目依赖。</p></li> <li data-nodeid="1666"><p data-nodeid="1667"><code data-backticks="1" data-nodeid="1867">--yes</code>：跳过命令行交互，直接使用默认配置。</p></li></ul> <p data-nodeid="1668">我们利用<code data-backticks="1" data-nodeid="1870">inquirer</code>使得命令行支持用户交互，同时使用<code data-backticks="1" data-nodeid="1872">arg</code>来解析命令行参数，安装相关依赖命令：</p> <pre data-nodeid="1669" class="lang-java"><code data-language="java">npm install inquirer arg
</code></pre> <p data-nodeid="1670">接下来编写命令行参数解析逻辑，在<code data-backticks="1" data-nodeid="1875">cli.js</code>中添加：</p> <pre data-nodeid="1671" class="lang-java"><code data-language="java"><span class="hljs-keyword">import</span> arg from <span class="hljs-string">'arg'</span>;
<span class="hljs-comment">// 解析命令行参数为 options</span>
<span class="hljs-function">function <span class="hljs-title">parseArgumentsIntoOptions</span><span class="hljs-params">(rawArgs)</span> </span>{
 <span class="hljs-comment">// 使用 arg 进行解析</span>
 <span class="hljs-keyword">const</span> args = arg(
   {
     <span class="hljs-string">'--git'</span>: Boolean,
     <span class="hljs-string">'--yes'</span>: Boolean,
     <span class="hljs-string">'--install'</span>: Boolean,
     <span class="hljs-string">'-g'</span>: <span class="hljs-string">'--git'</span>,
     <span class="hljs-string">'-y'</span>: <span class="hljs-string">'--yes'</span>,
     <span class="hljs-string">'-i'</span>: <span class="hljs-string">'--install'</span>,
   },
   {
     argv: rawArgs.slice(<span class="hljs-number">2</span>),
   }
 );
 <span class="hljs-keyword">return</span> {
   skipPrompts: args[<span class="hljs-string">'--yes'</span>] || <span class="hljs-keyword">false</span>,
   git: args[<span class="hljs-string">'--git'</span>] || <span class="hljs-keyword">false</span>,
   template: args._[<span class="hljs-number">0</span>],
   runInstall: args[<span class="hljs-string">'--install'</span>] || <span class="hljs-keyword">false</span>,
 }
}
<span class="hljs-function">export function <span class="hljs-title">cli</span><span class="hljs-params">(args)</span> </span>{
 <span class="hljs-comment">// 获取命令行配置</span>
 let options = parseArgumentsIntoOptions(args);
 console.log(options);
}
</code></pre> <p data-nodeid="1672">上述代码很好理解，我已经加入了相关注释。接下来，我们实现使用默认配置和交互式配置选择逻辑，如下代码：</p> <pre data-nodeid="1673" class="lang-java"><code data-language="java"><span class="hljs-keyword">import</span> arg from <span class="hljs-string">'arg'</span>;
<span class="hljs-keyword">import</span> inquirer from <span class="hljs-string">'inquirer'</span>;
<span class="hljs-function">function <span class="hljs-title">parseArgumentsIntoOptions</span><span class="hljs-params">(rawArgs)</span> </span>{
 <span class="hljs-comment">// ...</span>
}
<span class="hljs-function">async function <span class="hljs-title">promptForMissingOptions</span><span class="hljs-params">(options)</span> </span>{
 <span class="hljs-comment">// 默认使用名为 JavaScript 的模板</span>
 <span class="hljs-keyword">const</span> defaultTemplate = <span class="hljs-string">'JavaScript'</span>;
 <span class="hljs-comment">// 使用默认模板则直接返回</span>
 <span class="hljs-keyword">if</span> (options.skipPrompts) {
   <span class="hljs-keyword">return</span> {
     ...options,
     template: options.template || defaultTemplate,
   };
 }
 <span class="hljs-comment">// 准备交互式问题 </span>
 <span class="hljs-keyword">const</span> questions = [];
 <span class="hljs-keyword">if</span> (!options.template) {
   questions.push({
     type: <span class="hljs-string">'list'</span>,
     name: <span class="hljs-string">'template'</span>,
     message: <span class="hljs-string">'Please choose which project template to use'</span>,
     choices: [<span class="hljs-string">'JavaScript'</span>, <span class="hljs-string">'TypeScript'</span>],
     <span class="hljs-keyword">default</span>: defaultTemplate,
   });
 }
 <span class="hljs-keyword">if</span> (!options.git) {
   questions.push({
     type: <span class="hljs-string">'confirm'</span>,
     name: <span class="hljs-string">'git'</span>,
     message: <span class="hljs-string">'Initialize a git repository?'</span>,
     <span class="hljs-keyword">default</span>: <span class="hljs-keyword">false</span>,
   });
 }
 <span class="hljs-comment">// 使用 inquirer 进行交互式查询，并获取用户答案选项</span>
 <span class="hljs-keyword">const</span> answers = await inquirer.prompt(questions);
 <span class="hljs-keyword">return</span> {
   ...options,
   template: options.template || answers.template,
   git: options.git || answers.git,
 };
}
<span class="hljs-function">export async function <span class="hljs-title">cli</span><span class="hljs-params">(args)</span> </span>{
 let options = parseArgumentsIntoOptions(args);
 options = <span class="hljs-function">await <span class="hljs-title">promptForMissingOptions</span><span class="hljs-params">(options)</span></span>;
 console.log(options);
}
</code></pre> <p data-nodeid="1674">这样一来，我们就可以获取到类似：</p> <pre data-nodeid="1675" class="lang-java"><code data-language="java">{
 skipPrompts: <span class="hljs-keyword">false</span>,
    git: <span class="hljs-keyword">false</span>,
    template: <span class="hljs-string">'JavaScript'</span>,
    runInstall: <span class="hljs-keyword">false</span>
}
</code></pre> <p data-nodeid="1676">相关的配置了。</p> <p data-nodeid="1677">下面我们需要完成下载模板到本地的逻辑，我们事先准备好两种名为<code data-backticks="1" data-nodeid="1881">typescript</code>和<code data-backticks="1" data-nodeid="1883">javascript</code>的模板，并将相关的模板存储在项目的根目录中。当然你在实际开发应用中，可以内置更多的模板。</p> <p data-nodeid="1678">我们使用<code data-backticks="1" data-nodeid="1886">ncp</code>包实现跨平台递归拷贝文件，使用<code data-backticks="1" data-nodeid="1888">chalk</code>做个性化输出。安装相关依赖如下：</p> <pre data-nodeid="1679" class="lang-java"><code data-language="java">npm install ncp chalk
</code></pre> <p data-nodeid="1680">在<code data-backticks="1" data-nodeid="1891">src/</code>目录下，创建新的文件<code data-backticks="1" data-nodeid="1893">main.js</code>，代码如下：</p> <pre data-nodeid="1681" class="lang-java"><code data-language="java"><span class="hljs-keyword">import</span> chalk from <span class="hljs-string">'chalk'</span>;
<span class="hljs-keyword">import</span> fs from <span class="hljs-string">'fs'</span>;
<span class="hljs-keyword">import</span> ncp from <span class="hljs-string">'ncp'</span>;
<span class="hljs-keyword">import</span> path from <span class="hljs-string">'path'</span>;
<span class="hljs-keyword">import</span> { promisify } from <span class="hljs-string">'util'</span>;
<span class="hljs-keyword">const</span> access = promisify(fs.access);
<span class="hljs-keyword">const</span> copy = promisify(ncp);
<span class="hljs-comment">// 递归拷贝文件</span>
<span class="hljs-function">async function <span class="hljs-title">copyTemplateFiles</span><span class="hljs-params">(options)</span> </span>{
 <span class="hljs-keyword">return</span> copy(options.templateDirectory, options.targetDirectory, {
   clobber: <span class="hljs-keyword">false</span>,
 });
}
<span class="hljs-comment">// 创建项目</span>
<span class="hljs-function">export async function <span class="hljs-title">createProject</span><span class="hljs-params">(options)</span> </span>{
 options = {
   ...options,
   targetDirectory: options.targetDirectory || process.cwd(),
 };
 <span class="hljs-keyword">const</span> currentFileUrl = <span class="hljs-keyword">import</span>.meta.url;
 <span class="hljs-keyword">const</span> templateDir = path.resolve(
   <span class="hljs-keyword">new</span> URL(currentFileUrl).pathname,
   <span class="hljs-string">'../../templates'</span>,
   options.template.toLowerCase()
 );
 options.templateDirectory = templateDir;
 <span class="hljs-keyword">try</span> {
   <span class="hljs-comment">// 判断模板是否存在</span>
   <span class="hljs-function">await <span class="hljs-title">access</span><span class="hljs-params">(templateDir, fs.constants.R_OK)</span></span>;
 } <span class="hljs-keyword">catch</span> (err) {
   <span class="hljs-comment">// 模板不存在 </span>
   console.error(<span class="hljs-string">'%s Invalid template name'</span>, chalk.red.bold(<span class="hljs-string">'ERROR'</span>));
   process.exit(<span class="hljs-number">1</span>);
 }
 <span class="hljs-comment">// 拷贝模板</span>
 <span class="hljs-function">await <span class="hljs-title">copyTemplateFiles</span><span class="hljs-params">(options)</span></span>;
 console.log(<span class="hljs-string">'%s Project ready'</span>, chalk.green.bold(<span class="hljs-string">'DONE'</span>));
 <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
}
</code></pre> <p data-nodeid="4446">上述代码我们通过<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/import.meta" data-nodeid="4450"><code data-backticks="1" data-nodeid="4449">import.meta.url</code></a>来获取当前模块的 URL 路径，并通过<code data-backticks="1" data-nodeid="4452">fs.constants.R_OK</code>判断对应模板是否存在。此时<code data-backticks="1" data-nodeid="4454">cli.js</code>关键内容为：</p> <pre data-nodeid="1683" class="lang-java"><code data-language="java"><span class="hljs-keyword">import</span> arg from <span class="hljs-string">'arg'</span>;
<span class="hljs-keyword">import</span> inquirer from <span class="hljs-string">'inquirer'</span>;
<span class="hljs-keyword">import</span> { createProject } from <span class="hljs-string">'./main'</span>;
<span class="hljs-function">function <span class="hljs-title">parseArgumentsIntoOptions</span><span class="hljs-params">(rawArgs)</span> </span>{
<span class="hljs-comment">// ...</span>
}
<span class="hljs-function">async function <span class="hljs-title">promptForMissingOptions</span><span class="hljs-params">(options)</span> </span>{
<span class="hljs-comment">// ...</span>
}
<span class="hljs-function">export async function <span class="hljs-title">cli</span><span class="hljs-params">(args)</span> </span>{
 let options = parseArgumentsIntoOptions(args);
 options = <span class="hljs-function">await <span class="hljs-title">promptForMissingOptions</span><span class="hljs-params">(options)</span></span>;
 <span class="hljs-function">await <span class="hljs-title">createProject</span><span class="hljs-params">(options)</span></span>;
}
</code></pre> <p data-nodeid="1684">接下来，我们需要完成<code data-backticks="1" data-nodeid="1905">git</code>的初始化以及依赖安装工作，这时候需要用到以下内容。</p> <ul data-nodeid="1685"><li data-nodeid="1686"><p data-nodeid="1687"><a href="http://npm.im/execa" data-nodeid="1909"><code data-backticks="1" data-nodeid="1908">execa</code></a>：允许开发中使用类似<code data-backticks="1" data-nodeid="1911">git</code>的外部命令。</p></li> <li data-nodeid="1688"><p data-nodeid="1689"><a href="http://npm.im/pkg-install" data-nodeid="1915"><code data-backticks="1" data-nodeid="1914">pkg-install</code></a>：使用<code data-backticks="1" data-nodeid="1917">yarn install</code>或<code data-backticks="1" data-nodeid="1919">npm install</code>安装依赖。</p></li> <li data-nodeid="1690"><p data-nodeid="1691"><a href="http://npm.im/listr" data-nodeid="1923"><code data-backticks="1" data-nodeid="1922">listr</code></a>：给出当前进度 progress。</p></li></ul> <p data-nodeid="1692">执行安装依赖：</p> <pre data-nodeid="1693" class="lang-java"><code data-language="java">npm install execa pkg-install listr
</code></pre> <p data-nodeid="1694">更新<code data-backticks="1" data-nodeid="1927">main.js</code>为：</p> <pre data-nodeid="1695" class="lang-java"><code data-language="java"><span class="hljs-keyword">import</span> chalk from <span class="hljs-string">'chalk'</span>;
<span class="hljs-keyword">import</span> fs from <span class="hljs-string">'fs'</span>;
<span class="hljs-keyword">import</span> ncp from <span class="hljs-string">'ncp'</span>;
<span class="hljs-keyword">import</span> path from <span class="hljs-string">'path'</span>;
<span class="hljs-keyword">import</span> { promisify } from <span class="hljs-string">'util'</span>;
<span class="hljs-keyword">import</span> execa from <span class="hljs-string">'execa'</span>;
<span class="hljs-keyword">import</span> Listr from <span class="hljs-string">'listr'</span>;
<span class="hljs-keyword">import</span> { projectInstall } from <span class="hljs-string">'pkg-install'</span>;
<span class="hljs-keyword">const</span> access = promisify(fs.access);
<span class="hljs-keyword">const</span> copy = promisify(ncp);
<span class="hljs-comment">// 拷贝模板</span>
<span class="hljs-function">async function <span class="hljs-title">copyTemplateFiles</span><span class="hljs-params">(options)</span> </span>{
 <span class="hljs-keyword">return</span> copy(options.templateDirectory, options.targetDirectory, {
   clobber: <span class="hljs-keyword">false</span>,
 });
}
<span class="hljs-comment">// 初始化 git</span>
<span class="hljs-function">async function <span class="hljs-title">initGit</span><span class="hljs-params">(options)</span> </span>{
 <span class="hljs-comment">// 执行 git init</span>
 <span class="hljs-keyword">const</span> result = <span class="hljs-function">await <span class="hljs-title">execa</span><span class="hljs-params">(<span class="hljs-string">'git'</span>, [<span class="hljs-string">'init'</span>], {
   cwd: options.targetDirectory,
 })</span></span>;
 <span class="hljs-keyword">if</span> (result.failed) {
   <span class="hljs-keyword">return</span> Promise.reject(<span class="hljs-keyword">new</span> Error(<span class="hljs-string">'Failed to initialize git'</span>));
 }
 <span class="hljs-keyword">return</span>;
}
<span class="hljs-comment">// 创建项目</span>
<span class="hljs-function">export async function <span class="hljs-title">createProject</span><span class="hljs-params">(options)</span> </span>{
 options = {
   ...options,
   targetDirectory: options.targetDirectory || process.cwd()
 };
 <span class="hljs-keyword">const</span> templateDir = path.resolve(
   <span class="hljs-keyword">new</span> URL(<span class="hljs-keyword">import</span>.meta.url).pathname,
   <span class="hljs-string">'../../templates'</span>,
   options.template
 );
 options.templateDirectory = templateDir;
 <span class="hljs-keyword">try</span> {
   <span class="hljs-comment">// 判断模板是否存在</span>
   <span class="hljs-function">await <span class="hljs-title">access</span><span class="hljs-params">(templateDir, fs.constants.R_OK)</span></span>;
 } <span class="hljs-keyword">catch</span> (err) {
   console.error(<span class="hljs-string">'%s Invalid template name'</span>, chalk.red.bold(<span class="hljs-string">'ERROR'</span>));
   process.exit(<span class="hljs-number">1</span>);
 }
 <span class="hljs-comment">// 声明 tasks</span>
 <span class="hljs-keyword">const</span> tasks = <span class="hljs-keyword">new</span> Listr([
   {
     title: <span class="hljs-string">'Copy project files'</span>,
     task: () =&gt; copyTemplateFiles(options),
   },
   {
     title: <span class="hljs-string">'Initialize git'</span>,
     task: () =&gt; initGit(options),
     enabled: () =&gt; options.git,
   },
   {
     title: <span class="hljs-string">'Install dependencies'</span>,
     task: () =&gt;
       projectInstall({
         cwd: options.targetDirectory,
       }),
     skip: () =&gt;
       !options.runInstall
         ? <span class="hljs-string">'Pass --install to automatically install dependencies'</span>
         : undefined,
   },
 ]);
 <span class="hljs-comment">// 并行执行 tasks</span>
 await tasks.run();
 console.log(<span class="hljs-string">'%s Project ready'</span>, chalk.green.bold(<span class="hljs-string">'DONE'</span>));
 <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
}
</code></pre> <p data-nodeid="1696">这样一来，我们的命令行就大功告成了。</p> <p data-nodeid="1697">接下来我们主要谈谈模板维护问题，上述实现中，模板维护在了本地。为了更大范围的合作，模板可以共享到 GitHub 中。我们可以在 package.json 文件中声明 files 字段，如下所示：</p> <pre data-nodeid="1698" class="lang-java"><code data-language="java">},
 <span class="hljs-string">&quot;files&quot;</span>: [
   <span class="hljs-string">&quot;bin/&quot;</span>,
   <span class="hljs-string">&quot;src/&quot;</span>,
   <span class="hljs-string">&quot;templates/&quot;</span>
 ]
}
</code></pre> <p data-nodeid="1699">以此来声明哪些文件可以被<code data-backticks="1" data-nodeid="1932">npm publish</code>出去。</p> <p data-nodeid="1700">另外一种做法是将模板单独维护到一个 GitHub 仓库当中。在创建一个项目时，我们使用 <a href="https://www.npmjs.com/package/download-git-repo" data-nodeid="1937">download-git-repo</a>来下载模板。</p> <h3 data-nodeid="1701">从命令行到万能脚手架</h3> <p data-nodeid="1702">前面我们分析了一个命令行的实现和开发原理，这些内容并不复杂。但如何从一个命令行升级到一个万能脚手架呢？我们继续探讨。</p> <p data-nodeid="1703">使用命令行启动并创建一个基于模板的项目只能说是一个脚手架的雏形。对比大家熟悉的<code data-backticks="1" data-nodeid="1942">vue-cli</code>、<code data-backticks="1" data-nodeid="1944">create-react-app</code>、<code data-backticks="1" data-nodeid="1946">@tarojs/cli</code>、<code data-backticks="1" data-nodeid="1948">umi</code>等，我们还需要从可伸缩性、用户友好性方面考虑：</p> <ul data-nodeid="1704"><li data-nodeid="1705"><p data-nodeid="1706">如何使模板支持版本管理</p></li> <li data-nodeid="1707"><p data-nodeid="1708">模板如何进行扩展</p></li> <li data-nodeid="1709"><p data-nodeid="1710">如何进行版本检查和更新</p></li> <li data-nodeid="1711"><p data-nodeid="1712">如何自定义构建</p></li></ul> <p data-nodeid="1713">下面我们分别来讨论。</p> <p data-nodeid="1714">模板支持版本管理可以使用 npm 维护模板，这样借助 npm 的版本管理，我们可以天然地支持不同版本的模板。当然在脚手架的设计中，要加入<strong data-nodeid="1960">对版本的选择和处理</strong>。</p> <p data-nodeid="1715">如前文所说，模板扩展可以借助中心化手段，集成开发者力量，提供模板市场。这里需要注意的是，针对不同模板或功能区块的<strong data-nodeid="1966">可插拔性</strong>是非常重要的。下面我们会具体展开。</p> <p data-nodeid="3640">版本检查可以使用 npm view @lucas/create-project version\ 来进行版本检查，并根据环境版本，提示用户更新。</p> <p data-nodeid="2823">构建是一个老大难问题，不同项目的构建需求是不同的。参照<a href="https://kaiwu.lagou.com/course/courseInfo.htm?courseId=584#/detail/pc?id=5952" data-nodeid="2827">第 23 讲“npm scripts：打造一体化的构建和部署流程”</a>所讲，不同构建脚本可以考虑<strong data-nodeid="2837">单独抽象，提供可插拔式封装</strong>。比如<a href="https://github.com/yanhaijing/jslib-base/tree/master/packages" data-nodeid="2835">jslib-base</a>这个库的设计，这也是一个“万能脚手架”。</p> <p data-nodeid="1718">我们具体来看，使用脚手架初始化一个项目的过程，本质是根据输入信息进行模板填充。比如，如果开发者选择使用 TypeScript 以及英语环境构建项目，并使用 rollup 进行构建。那么核心流程中在初始化 rollup.config.js 文件时，我们读取 rollup.js.tmpl，并将相关信息（比如对 TypeScript 的编译）填写到模板中。</p> <p data-nodeid="1719">类似的情况还有初始化 .eslintrc.ts.json、package.json、CHANGELOG.en.md、README.en.md，以及 doc.en.md 等。</p> <p data-nodeid="1720">所有这些文件的生成过程都需要<strong data-nodeid="1991">可插拔，更理想的是，这些插件是一个独立的运行时</strong>。因此我们可以将每一个脚手架文件（即模板文件）的初始化视作一个独立的应用，由命令行统一指挥调度。</p> <p data-nodeid="1721">比如 <a href="https://github.com/yanhaijing/jslib-base/tree/master/packages" data-nodeid="1995">jslib-base</a> 这个库对于 rollup 构建的处理，支持开发者传入 option，由命令行处理函数，结合不同的配置版本进行自定义分配。具体代码如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> util <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@js-lib/util'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token parameter">cmdPath<span class="token punctuation">,</span> name<span class="token punctuation">,</span> option</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// type 为 js 和 ts 两种</span>
    <span class="token keyword">const</span> type <span class="token operator">=</span> option<span class="token punctuation">.</span>type<span class="token punctuation">;</span>
  <span class="token comment">// module 分为：umd/esm/commonjs</span>
    <span class="token keyword">const</span> module <span class="token operator">=</span> option<span class="token punctuation">.</span>module <span class="token operator">=</span> option<span class="token punctuation">.</span>module<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">prev<span class="token punctuation">,</span> name</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>prev<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> name<span class="token punctuation">,</span> prev<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// rollup 基本配置</span>
    util<span class="token punctuation">.</span><span class="token function">copyTmpl</span><span class="token punctuation">(</span>
        path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">./template/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>type<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/rollup.js.tmpl</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>cmdPath<span class="token punctuation">,</span> name<span class="token punctuation">,</span> <span class="token string">'config/rollup.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        option<span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// umd 模式</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>module<span class="token punctuation">.</span>umd<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        util<span class="token punctuation">.</span><span class="token function">copyFile</span><span class="token punctuation">(</span>
            path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">./template/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>type<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/rollup.config.aio.js</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>cmdPath<span class="token punctuation">,</span> name<span class="token punctuation">,</span> <span class="token string">'config/rollup.config.aio.js'</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// esm 模式</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>module<span class="token punctuation">.</span>esm<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        util<span class="token punctuation">.</span><span class="token function">copyFile</span><span class="token punctuation">(</span>
            path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">./template/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>type<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/rollup.config.esm.js</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>cmdPath<span class="token punctuation">,</span> name<span class="token punctuation">,</span> <span class="token string">'config/rollup.config.esm.js'</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// commonjs 模式</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>module<span class="token punctuation">.</span>commonjs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        util<span class="token punctuation">.</span><span class="token function">copyFile</span><span class="token punctuation">(</span>
            path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">./template/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>type<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/rollup.config.js</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>cmdPath<span class="token punctuation">,</span> name<span class="token punctuation">,</span> <span class="token string">'config/rollup.config.js'</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    util<span class="token punctuation">.</span><span class="token function">mergeTmpl2JSON</span><span class="token punctuation">(</span>
        path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">./template/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>type<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/package.json.tmpl</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>cmdPath<span class="token punctuation">,</span> name<span class="token punctuation">,</span> <span class="token string">'package.json'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        option<span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">'js'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        util<span class="token punctuation">.</span><span class="token function">copyFile</span><span class="token punctuation">(</span>
            path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">./template/js/.babelrc</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>cmdPath<span class="token punctuation">,</span> name<span class="token punctuation">,</span> <span class="token string">'.babelrc'</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">'ts'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        util<span class="token punctuation">.</span><span class="token function">copyFile</span><span class="token punctuation">(</span>
            path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">./template/ts/tsconfig.json</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>cmdPath<span class="token punctuation">,</span> name<span class="token punctuation">,</span> <span class="token string">'tsconfig.json'</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">init</span><span class="token operator">:</span> init<span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p data-nodeid="1723">如上代码，根据用户输入，使用了不同版本的 rollup 构建内容。</p> <p data-nodeid="1724">相信你了解了这些内容，对于实现一个自己的 create-react-app、vue-cli 会更有心得和启发。</p> <h3 data-nodeid="1725">总结</h3> <p data-nodeid="1726">这一讲我们从开发一个命令行入手，分析了实现一个脚手架的方方面面。实现一个企业级脚手架需要不断打磨和优化，不断增强用户体验和可操作性，比如处理边界情况、终端提示等。更重要的是，对构建逻辑的抽象和封装，根据业务需求，不断扩展命令和模板。</p> <p data-nodeid="1727">本讲内容总结如下：</p> <p data-nodeid="1728"><img src="https://s0.lgstatic.com/i/image6/M01/17/03/Cgp9HWBHK1WAeFWWAAdEzv-BDFI037.png" alt="前端基建 金句.png" data-nodeid="2004"></p> <p data-nodeid="1729">从 0 到 1 简单，但是从 1 开始出发，就需要开发者不断思考和总结。下一讲我们将开启 Node.js 的学习，来实现一个 SSR 应用。我们会直入正题，不再过多学习 Node.js 的基础内容，也请你提前做好准备。</p> <hr> <h3 id="精选评论"><a href="#精选评论" class="header-anchor">#</a> 精选评论</h3> <h5 id="哲"><a href="#哲" class="header-anchor">#</a> *哲</h5> <blockquote><p>执行 npm link 时出错：npm ERR! path /usr/local/lib/node_modules/create-project/bin/create-projectnpm ERR! errno -2npm ERR! enoent ENOENT: no such file or directory, chmod '/usr/local/lib/node_modules/create-project/bin/create-project'</p></blockquote> <h6 id="讲师回复"><a href="#讲师回复" class="header-anchor">#</a>     讲师回复</h6> <blockquote><p>    从报错来看，是找不到该路径对应的文件，先确认一下改路径下是否有文件，再看一下是否有创建文件的权限</p></blockquote> <h5 id="斌"><a href="#斌" class="header-anchor">#</a> *斌</h5> <blockquote><p>有 github repo 吗？</p></blockquote> <h6 id="编辑回复"><a href="#编辑回复" class="header-anchor">#</a>     编辑回复</h6> <blockquote><p>    注意看超链接的地方，相关地址都在哈~</p></blockquote></div></div> <div class="page-slot page-slot-bottom"><!-- 横向自适应 -->
      <ins class="adsbygoogle"
          style="display:block"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="6620245489"
          data-ad-format="auto"
          data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/wu529778790/wu529778790.github.io/edit/master/docs/20.笔记/01.前端基础建设与架构 30 讲/26.如何设计一个“万能”项目脚手架？.md" target="_blank" rel="noopener noreferrer">编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2024/11/11, 03:02:58</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/378f678a7284b/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">如何设计一个前端 + 移动端离线包方案？</div></a> <a href="/pages/c78977462af88/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">同构渲染架构：实现一个 SSR 应用</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/378f678a7284b/" class="prev">如何设计一个前端 + 移动端离线包方案？</a></span> <span class="next"><a href="/pages/c78977462af88/">同构渲染架构：实现一个 SSR 应用</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/537e4ca5f546b/"><div>Code Review</div></a> <span>10-14</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/266a6e0607e5b/"><div>富强</div></a> <span>10-13</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/84b570b268311/"><div>ComfyUI</div></a> <span>10-11</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:529778790@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/wu529778790" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://shenzjd.com/shenzjd/music/" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Power by
  <a href="https://vuepress.vuejs.org/zh/" target="_blank" title="vuepress">vuepress</a> 
    | Copyright © 2015-2024
    <span>神族九帝</span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <div class="custom-html-window custom-html-window-rb" style="display:;"><div class="custom-wrapper"><i class="close-but">×</i> <div><!-- 固定160*160px -->
      <ins class="adsbygoogle"
          style="display:inline-block;max-width:160px;max-height:160px"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="8377369658"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
      </div></div></div></div><div class="global-ui"><div></div></div></div>
    <script src="/assets/js/app.e16f101c.js" defer></script><script src="/assets/js/3.0daeda44.js" defer></script><script src="/assets/js/179.8ef3efca.js" defer></script>
  </body>
</html>