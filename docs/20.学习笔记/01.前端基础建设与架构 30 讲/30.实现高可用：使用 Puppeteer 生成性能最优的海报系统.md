<p data-nodeid="853" class="">åœ¨å‰é¢<a href="https://kaiwu.lagou.com/course/courseInfo.htm?courseId=584#/detail/pc?id=5957&amp;fileGuid=xxQTRXtVcqtHK6j8" data-nodeid="942">ç¬¬ 28 è®²â€œè®¾è®¡æ€§èƒ½å®ˆå«ç³»ç»Ÿï¼šå®Œå–„ CI/CD æµç¨‹â€</a>ä¸­æˆ‘ä»¬æåˆ°äº† Puppeteerã€‚äº‹å®ä¸Šï¼Œä»¥ Puppeteer ä¸ºä»£è¡¨çš„ Headless æµè§ˆå™¨åœ¨ Node.js ä¸­çš„åº”ç”¨æä¸ºå¹¿æ³›ï¼Œè¿™ä¸€è®²ï¼Œå°±è®©æˆ‘ä»¬å¯¹ Puppeteer è¿›è¡Œæ·±å…¥åˆ†æå’Œåº”ç”¨ã€‚</p>
<h3 data-nodeid="854">Puppeteer ä»‹ç»å’ŒåŸç†</h3>
<p data-nodeid="855">æˆ‘ä»¬å…ˆå¯¹ Puppeteer è¿›è¡Œä¸€ä¸ªåŸºæœ¬ä»‹ç»ã€‚ï¼ˆ<a href="https://github.com/puppeteer?fileGuid=xxQTRXtVcqtHK6j8" data-nodeid="948">Puppeteer å®˜æ–¹åœ°å€</a>ï¼‰</p>
<blockquote data-nodeid="856">
<p data-nodeid="857">Puppeteer æ˜¯ä¸€ä¸ª Node åº“ï¼Œå®ƒæä¾›äº†ä¸€æ•´å¥—é«˜çº§ APIï¼Œé€šè¿‡ DevTools åè®®æ§åˆ¶ Chromium æˆ– Chromeã€‚æ­£å¦‚å…¶ç¿»è¯‘ä¸ºâ€œæ“çºµæœ¨å¶çš„äººâ€ä¸€æ ·ï¼Œä½ å¯ä»¥é€šè¿‡ Puppeteer æä¾›çš„ API ç›´æ¥æ§åˆ¶ Chromeï¼Œæ¨¡æ‹Ÿå¤§éƒ¨åˆ†ç”¨æˆ·æ“ä½œï¼Œè¿›è¡Œ UI æµ‹è¯•æˆ–è€…ä½œä¸ºçˆ¬è™«è®¿é—®é¡µé¢æ¥æ”¶é›†æ•°æ®ã€‚</p>
</blockquote>
<p data-nodeid="858">æ•´ä¸ªå®šä¹‰éå¸¸å¥½ç†è§£ï¼Œè¿™é‡Œéœ€è¦å¼€å‘è€…æ³¨æ„çš„æ˜¯ï¼ŒPuppeteer åœ¨ 1.7.0 ç‰ˆæœ¬ä¹‹åï¼Œä¼šåŒæ—¶ç»™å¼€å‘è€…æä¾›ï¼š</p>
<ul data-nodeid="859">
<li data-nodeid="860">
<p data-nodeid="861">Puppeteer</p>
</li>
<li data-nodeid="862">
<p data-nodeid="863">Puppeteer-core</p>
</li>
</ul>
<p data-nodeid="864">ä¸¤ä¸ªç‰ˆæœ¬ã€‚å®ƒä»¬çš„åŒºåˆ«åœ¨äºè½½å…¥å®‰è£… Puppeteer æ—¶ï¼Œæ˜¯å¦ä¼šä¸‹è½½ Chromiumã€‚Puppeteer-core é»˜è®¤ä¸ä¸‹è½½ Chromiumï¼ŒåŒæ—¶ä¼šå¿½ç•¥æ‰€æœ‰ puppeteer_* ç¯å¢ƒå˜é‡ã€‚å¯¹äºå¼€å‘è€…æ¥è¯´ï¼Œä½¿ç”¨ Puppeteer-core æ— ç–‘æ›´åŠ è½»ä¾¿ï¼Œä½†æ˜¯<strong data-nodeid="966">éœ€è¦æå‰ä¿è¯ç¯å¢ƒä¸­å·²ç»å…·æœ‰å¯æ‰§è¡Œçš„ Chromium</strong>ï¼ˆå…·ä½“è¯´æ˜å¯è§<a href="https://github.com/puppeteer/puppeteer/blob/main/docs/api.md#puppeteer-vs-puppeteer-core?fileGuid=xxQTRXtVcqtHK6j8" data-nodeid="964">puppeteer vs puppeteer-core</a>ï¼‰ã€‚</p>
<p data-nodeid="865">å…·ä½“ Puppeteer çš„åº”ç”¨åœºæ™¯æœ‰ï¼š</p>
<ul data-nodeid="866">
<li data-nodeid="867">
<p data-nodeid="868">ä¸ºç½‘é¡µç”Ÿæˆé¡µé¢ PDF æˆ–è€…æˆªå–å›¾ç‰‡ï¼›</p>
</li>
<li data-nodeid="869">
<p data-nodeid="870">æŠ“å– SPAï¼ˆå•é¡µåº”ç”¨ï¼‰å¹¶ç”Ÿæˆé¢„æ¸²æŸ“å†…å®¹ï¼›</p>
</li>
<li data-nodeid="871">
<p data-nodeid="872">è‡ªåŠ¨æäº¤è¡¨å•ï¼Œè¿›è¡Œ UI æµ‹è¯•ã€é”®ç›˜è¾“å…¥ç­‰ï¼›</p>
</li>
<li data-nodeid="873">
<p data-nodeid="874">åˆ›å»ºä¸€ä¸ªéšæ—¶æ›´æ–°çš„è‡ªåŠ¨åŒ–æµ‹è¯•ç¯å¢ƒï¼Œä½¿ç”¨æœ€æ–°çš„ JavaScript å’Œæµè§ˆå™¨åŠŸèƒ½ç›´æ¥åœ¨æœ€æ–°ç‰ˆæœ¬çš„ Chrome ä¸­æ‰§è¡Œæµ‹è¯•ï¼›</p>
</li>
<li data-nodeid="875">
<p data-nodeid="876">æ•è·ç½‘ç«™çš„<a href="https://developers.google.com/web/tools/chrome-devtools/evaluate-performance/reference?fileGuid=xxQTRXtVcqtHK6j8" data-nodeid="975">timeline trace</a>ï¼Œç”¨æ¥å¸®åŠ©åˆ†ææ€§èƒ½é—®é¢˜ï¼›</p>
</li>
<li data-nodeid="877">
<p data-nodeid="878">æµ‹è¯•æµè§ˆå™¨æ‰©å±•ã€‚</p>
</li>
</ul>
<p data-nodeid="879">ä¸‹é¢æˆ‘ä»¬å°±æ¢³ç†ä¸€äº› Puppeteer åº”ç”¨çš„é‡ç‚¹åœºæ™¯ï¼Œå¹¶è¯¦ç»†ä»‹ç»å¦‚ä½•ä½¿ç”¨ Puppeteer å®ç°ä¸€ä¸ªé«˜æ€§èƒ½çš„æµ·æŠ¥ Node.js æœåŠ¡ã€‚</p>
<h3 data-nodeid="880">Puppeteer åœ¨ SSR ä¸­çš„åº”ç”¨</h3>
<p data-nodeid="881">åŒºåˆ«äºç¬¬ 27 è®²ä»‹ç»çš„<a href="https://kaiwu.lagou.com/course/courseInfo.htm?courseId=584#/detail/pc?id=5956&amp;fileGuid=xxQTRXtVcqtHK6j8" data-nodeid="983">â€œåŒæ„æ¸²æŸ“æ¶æ„ï¼šå®ç°ä¸€ä¸ª SSR åº”ç”¨â€</a>ï¼Œä½¿ç”¨ Puppeteer å®ç°æœåŠ¡ç«¯é¢„æ¸²æŸ“å‡ºå‘ç‚¹å®Œå…¨ä¸åŒã€‚è¿™ç§æ–¹æ¡ˆæœ€å¤§çš„å¥½å¤„æ˜¯ä¸éœ€è¦å¯¹é¡¹ç›®ä»£ç è¿›è¡Œä»»ä½•è°ƒæ•´ï¼Œå´èƒ½è·å–åˆ° SSR åº”ç”¨çš„æ”¶ç›Šã€‚å½“ç„¶ï¼Œç›¸æ¯”åŒæ„æ¸²æŸ“ï¼ŒåŸºäº Puppeteer æŠ€æœ¯çš„ SSR åœ¨çµæ´»æ€§å’Œæ‰©å±•æ€§ä¸Šéƒ½æœ‰æ‰€å±€é™ã€‚ç”šè‡³åœ¨ Node.js ç«¯æ¸²æŸ“çš„æ€§èƒ½æˆæœ¬ä¹Ÿè¾ƒé«˜ï¼Œä¸è¿‡è¯¥æŠ€æœ¯ä¹Ÿé€æ¸è½åœ°ï¼Œå¹¶åœ¨å¾ˆå¤šåœºæ™¯å‘æŒ¥äº†é‡è¦ä»·å€¼ã€‚</p>
<p data-nodeid="882">æ¯”å¦‚å¯¹äºè¿™æ ·çš„ä¸€ä¸ªé¡µé¢ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre class="lang-js" data-nodeid="883"><code data-language="js">&lt;html&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"container"</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- Populated by the JS below. --&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-comment">// ä½¿ç”¨ JavaScript è„šæœ¬ï¼Œè¿›è¡Œ CSR æ¸²æŸ“</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">renderPosts</span>(<span class="hljs-params">posts, container</span>) </span>{
  <span class="hljs-keyword">const</span> html = posts.reduce(<span class="hljs-function">(<span class="hljs-params">html, post</span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${html}</span>
      &lt;li class="post"&gt;
        &lt;h2&gt;<span class="hljs-subst">${post.title}</span>&lt;/h2&gt;
        &lt;div class="summary"&gt;<span class="hljs-subst">${post.summary}</span>&lt;/div&gt;
        &lt;p&gt;<span class="hljs-subst">${post.content}</span>&lt;/p&gt;
      &lt;/li&gt;`</span>;
  }, <span class="hljs-string">''</span>);
  container.innerHTML = <span class="hljs-string">`&lt;ul id="posts"&gt;<span class="hljs-subst">${html}</span>&lt;/ul&gt;`</span>;
}
(<span class="hljs-keyword">async</span>() =&gt; {
  <span class="hljs-keyword">const</span> container = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#container'</span>);
  <span class="hljs-comment">// å‘é€æ•°æ®è¯·æ±‚</span>
  <span class="hljs-keyword">const</span> posts = <span class="hljs-keyword">await</span> fetch(<span class="hljs-string">'/posts'</span>).then(<span class="hljs-function"><span class="hljs-params">resp</span> =&gt;</span> resp.json());
  renderPosts(posts, container);
})();
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
&lt;/html&gt;
</code></pre>
<p data-nodeid="884">è¯¥é¡µé¢æ˜¯ä¸€ä¸ªå…¸å‹çš„ CSR é¡µé¢ï¼Œä¾é  Ajaxï¼Œå®ç°äº†é¡µé¢åŠ¨æ€åŒ–æ¸²æŸ“ã€‚</p>
<p data-nodeid="885">å½“åœ¨ Node.js ç«¯ä½¿ç”¨ Puppeteer æ¸²æŸ“æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°<code data-backticks="1" data-nodeid="988">ssr.mjs</code>ï¼Œå®Œæˆæ¸²æŸ“ä»»åŠ¡ï¼Œå¦‚ä¸‹ä»£ç ï¼š</p>
<pre class="lang-java" data-nodeid="886"><code data-language="java"><span class="hljs-keyword">import</span> puppeteer from <span class="hljs-string">'puppeteer'</span>;
<span class="hljs-comment">// å°†å·²ç»æ¸²æŸ“è¿‡çš„é¡µé¢ï¼Œç¼“å­˜åœ¨å†…å­˜ä¸­</span>
<span class="hljs-keyword">const</span> RENDER_CACHE = <span class="hljs-keyword">new</span> Map();
<span class="hljs-function">async function <span class="hljs-title">ssr</span><span class="hljs-params">(url)</span> </span>{
	<span class="hljs-comment">// å‘½ä¸­ç¼“å­˜</span>
  <span class="hljs-keyword">if</span> (RENDER_CACHE.has(url)) {
    <span class="hljs-keyword">return</span> {html: RENDER_CACHE.get(url), ttRenderMs: <span class="hljs-number">0</span>};
  }
  <span class="hljs-keyword">const</span> start = Date.now();
  <span class="hljs-comment">// ä½¿ç”¨ Puppeteer launch ä¸€ä¸ªæ— å¤´æµè§ˆå™¨</span>
  <span class="hljs-keyword">const</span> browser = await puppeteer.launch();
  <span class="hljs-keyword">const</span> page = await browser.newPage();
  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// è®¿é—®é¡µé¢åœ°å€ç›´åˆ°é¡µé¢ç½‘ç»œçŠ¶æ€ä¸º idle</span>
    await page.goto(url, {waitUntil: <span class="hljs-string">'networkidle0'</span>});
    <span class="hljs-comment">// ç¡®ä¿ #posts èŠ‚ç‚¹å·²ç»å­˜åœ¨</span>
    await page.waitForSelector(<span class="hljs-string">'#posts'</span>);
  } <span class="hljs-keyword">catch</span> (err) {
    console.error(err);
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> Error(<span class="hljs-string">'page.goto/waitForSelector timed out.'</span>);
  }
	<span class="hljs-comment">// è·å– html å†…å®¹</span>
  <span class="hljs-keyword">const</span> html = await page.content(); 
  <span class="hljs-comment">// å…³é—­æ— å¤´æµè§ˆå™¨</span>
  await browser.close();
  <span class="hljs-keyword">const</span> ttRenderMs = Date.now() - start;
  console.info(`Headless rendered page in: ${ttRenderMs}ms`);
	<span class="hljs-comment">// è¿›è¡Œç¼“å­˜å­˜å‚¨</span>
  RENDER_CACHE.set(url, html);
  <span class="hljs-keyword">return</span> {html, ttRenderMs};
}
export {ssr as <span class="hljs-keyword">default</span>};
</code></pre>
<p data-nodeid="887">å¯¹åº”<code data-backticks="1" data-nodeid="991">server.mjs</code>ä»£ç ï¼š</p>
<pre class="lang-java" data-nodeid="888"><code data-language="java"><span class="hljs-keyword">import</span> express from <span class="hljs-string">'express'</span>;
<span class="hljs-keyword">import</span> ssr from <span class="hljs-string">'./ssr.mjs'</span>;
<span class="hljs-keyword">const</span> app = express();
app.get(<span class="hljs-string">'/'</span>, async (req, res, next) =&gt; {
  <span class="hljs-comment">// è°ƒç”¨ SSR æ–¹æ³•æ¸²æŸ“é¡µé¢</span>
  <span class="hljs-keyword">const</span> {html, ttRenderMs} = <span class="hljs-function">await <span class="hljs-title">ssr</span><span class="hljs-params">(`xxx/index.html`)</span></span>;
  res.set(<span class="hljs-string">'Server-Timing'</span>, `Prerender;dur=${ttRenderMs};desc=<span class="hljs-string">"Headless render time (ms)"</span>`);
  <span class="hljs-keyword">return</span> res.status(<span class="hljs-number">200</span>).send(html);
});
app.listen(<span class="hljs-number">8080</span>, () =&gt; console.log(<span class="hljs-string">'Server started. Press Ctrl+C to quit'</span>));
</code></pre>
<p data-nodeid="889">å½“ç„¶ä¸Šè¿°å®ç°æ¯”è¾ƒç®€é™‹ï¼Œåªæ˜¯è¿›è¡ŒåŸç†è¯´æ˜ã€‚å¦‚æœæ›´è¿›ä¸€æ­¥ï¼Œæˆ‘ä»¬å¯ä»¥ä»ä»¥ä¸‹å‡ ä¸ªè§’åº¦è¿›è¡Œä¼˜åŒ–ï¼š</p>
<ul data-nodeid="890">
<li data-nodeid="891">
<p data-nodeid="892">æ”¹é€ æµè§ˆå™¨ç«¯ä»£ç ï¼Œé˜²æ­¢é‡å¤è¯·æ±‚æ¥å£ï¼›</p>
</li>
<li data-nodeid="893">
<p data-nodeid="894">åœ¨ Node.js ç«¯ï¼Œabort æ‰ä¸å¿…è¦çš„è¯·æ±‚ï¼Œä»¥å¾—åˆ°æ›´å¿«çš„æœåŠ¡ç«¯æ¸²æŸ“å“åº”é€Ÿåº¦ï¼›</p>
</li>
<li data-nodeid="895">
<p data-nodeid="896">å°†å…³é”®èµ„æºå†…è¿è¿› HTMLï¼›</p>
</li>
<li data-nodeid="897">
<p data-nodeid="898">è‡ªåŠ¨å‹ç¼©é™æ€èµ„æºï¼›</p>
</li>
<li data-nodeid="899">
<p data-nodeid="900">åœ¨ Node.js ç«¯ï¼Œæ¸²æŸ“é¡µé¢æ—¶ï¼Œé‡å¤åˆ©ç”¨ Chrome å®ä¾‹ã€‚</p>
</li>
</ul>
<p data-nodeid="901">è¿™é‡Œæˆ‘ä»¬ç”¨ç®€å•ä»£ç è¿›è¡Œè¯´æ˜ï¼š</p>
<pre class="lang-java" data-nodeid="902"><code data-language="java">  <span class="hljs-keyword">import</span> express from <span class="hljs-string">'express'</span>;
  <span class="hljs-keyword">import</span> puppeteer from <span class="hljs-string">'puppeteer'</span>;
  <span class="hljs-keyword">import</span> ssr from <span class="hljs-string">'./ssr.mjs'</span>;
  <span class="hljs-comment">// é‡å¤ä½¿ç”¨ Chrome å®ä¾‹</span>
  let browserWSEndpoint = <span class="hljs-keyword">null</span>;
  <span class="hljs-keyword">const</span> app = express();

app.get(<span class="hljs-string">'/'</span>, async (req, res, next) =&gt; {
<span class="hljs-keyword">if</span> (!browserWSEndpoint) {
<span class="hljs-comment">// ä¸€ä¸‹ä¸¤è¡Œä»£ç ä¸å¿…éšç€æ¸²æŸ“é‡å¤æ‰§è¡Œ</span>
<span class="hljs-keyword">const</span> browser = await puppeteer.launch();
browserWSEndpoint = await browser.wsEndpoint();
}

    <span class="hljs-keyword">const</span> url = `${req.protocol}:<span class="hljs-comment">//${req.get('host')}/index.html`;</span>
    <span class="hljs-keyword">const</span> {html} = <span class="hljs-function">await <span class="hljs-title">ssr</span><span class="hljs-params">(url, browserWSEndpoint)</span></span>;

    <span class="hljs-keyword">return</span> res.status(<span class="hljs-number">200</span>).send(html);

});
</code></pre>

<p data-nodeid="903">è‡³æ­¤ï¼Œæˆ‘ä»¬ä»åŸç†å’Œä»£ç å±‚é¢åˆ†æäº† Puppeteer åœ¨ SSR ä¸­çš„åº”ç”¨ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬æ¥äº†è§£æ›´å¤šçš„ Puppeteer ä½¿ç”¨åœºæ™¯ï¼Œè¯·ä½ ç»§ç»­é˜…è¯»ã€‚</p>
<h3 data-nodeid="904">Puppeteer åœ¨ UI æµ‹è¯•ä¸­çš„åº”ç”¨</h3>
<p data-nodeid="905">Puppeteer åœ¨ UI æµ‹è¯•ï¼ˆå³ç«¯åˆ°ç«¯æµ‹è¯•ï¼‰ä¸­ä¹Ÿå¯ä»¥å¤§æ˜¾èº«æ‰‹ï¼Œæ¯”å¦‚å’Œ Jest ç»“åˆï¼Œé€šè¿‡æ–­è¨€èƒ½åŠ›å®ç°ä¸€ä¸ªå®Œå¤‡çš„ç«¯åˆ°ç«¯æµ‹è¯•ç³»ç»Ÿã€‚</p>
<p data-nodeid="906">æ¯”å¦‚ä¸‹é¢ä»£ç ï¼š</p>
<pre class="lang-java" data-nodeid="907"><code data-language="java"><span class="hljs-keyword">const</span> puppeteer = require(<span class="hljs-string">'puppeteer'</span>);
<span class="hljs-comment">// æµ‹è¯•é¡µé¢ title ç¬¦åˆé¢„æœŸ</span>
test(<span class="hljs-string">'baidu title is correct'</span>, async () =&gt; {
	<span class="hljs-comment">// å¯åŠ¨ä¸€ä¸ªæ— å¤´æµè§ˆå™¨</span>
  <span class="hljs-keyword">const</span> browser = await puppeteer.launch()
  <span class="hljs-comment">// é€šè¿‡æ— å¤´æµè§ˆå™¨è®¿é—®é¡µé¢</span>
  <span class="hljs-keyword">const</span> page = await browser.newPage()
  await page.goto(<span class="hljs-string">'https://xxxxx'</span>)
  <span class="hljs-comment">// è·å–é¡µé¢ title</span>
  <span class="hljs-keyword">const</span> title = await page.title()
  <span class="hljs-comment">// ä½¿ç”¨ Jest çš„ test å’Œ expect ä¸¤ä¸ªå…¨å±€å‡½æ•°è¿›è¡Œæ–­è¨€</span>
  expect(title).toBe(<span class="hljs-string">'xxxx'</span>)
  await browser.close()
});
</code></pre>
<p data-nodeid="908">ä¸Šé¢ä»£ç ç®€å•æ¸…æ™°åœ°å‹¾å‹’å‡ºäº† Puppeteer ç»“åˆ Jest å®ç°ç«¯åˆ°ç«¯æµ‹è¯•çš„åœºæ™¯ã€‚å®é™…ä¸Šï¼Œç°åœ¨æµè¡Œçš„ä¸»æµç«¯åˆ°ç«¯æµ‹è¯•æ¡†æ¶ï¼Œæ¯”å¦‚ Cypress åŸç†éƒ½å¦‚ä¸Šä»£ç æ‰€ç¤ºã€‚</p>
<p data-nodeid="909">æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥åˆ†æ Puppeteer ç»“åˆ Lighthouse åº”ç”¨åœºæ™¯ã€‚</p>
<h3 data-nodeid="910">Puppeteer ç»“åˆ Lighthouse åº”ç”¨åœºæ™¯</h3>
<p data-nodeid="911">åœ¨<a href="https://kaiwu.lagou.com/course/courseInfo.htm?courseId=584#/detail/pc?id=5957&amp;fileGuid=xxQTRXtVcqtHK6j8" data-nodeid="1010">ç¬¬ 28 è®²â€œè®¾è®¡æ€§èƒ½å®ˆå«ç³»ç»Ÿï¼šå®Œå–„ CI/CD æµç¨‹â€</a>ä¸­æˆ‘ä»¬ä¹Ÿæåˆ°äº† Lighthouseï¼Œæ—¢ç„¶ Puppeteer å¯ä»¥å’Œ Jest ç»“åˆå®ç°ä¸€ä¸ªç«¯åˆ°ç«¯æµ‹è¯•æ¡†æ¶ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥å’Œ Lighthouse ç»“åˆâ€”â€”è¿™å°±æ˜¯ä¸€ä¸ªç®€å•çš„æ€§èƒ½å®ˆå«ç³»ç»Ÿçš„é›å½¢ã€‚</p>
<p data-nodeid="912">æˆ‘ä»¬å†é€šè¿‡ä»£ç æ¥è¯´æ˜ï¼Œå¦‚ä¸‹ä»£ç ï¼š</p>
<pre class="lang-java" data-nodeid="913"><code data-language="java"><span class="hljs-keyword">const</span> chromeLauncher = require(<span class="hljs-string">'chrome-launcher'</span>);
<span class="hljs-keyword">const</span> puppeteer = require(<span class="hljs-string">'puppeteer'</span>);
<span class="hljs-keyword">const</span> lighthouse = require(<span class="hljs-string">'lighthouse'</span>);
<span class="hljs-keyword">const</span> config = require(<span class="hljs-string">'lighthouse/lighthouse-core/config/lr-desktop-config.js'</span>);
<span class="hljs-keyword">const</span> reportGenerator = require(<span class="hljs-string">'lighthouse/lighthouse-core/report/report-generator'</span>);
<span class="hljs-keyword">const</span> request = require(<span class="hljs-string">'request'</span>);
<span class="hljs-keyword">const</span> util = require(<span class="hljs-string">'util'</span>);
<span class="hljs-keyword">const</span> fs = require(<span class="hljs-string">'fs'</span>);
(async() =&gt; {
    <span class="hljs-comment">// é»˜è®¤é…ç½® </span>
    <span class="hljs-keyword">const</span> opts = {
        logLevel: <span class="hljs-string">'info'</span>,
        output: <span class="hljs-string">'json'</span>,
        disableDeviceEmulation: <span class="hljs-keyword">true</span>,
        defaultViewport: {
            width: <span class="hljs-number">1200</span>,
            height: <span class="hljs-number">900</span>
        },
        chromeFlags: [<span class="hljs-string">'--disable-mobile-emulation'</span>]
    };
		<span class="hljs-comment">// ä½¿ç”¨ chromeLauncher å¯åŠ¨ä¸€ä¸ª chrome å®ä¾‹</span>
    <span class="hljs-keyword">const</span> chrome = await chromeLauncher.launch(opts);
    opts.port = chrome.port;
<span class="hljs-comment">// ä½¿ç”¨ puppeteer.connect è¿æ¥ chrome å®ä¾‹</span>
    <span class="hljs-keyword">const</span> resp = await util.promisify(request)(`http:<span class="hljs-comment">//localhost:${opts.port}/json/version`);</span>
    <span class="hljs-keyword">const</span> {webSocketDebuggerUrl} = JSON.parse(resp.body);
    <span class="hljs-keyword">const</span> browser = await puppeteer.connect({browserWSEndpoint: webSocketDebuggerUrl});

<span class="hljs-comment">// Puppeteer è®¿é—®é€»è¾‘</span>
page = (await browser.pages())[<span class="hljs-number">0</span>];
await page.setViewport({ width: <span class="hljs-number">1200</span>, height: <span class="hljs-number">900</span>});
console.log(page.url());
<span class="hljs-comment">// ä½¿ç”¨ lighthouse äº§å‡ºæŠ¥å‘Š</span>
<span class="hljs-keyword">const</span> report = <span class="hljs-function">await <span class="hljs-title">lighthouse</span><span class="hljs-params">(page.url()</span>, opts, config).<span class="hljs-title">then</span><span class="hljs-params">(results =&gt; {
return results;
})</span></span>;
<span class="hljs-keyword">const</span> html = reportGenerator.generateReport(report.lhr, <span class="hljs-string">'html'</span>);
<span class="hljs-keyword">const</span> json = reportGenerator.generateReport(report.lhr, <span class="hljs-string">'json'</span>);
await browser.disconnect();
await chrome.kill();
<span class="hljs-comment">// å°†æŠ¥å‘Šå†™å…¥æ–‡ä»¶ç³»ç»Ÿ</span>
fs.writeFile(<span class="hljs-string">'report.html'</span>, html, (err) =&gt; {
<span class="hljs-keyword">if</span> (err) {
console.error(err);
}
});
fs.writeFile(<span class="hljs-string">'report.json'</span>, json, (err) =&gt; {
<span class="hljs-keyword">if</span> (err) {
console.error(err);
}
});
})();
</code></pre>

<p data-nodeid="914">æ•´ä½“æµç¨‹éå¸¸æ¸…æ™°ï¼Œæ˜¯ä¸€ä¸ªå…¸å‹çš„ Puppeteer ä¸ Lighthouse ç»“åˆçš„æ¡ˆä¾‹ã€‚äº‹å®ä¸Šï¼Œæˆ‘ä»¬çœ‹åˆ° Puppeteer æˆ– Headless æµè§ˆå™¨å¯ä»¥å’Œå¤šä¸ªé¢†åŸŸèƒ½åŠ›ç›¸ç»“åˆï¼Œåœ¨ Node.js æœåŠ¡ä¸Šå®ç°å¹³å°åŒ–èƒ½åŠ›ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†çœ‹æœ€åä¸€ä¸ªæ¡ˆä¾‹ï¼Œè¯·è¯»è€…ç»§ç»­é˜…è¯»ã€‚</p>
<h3 data-nodeid="915">Puppeteer å®ç°æµ·æŠ¥ Node.js æœåŠ¡</h3>
<p data-nodeid="916">ç¤¾åŒºä¸Šæˆ‘ä»¬å¸¸è§ç”Ÿæˆæµ·æŠ¥çš„æŠ€æœ¯åˆ†äº«ã€‚åº”ç”¨åœºæ™¯å¾ˆå¤šï¼Œæ¯”å¦‚æ–‡ç¨¿ä¸­åˆ’çº¿ï¼Œè¿›è¡Œâ€œé‡‘å¥åˆ†äº«â€ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p data-nodeid="917"><img src="https://s0.lgstatic.com/i/image6/M00/21/5C/CioPOWBURyGAdWWfAAVd4uI0v5k453.png" alt="Drawing 0.png" data-nodeid="1018"></p>
<p data-nodeid="918">ä¸€èˆ¬æ¥è¯´ï¼Œç”Ÿæˆæµ·æŠ¥å¯ä»¥ä½¿ç”¨<a href="https://github.com/niklasvh/html2canvas?fileGuid=xxQTRXtVcqtHK6j8" data-nodeid="1022">html2canvas</a>è¿™æ ·çš„ç±»åº“å®Œæˆï¼Œè¿™é‡Œé¢çš„æŠ€æœ¯éš¾ç‚¹ä¸»è¦æœ‰è·¨åŸŸå¤„ç†ã€åˆ†é¡µå¤„ç†ã€é¡µé¢æˆªå›¾æ—¶æœºå¤„ç†ç­‰ã€‚æ•´ä½“æ¥è¯´ï¼Œå¹¶ä¸éš¾å®ç°ï¼Œä½†æ˜¯ç¨³å®šæ€§ä¸€èˆ¬ã€‚å¦ä¸€ç§ç”Ÿæˆæµ·æŠ¥çš„æ–¹å¼å°±æ˜¯ä½¿ç”¨ Puppeteerï¼Œæ„å»ºä¸€ä¸ª Node.js æœåŠ¡æ¥åšé¡µé¢æˆªå›¾ã€‚</p>
<p data-nodeid="2155">ä¸‹é¢æˆ‘ä»¬æ¥å®ç°ä¸€ä¸ªåå« posterMan çš„æµ·æŠ¥æœåŠ¡ï¼Œæ•´ä½“æŠ€æœ¯é“¾è·¯å¦‚ä¸‹å›¾ï¼š</p>
<p data-nodeid="2156" class=""><img src="https://s0.lgstatic.com/i/image6/M01/25/41/Cgp9HWBZg66ADjAJAAJBHVTqmKw043.png" alt="å›¾ç‰‡4.png" data-nodeid="2160"></p>

<p data-nodeid="2792">æ ¸å¿ƒæŠ€æœ¯æ— å¤–ä¹ä½¿ç”¨ Puppeteerï¼Œè®¿é—®é¡µé¢å¹¶æˆªå›¾ï¼Œè¿™ä¸å‰é¢å‡ ä¸ªåœºæ™¯æ˜¯ä¸€æ ·çš„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p data-nodeid="2793" class="te-preview-highlight"><img src="https://s0.lgstatic.com/i/image6/M01/25/3D/CioPOWBZg8GAX2qJAALAFyJ2lc8362.png" alt="å›¾ç‰‡5.png" data-nodeid="2797"></p>

<p data-nodeid="923">è¿™é‡Œéœ€è¦ç‰¹åˆ«å¼ºè°ƒçš„æ˜¯ï¼Œä¸ºäº†å®ç°æœ€å¥½çš„æ€§èƒ½ï¼Œæˆ‘ä»¬<strong data-nodeid="1037">è®¾è®¡äº†ä¸€ä¸ªé“¾æ¥æ± æ¥å­˜å‚¨ Puppeteer å®ä¾‹</strong>ï¼Œä»¥å¤‡æ‰€éœ€ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p data-nodeid="924" class=""><img src="https://s0.lgstatic.com/i/image6/M00/21/5F/Cgp9HWBUR3WAUmueAAEA26Dx-54108.png" alt="Drawing 3.png" data-nodeid="1040"></p>
<p data-nodeid="925">åœ¨å®ç°ä¸Šï¼Œæˆ‘ä»¬ä¾èµ–<a href="https://www.npmjs.com/package/generic-pool?fileGuid=xxQTRXtVcqtHK6j8" data-nodeid="1044">generic-pool</a>åº“ï¼Œè¿™ä¸ªåº“æä¾›äº† Promise é£æ ¼çš„é€šç”¨æ± ï¼Œå¯ä»¥ç”¨æ¥å¯¹ä¸€äº›é«˜æ¶ˆè€—ã€é«˜æˆæœ¬èµ„æºçš„è°ƒç”¨å®ç°<strong data-nodeid="1050">é˜²æŠ–æˆ–æ‹’ç»æœåŠ¡</strong>èƒ½åŠ›ï¼Œä¸€ä¸ªå…¸å‹åœºæ™¯æ˜¯å¯¹æ•°æ®åº“çš„è¿æ¥ã€‚è¿™é‡Œæˆ‘ä»¬æŠŠå®ƒç”¨äº Puppeteer å®ä¾‹çš„åˆ›å»ºï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š</p>
<pre class="lang-java" data-nodeid="926"><code data-language="java"><span class="hljs-keyword">const</span> puppeteer = require(<span class="hljs-string">'puppeteer'</span>)
<span class="hljs-keyword">const</span> genericPool = require(<span class="hljs-string">'generic-pool'</span>)
<span class="hljs-keyword">const</span> createPuppeteerPool = ({
  <span class="hljs-comment">// pool çš„æœ€å¤§å®¹é‡</span>
  max = <span class="hljs-number">10</span>,
  <span class="hljs-comment">// pool çš„æœ€å°å®¹é‡</span>
  min = <span class="hljs-number">2</span>,
  <span class="hljs-comment">// è¿æ¥åœ¨æ± ä¸­ä¿æŒç©ºé—²è€Œä¸è¢«å›æ”¶çš„æœ€å°æ—¶é—´å€¼</span>
  idleTimeoutMillis = <span class="hljs-number">30000</span>,
  <span class="hljs-comment">// æœ€å¤§ä½¿ç”¨æ•°</span>
  maxUses = <span class="hljs-number">50</span>,
  <span class="hljs-comment">// åœ¨è¿æ¥æ± äº¤ä»˜å®ä¾‹å‰æ˜¯å¦å…ˆç»è¿‡ factory.validate æµ‹è¯•</span>
  testOnBorrow = <span class="hljs-keyword">true</span>,
  puppeteerArgs = {},
  validator = () =&gt; Promise.resolve(<span class="hljs-keyword">true</span>),
  ...otherConfig
} = {}) =&gt; {
  <span class="hljs-keyword">const</span> factory = {
  	<span class="hljs-comment">// åˆ›å»ºå®ä¾‹</span>
    create: () =&gt;
      puppeteer.launch(puppeteerArgs).then(instance =&gt; {
        instance.useCount = <span class="hljs-number">0</span>
        <span class="hljs-keyword">return</span> instance
      }),
    <span class="hljs-comment">// é”€æ¯å®ä¾‹</span>
    destroy: instance =&gt; {
      instance.close()
    },
    <span class="hljs-comment">// éªŒè¯å®ä¾‹å¯ç”¨æ€§</span>
    validate: instance =&gt; {
      <span class="hljs-keyword">return</span> validator(instance).then(valid =&gt;
        <span class="hljs-comment">// maxUses å°äº 0 æˆ–è€… instance ä½¿ç”¨è®¡æ•°å°äº maxUses æ—¶å¯ç”¨</span>
        Promise.resolve(valid &amp;&amp; (maxUses &lt;= <span class="hljs-number">0</span> || instance.useCount &lt; maxUses))
      )
    }
  }
  <span class="hljs-keyword">const</span> config = {
    max,
    min,
    idleTimeoutMillis,
    testOnBorrow,
    ...otherConfig
  }
  <span class="hljs-comment">// åˆ›å»ºè¿æ¥æ± </span>
  <span class="hljs-keyword">const</span> pool = genericPool.createPool(factory, config)
  <span class="hljs-keyword">const</span> genericAcquire = pool.acquire.bind(pool)
  <span class="hljs-comment">// æ± ä¸­èµ„æºè¿æ¥æ—¶è¿›è¡Œçš„æ“ä½œ</span>
  pool.acquire = () =&gt;
    genericAcquire().then(instance =&gt; {
      instance.useCount += <span class="hljs-number">1</span>
      <span class="hljs-keyword">return</span> instance
    })
  pool.use = fn =&gt; {
    let resource
    <span class="hljs-keyword">return</span> pool
      .acquire()
      .then(r =&gt; {
        resource = r
        <span class="hljs-keyword">return</span> r
      })
      .then(fn)
      .then(
        result =&gt; {
          <span class="hljs-comment">// é‡Šæ”¾èµ„æº</span>
          pool.release(resource)
          <span class="hljs-keyword">return</span> result
        },
        err =&gt; {
          pool.release(resource)
          <span class="hljs-keyword">throw</span> err
        }
      )
  }
  <span class="hljs-keyword">return</span> pool
}
<span class="hljs-keyword">module</span>.<span class="hljs-keyword">exports</span> = createPuppeteerPool
</code></pre>
<p data-nodeid="927">ä½¿ç”¨è¿æ¥æ± çš„æ–¹å¼ä¹Ÿå¾ˆç®€å•ï¼Œå¦‚ä¸‹ä»£ç ï¼Œ<code data-backticks="1" data-nodeid="1052">./pool.js</code>ï¼š</p>
<pre class="lang-java" data-nodeid="928"><code data-language="java"><span class="hljs-keyword">const</span> pool = createPuppeteerPool({
  puppeteerArgs: {
    args: config.browserArgs
  }
})
<span class="hljs-keyword">module</span>.<span class="hljs-keyword">exports</span> = pool
</code></pre>
<p data-nodeid="929">æœ‰äº†â€œæ­¦å™¨å¼¹è¯â€ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹æ¸²æŸ“ä¸€ä¸ªé¡µé¢ä¸ºæµ·æŠ¥çš„å…·ä½“é€»è¾‘ã€‚å¦‚ä¸‹ä»£ç æ‰€ç¤º<code data-backticks="1" data-nodeid="1055">render</code>æ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ”¯æŒæ¥å—ä¸€ä¸ª URL ä¹Ÿæ”¯æŒæ¥å—å…·ä½“çš„ HTML å­—ç¬¦ä¸²å»ç”Ÿæˆç›¸åº”æµ·æŠ¥ï¼š</p>
<pre class="lang-java" data-nodeid="930"><code data-language="java"><span class="hljs-comment">// è·å–è¿æ¥æ± </span>
<span class="hljs-keyword">const</span> pool = require(<span class="hljs-string">'./pool'</span>)
<span class="hljs-keyword">const</span> config = require(<span class="hljs-string">'./config'</span>)
<span class="hljs-keyword">const</span> render = (ctx, handleFetchPicoImageError) =&gt;
  <span class="hljs-comment">// ä½¿ç”¨è¿æ¥æ± èµ„æº</span>
  pool.use(async browser =&gt; {
    <span class="hljs-keyword">const</span> { body, query } = ctx.request
    <span class="hljs-comment">// æ‰“å¼€æ–°çš„é¡µé¢</span>
    <span class="hljs-keyword">const</span> page = await browser.newPage()
    <span class="hljs-comment">// æœåŠ¡æ”¯æŒç›´æ¥ä¼ é€’ HTML å­—ç¬¦ä¸²å†…å®¹</span>
    let html = body
		<span class="hljs-comment">// ä»è¯·æ±‚æœåŠ¡çš„ query è·å–é»˜è®¤å‚æ•°</span>
    <span class="hljs-keyword">const</span> {
      width = <span class="hljs-number">300</span>,
      height = <span class="hljs-number">480</span>,
      ratio: deviceScaleFactor = <span class="hljs-number">2</span>,
      type = <span class="hljs-string">'png'</span>,
      filename = <span class="hljs-string">'poster'</span>,
      waitUntil = <span class="hljs-string">'domcontentloaded'</span>,
      quality = <span class="hljs-number">100</span>,
      omitBackground,
      fullPage,
      url,
      useCache = <span class="hljs-string">'true'</span>,
      usePicoAutoJPG = <span class="hljs-string">'true'</span>
    } = query
    let image
    <span class="hljs-keyword">try</span> {
    	<span class="hljs-comment">// è®¾ç½®æµè§ˆå™¨è§†å£</span>
      await page.setViewport({
        width: Number(width),
        height: Number(height),
        deviceScaleFactor: Number(deviceScaleFactor)
      })
      <span class="hljs-keyword">if</span> (html.length &gt; <span class="hljs-number">1.25e6</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> Error(<span class="hljs-string">'image size out of limits, at most 1 MB'</span>)
      }
			<span class="hljs-comment">// è®¿é—® URL é¡µé¢</span>
      await page.goto(url || `data:text/html,${html}`, {
        waitUntil: waitUntil.split(<span class="hljs-string">','</span>)
      })
			<span class="hljs-comment">// è¿›è¡Œæˆªå›¾</span>
      image = await page.screenshot({
        type: type === <span class="hljs-string">'jpg'</span> ? <span class="hljs-string">'jpeg'</span> : type,
        quality: type === <span class="hljs-string">'png'</span> ? undefined : Number(quality),
        omitBackground: omitBackground === <span class="hljs-string">'true'</span>,
        fullPage: fullPage === <span class="hljs-string">'true'</span>
      })
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-keyword">throw</span> error
    }
    ctx.set(<span class="hljs-string">'Content-Type'</span>, `image/${type}`)
    ctx.set(<span class="hljs-string">'Content-Disposition'</span>, `inline; filename=${filename}.${type}`)
    await page.close()
    <span class="hljs-keyword">return</span> image
  })
<span class="hljs-keyword">module</span>.<span class="hljs-keyword">exports</span> = render
</code></pre>
<p data-nodeid="931">è‡³æ­¤ï¼ŒåŸºäº Puppeteer çš„æµ·æŠ¥ç³»ç»Ÿå°±å·²ç»å¼€å‘å®Œæˆäº†ã€‚å®ƒæ˜¯ä¸€ä¸ªå¯¹å¤–çš„ Node.js æœåŠ¡ã€‚</p>
<p data-nodeid="932">æˆ‘ä»¬ä¹Ÿå¯ä»¥ç”Ÿæˆå„ç§è¯­è¨€çš„ SDK å®¢æˆ·ç«¯ï¼Œè°ƒç”¨è¯¥æµ·æŠ¥æœåŠ¡ã€‚æ¯”å¦‚ä¸€ä¸ªç®€å•çš„ Python ç‰ˆ SDK å®¢æˆ·ç«¯å®ç°å¦‚ä¸‹ä»£ç ï¼š</p>
<pre class="lang-java" data-nodeid="933"><code data-language="java"><span class="hljs-function"><span class="hljs-keyword">import</span> requests
class <span class="hljs-title">PosterGenerator</span><span class="hljs-params">(object)</span>:
    <span class="hljs-comment">// ...</span>
    def <span class="hljs-title">generate</span><span class="hljs-params">(self, **kwargs)</span>:
        """
        ç”Ÿæˆæµ·æŠ¥å›¾ç‰‡ï¼Œè¿”å›äºŒè¿›åˆ¶æµ·æŠ¥æ•°æ®
        :param kwargs: æ¸²æŸ“æ—¶éœ€è¦ä¼ é€’çš„å‚æ•°å­—å…¸
        :return: äºŒè¿›åˆ¶å›¾ç‰‡æ•°æ®
        """
        html_content </span>= render(self._syntax, self._template_content, **kwargs)
        url = POSTER_MAN_HA_PROXIES[self._api_env.value]
        <span class="hljs-keyword">try</span>:
        		<span class="hljs-comment">// post è¯·æ±‚æµ·æŠ¥æœåŠ¡</span>
            resp = requests.post(
                url,
                data=html_content.encode(<span class="hljs-string">'utf8'</span>),
                headers={
                    <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'text/plain'</span>
                },
                timeout=<span class="hljs-number">60</span>,
                params=self.config
            )
        except RequestException as err:
            <span class="hljs-function">raise <span class="hljs-title">GenerateFailed</span><span class="hljs-params">(err.message)</span>
        <span class="hljs-keyword">else</span>:
            <span class="hljs-keyword">if</span> not resp:
                raise <span class="hljs-title">GenerateFailed</span><span class="hljs-params">(u<span class="hljs-string">"Failed to generate poster, got NOTHING from poster-man"</span>)</span>
            <span class="hljs-keyword">try</span>:
                resp.<span class="hljs-title">raise_for_status</span><span class="hljs-params">()</span>
            except requests.HTTPError as err:
                raise <span class="hljs-title">GenerateFailed</span><span class="hljs-params">(err.message)</span>
            <span class="hljs-keyword">else</span>:
                return resp.content
</span></code></pre>
<h3 data-nodeid="934">æ€»ç»“</h3>
<p data-nodeid="935" class="">è¿™ä¸€è®²æˆ‘ä»¬ä»‹ç»äº† Puppeteer çš„å„ç§åº”ç”¨åœºæ™¯ï¼Œå¹¶é‡ç‚¹ä»‹ç»äº†ä¸€ä¸ªåŸºäº Puppeteer è®¾è®¡å®ç°çš„æµ·æŠ¥æœåŠ¡ç³»ç»Ÿã€‚</p>
<p data-nodeid="936">æœ¬è®²å†…å®¹æ€»ç»“å¦‚ä¸‹ï¼š</p>
<p data-nodeid="937"><img src="https://s0.lgstatic.com/i/image6/M00/21/60/Cgp9HWBUR8mAUFYXAALdEMP1LzI390.png" alt="Drawing 4.png" data-nodeid="1064"></p>
<p data-nodeid="938" class="">é€šè¿‡è¿™å‡ è®²çš„å­¦ä¹ ï¼Œå¸Œæœ›ä½ èƒ½å¤Ÿä»å®è·µå‡ºå‘ï¼Œå¯¹ Node.js è½åœ°åº”ç”¨æœ‰ä¸€ä¸ªæ›´å…¨é¢çš„è®¤çŸ¥ã€‚è¿™é‡Œæˆ‘ä¹Ÿç»™å¤§å®¶ç•™ä¸€ä¸ªæ€è€ƒé¢˜ï¼Œä½ å¹³æ—¶å¼€å‘ä¸­ä½¿ç”¨è¿‡ Puppeteer å—ï¼Ÿä½ è¿˜èƒ½åŸºäº Puppeteer æƒ³åˆ°å“ªäº›ä½¿ç”¨åœºæ™¯å‘¢ï¼Ÿæ¬¢è¿åœ¨ç•™è¨€åŒºå’Œæˆ‘åˆ†äº«ä½ çš„ç»éªŒã€‚</p>

---

### ç²¾é€‰è¯„è®º

##### \*èªï¼š

> ç”¨ puppeteer æ¥åšçˆ¬è™«é¡¹ç›®

##### \*é–ï¼š

> è¯·é—®æœ€åæ€ç»´å¯¼å›¾é‡Œé¢çš„è‹±æ–‡å­—ä½“æ˜¯ä»€ä¹ˆå‘€ï¼Ÿå¥½å¥½çœ‹ ğŸ˜

###### &nbsp;&nbsp;&nbsp; ç¼–è¾‘å›å¤ï¼š

> &nbsp;&nbsp;&nbsp; æ˜¯ XMind ä¸­çš„ Segoe Print å“¦~

##### \*ç‚œï¼š

> å‰å‡ å¤©é¢è¯•è…¾è®¯,è¢«é—®åˆ°å¦‚æœä¼˜åŒ– puppeteer,é“¾æ¥æ± è¿˜æ˜¯æ²¡æœ‰ç­”ä¸Šæ¥.

###### &nbsp;&nbsp;&nbsp; ç¼–è¾‘å›å¤ï¼š

> &nbsp;&nbsp;&nbsp; å¤šç§¯ç´¯ä¸€ä¸‹ç»éªŒï¼Œä¸‹æ¬¡ä¸€å®š OK çš„ï¼

##### \*\*3336ï¼š

> è€å¸ˆè®²çš„æ¡ˆä¾‹éƒ½æœ‰ä»£ç ä»“åº“å˜›

###### &nbsp;&nbsp;&nbsp; ç¼–è¾‘å›å¤ï¼š

> &nbsp;&nbsp;&nbsp; æ³¨æ„çœ‹æ–‡ä¸­åŠ è¶…é“¾æ¥çš„åœ°æ–¹ï¼Œç›¸å…³åœ°å€éƒ½åœ¨å‘~
