<p data-nodeid="1801" class="">è¿™ä¸€è®²ï¼Œæˆ‘ä»¬å°†å¯¹ä»£ç æ‹†åˆ†å’ŒæŒ‰éœ€åŠ è½½è¿™ä¸€è¯é¢˜è¿›è¡Œè§£æã€‚</p>
<p data-nodeid="1802">éšç€ Webpack ç­‰æ„å»ºå·¥å…·çš„èƒ½åŠ›è¶Šæ¥è¶Šå¼ºï¼Œå¼€å‘è€…åœ¨æ„å»ºé˜¶æ®µå¯ä»¥éšå¿ƒæ‰€æ¬²æ‰“é€ é¡¹ç›®æµç¨‹ï¼Œä»£ç æ‹†åˆ†å’ŒæŒ‰éœ€åŠ è½½æŠ€æœ¯åœ¨ä¸šç•Œæ›å…‰é‡ä¹Ÿè¶Šæ¥è¶Šé«˜ã€‚äº‹å®ä¸Šï¼Œä»£ç æ‹†åˆ†å’ŒæŒ‰éœ€åŠ è½½çš„è®¾è®¡å†³å®šç€å·¥ç¨‹åŒ–æ„å»ºçš„ç»“æœï¼Œè¿™å°†ç›´æ¥å½±å“åº”ç”¨çš„æ€§èƒ½è¡¨ç°ï¼Œå› ä¸ºåˆç†çš„åŠ è½½æ—¶æœºå’Œä»£ç æ‹†åˆ†èƒ½å¤Ÿä½¿åˆå§‹ä»£ç ä½“ç§¯æ›´å°ï¼Œé¡µé¢åŠ è½½æ›´å¿«ã€‚å› æ­¤ï¼Œå¦‚ä½•åˆç†è®¾è®¡ä»£ç æ‹†åˆ†å’ŒæŒ‰éœ€åŠ è½½ï¼Œæ˜¯å¯¹ä¸€ä¸ªé¡¹ç›®æ¶æ„æƒ…å†µçš„ç›´æ¥è€ƒé‡ã€‚</p>
<p data-nodeid="1803">ä¸‹é¢æˆ‘ä»¬ä»ä»£ç æ‹†åˆ†å’ŒæŒ‰éœ€åŠ è½½çš„åœºæ™¯å…¥æ‰‹ï¼Œä¸€åŒä½“ä¼šè¿™ä¸€æŠ€æœ¯æ‰‹æ®µçš„å¿…è¦æ€§å’Œä¸šåŠ¡ä»·å€¼ã€‚</p>
<h3 data-nodeid="1804">ä»£ç æ‹†åˆ†å’ŒæŒ‰éœ€åŠ è½½åœºæ™¯</h3>
<p data-nodeid="1805">æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªæ¡ˆä¾‹ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºåœºæ™¯ï¼šç‚¹å‡»å·¦å›¾æ’­æ”¾æŒ‰é’®åï¼Œé¡µé¢å‡ºç°è§†é¢‘åˆ—è¡¨æµ®å±‚ï¼ˆå¦‚å³ä¾§å›¾æ‰€ç¤ºï¼Œç±»ä¼¼å•é¡µåº”ç”¨ï¼Œè§†é¢‘åˆ—è¡¨ä»ä¸ºåŒä¸€é¡µé¢ï¼‰ã€‚è§†é¢‘åˆ—è¡¨æµ®å±‚åŒ…å«äº†æ»šåŠ¨å¤„ç†ã€è§†é¢‘æ’­æ”¾ç­‰å¤šé¡¹å¤æ‚é€»è¾‘ï¼Œå› æ­¤è¿™ä¸ªæµ®å±‚å¯¹åº”çš„è„šæœ¬åœ¨é¡µé¢åˆå§‹åŒ–æ—¶ï¼Œä¸éœ€è¦è¢«åŠ è½½ã€‚é‚£ä¹ˆåœ¨å·¥ç¨‹ä¸Šï¼Œæˆ‘ä»¬éœ€è¦å¯¹è§†é¢‘æµ®å±‚è„šæœ¬å•ç‹¬è¿›è¡Œæ‹†åˆ†ï¼Œå’Œåˆå§‹åŒ–è„šæœ¬è¿›è¡Œåˆ†ç¦»ã€‚å½“ç”¨æˆ·ç‚¹å‡»æµ®å±‚è§¦å‘æŒ‰é’®åï¼Œæ‰§è¡ŒæŸä¸€å•ç‹¬éƒ¨åˆ†è„šæœ¬çš„è¯·æ±‚ã€‚</p>
<p data-nodeid="1806"><img src="https://s0.lgstatic.com/i/image/M00/8D/42/Ciqc1F_9Bu2AB133AAluXVg4Mlw240.png" alt="Drawing 0.png" data-nodeid="1974"></p>
<p data-nodeid="1807">è¿™å…¶å®æ˜¯ä¸€ä¸ªæˆ‘æ¥æ‰‹å¹¶é‡æ„è¿‡çš„çœŸå®çº¿ä¸Šæ¡ˆä¾‹ï¼Œé€šè¿‡åæœŸå¯¹é¡µé¢äº¤äº’çš„ç»Ÿè®¡æ•°æ®åˆ†æå‘ç°ï¼Œç”¨æˆ·ç‚¹å‡»è§¦å‘è§†é¢‘æµ®å±‚å‡ºç°æŒ‰é’®çš„æ¦‚ç‡åªæœ‰ 10% å·¦å³ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¤§éƒ¨åˆ†ç”¨æˆ·ï¼ˆ90%ï¼‰å¹¶ä¸ä¼šçœ‹åˆ°è¿™ä¸€æµ®å±‚ï¼Œä¹Ÿå°±ä¸éœ€è¦å¯¹ç›¸å…³è„šæœ¬è¿›è¡ŒåŠ è½½æ‰§è¡Œï¼Œå› æ­¤å»¶è¿ŸæŒ‰éœ€åŠ è½½è®¾è®¡æ˜¯æœ‰ç»Ÿè®¡æ•°æ®æ”¯æŒçš„ã€‚ç°åœ¨ä½ å·²ç»äº†è§£äº†è¿™ä¸ªåœºæ™¯ï¼Œä¸‹é¢æˆ‘ä»¬ä»æŠ€æœ¯ç¯èŠ‚è¯¦ç»†å±•å¼€ã€‚</p>
<h3 data-nodeid="1808">ä»£ç æ‹†åˆ†å’ŒæŒ‰éœ€æŠ€æœ¯å®ç°</h3>
<h4 data-nodeid="1809">æŒ‰éœ€åŠ è½½å’ŒæŒ‰éœ€æ‰“åŒ…åŒºåˆ†</h4>
<p data-nodeid="1810">ä»æŠ€æœ¯è§’åº¦ä»‹ç»æŒ‰éœ€åŠ è½½æ¦‚å¿µå‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆå’Œå¦å¤–ä¸€ä¸ªæ¦‚å¿µï¼š<strong data-nodeid="1983">æŒ‰éœ€æ‰“åŒ…</strong>ï¼Œè¿›è¡ŒåŒºåˆ†ã€‚äº‹å®ä¸Šï¼Œå½“å‰ç¤¾åŒºå¯¹äºæŒ‰éœ€åŠ è½½å’ŒæŒ‰éœ€æ‰“åŒ…å¹¶æ²¡æœ‰ä¸€ä¸ªå‡†ç¡®çš„å‘½åä¸Šçš„åˆ’åˆ†çº¦å®šã€‚å› æ­¤ä»ä¸¤è€…å‘½åä¸Šï¼Œéš¾ä»¥åŒºåˆ†å…¶å®é™…å«ä¹‰ã€‚</p>
<p data-nodeid="1811">å…¶å®ï¼Œ<strong data-nodeid="1993">æŒ‰éœ€åŠ è½½è¡¨ç¤ºä»£ç æ¨¡å—åœ¨äº¤äº’éœ€è¦æ—¶ï¼ŒåŠ¨æ€å¼•å…¥</strong>ï¼›è€Œ<strong data-nodeid="1994">æŒ‰éœ€æ‰“åŒ…é’ˆå¯¹ç¬¬ä¸‰æ–¹ä¾èµ–åº“ï¼ŒåŠä¸šåŠ¡æ¨¡å—ï¼Œåªæ‰“åŒ…çœŸæ­£åœ¨è¿è¡Œæ—¶å¯èƒ½ä¼šéœ€è¦çš„ä»£ç </strong>ã€‚</p>
<p data-nodeid="1812">æˆ‘ä»¬ä¸å¦¨å…ˆè¯´æ˜æŒ‰éœ€æ‰“åŒ…çš„æ¦‚å¿µå’Œå®æ–½æ–¹æ³•ï¼Œç›®å‰æŒ‰éœ€æ‰“åŒ…ä¸€èˆ¬é€šè¿‡ä¸¤ç§æ–¹å¼è¿›è¡Œï¼š</p>
<ul data-nodeid="1813">
<li data-nodeid="1814">
<p data-nodeid="1815">ä½¿ç”¨ ES Module æ”¯æŒçš„ Tree Shaking æ–¹æ¡ˆï¼Œåœ¨ä½¿ç”¨æ„å»ºå·¥å…·æ‰“åŒ…æ—¶ï¼Œå®ŒæˆæŒ‰éœ€æ‰“åŒ…ï¼›</p>
</li>
<li data-nodeid="1816">
<p data-nodeid="1817">ä½¿ç”¨ä»¥<code data-backticks="1" data-nodeid="1998">babel-plugin-import</code>ä¸ºä¸»çš„ Babel æ’ä»¶ï¼Œå®ç°è‡ªåŠ¨æŒ‰éœ€æ‰“åŒ… ã€‚</p>
</li>
</ul>
<p data-nodeid="1818"><strong data-nodeid="2003">Tree Shaking å®ç°æŒ‰éœ€æ‰“åŒ…</strong></p>
<p data-nodeid="1819">æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªåœºæ™¯ï¼Œå‡è®¾ä¸šåŠ¡ä¸­ä½¿ç”¨ antd çš„ Button ç»„ä»¶ï¼š</p>
<pre class="lang-java" data-nodeid="1820"><code data-language="java"><span class="hljs-keyword">import</span> { Button } from <span class="hljs-string">'antd'</span>;
</code></pre>
<p data-nodeid="1821">è¿™æ ·çš„å¼•ç”¨ï¼Œä¼šä½¿å¾—æœ€ç»ˆæ‰“åŒ…çš„ä»£ç ä¸­åŒ…å«æ‰€æœ‰ antd å¯¼å‡ºæ¥çš„å†…å®¹ã€‚å‡è®¾åº”ç”¨ä¸­å¹¶æ²¡æœ‰ä½¿ç”¨ antd æä¾›çš„ TimePicker ç»„ä»¶ï¼Œé‚£ä¹ˆå¯¹äºæ‰“åŒ…ç»“æœæ¥è¯´ï¼Œæ— ç–‘å¢åŠ äº†ä»£ç ä½“ç§¯ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœç»„ä»¶åº“æä¾›äº† ES Module ç‰ˆæœ¬ï¼Œå¹¶å¼€å¯äº† Tree Shakingï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡â€œæ‘‡æ ‘â€ç‰¹æ€§ï¼Œå°†ä¸ä¼šè¢«ä½¿ç”¨çš„ä»£ç åœ¨æ„å»ºé˜¶æ®µç§»é™¤ã€‚</p>
<p data-nodeid="1822">Webpack å¯ä»¥åœ¨ package.json ä¸­è®¾ç½®<code data-backticks="1" data-nodeid="2007">sideEffects: false</code>ã€‚æˆ‘ä»¬åœ¨ <a href="https://github.com/ant-design/ant-design/blob/master/package.json#L38" data-nodeid="2011">antd æºç </a>å½“ä¸­å¯ä»¥æ‰¾åˆ°ï¼ˆ<a href="https://github.com/ant-design/ant-design/pull/10043" data-nodeid="2015">ç›¸å…³ chore commit</a>ï¼‰ï¼š</p>
<pre class="lang-java" data-nodeid="1823"><code data-language="java"><span class="hljs-string">"sideEffects"</span>: [
	<span class="hljs-string">"dist/*"</span>,
	<span class="hljs-string">"es/**/style/*"</span>,
	<span class="hljs-string">"lib/**/style/*"</span>,
	<span class="hljs-string">"*.less"</span>
],
</code></pre>
<p data-nodeid="1824">æŒ‡å®šå‰¯ä½œç”¨æ¨¡å—â€”â€”è¿™æ˜¯ä¸€ç§å€¼å¾—æ¨èçš„å¼€å‘ä¹ æƒ¯ï¼Œå»ºè®®ä½ æ³¨æ„ Tree Shaking çš„ä½¿ç”¨ï¼Œæœ€å¥½å®é™…è§‚å¯Ÿä¸€ä¸‹æ‰“åŒ…ç»“æœã€‚</p>
<p data-nodeid="1825"><strong data-nodeid="2021">å­¦ä¹ ç¼–å†™ Babel æ’ä»¶ï¼Œå®ç°æŒ‰éœ€æ‰“åŒ…</strong></p>
<p data-nodeid="1826">å¦‚æœç¬¬ä¸‰æ–¹åº“ä¸æ”¯æŒ Tree Shakingï¼Œæˆ‘ä»¬ä¾ç„¶å¯ä»¥<strong data-nodeid="2027">é€šè¿‡ Babel æ’ä»¶ï¼Œæ”¹å˜ä¸šåŠ¡ä»£ç ä¸­å¯¹æ¨¡å—çš„å¼•ç”¨è·¯å¾„</strong>æ¥å®ç°æŒ‰éœ€æ‰“åŒ…ã€‚</p>
<p data-nodeid="1827">æ¯”å¦‚ <a href="https://github.com/ant-design/babel-plugin-import" data-nodeid="2031">babel-plugin-import</a> è¿™ä¸ªæ’ä»¶ï¼Œå®ƒæ˜¯ antd å›¢é˜Ÿæ¨å‡ºçš„ä¸€ä¸ª Babel æ’ä»¶ï¼Œæˆ‘ä»¬é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥ç†è§£å®ƒçš„åŸç†ï¼Œæ¯”å¦‚ï¼š</p>
<pre class="lang-java" data-nodeid="1828"><code data-language="java"><span class="hljs-keyword">import</span> {Button as Btn,Input,TimePicker,ConfigProvider,Haaaa} from <span class="hljs-string">'antd'</span>
</code></pre>
<p data-nodeid="1829">è¿™æ ·çš„ä»£ç å°±å¯ä»¥è¢«ç¼–è¯‘ä¸ºï¼š</p>
<pre class="lang-java" data-nodeid="1830"><code data-language="java"><span class="hljs-keyword">import</span> _ConfigProvider from <span class="hljs-string">"antd/lib/config-provider"</span>;
<span class="hljs-keyword">import</span> _Button from <span class="hljs-string">"antd/lib/button"</span>;
<span class="hljs-keyword">import</span> _Input from <span class="hljs-string">"antd/lib/input"</span>;
<span class="hljs-keyword">import</span> _TimePicker from <span class="hljs-string">"antd/lib/time-picker"</span>;
</code></pre>
<p data-nodeid="1831">ç¼–å†™ä¸€ä¸ªç±»ä¼¼çš„ Babel æ’ä»¶ä¹Ÿä¸æ˜¯ä¸€ä»¶éš¾äº‹ï¼ŒBabel æ’ä»¶æ ¸å¿ƒä¾èµ–äºå¯¹ AST çš„è§£æå’Œæ“ä½œã€‚å®ƒæœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨ Babel å¯¹ AST è¯­æ³•æ ‘è¿›è¡Œè½¬æ¢çš„è¿‡ç¨‹ä¸­ä»‹å…¥ï¼Œé€šè¿‡ç›¸åº”çš„æ“ä½œï¼Œæœ€ç»ˆè®©ç”Ÿæˆçš„ç»“æœå‘ç”Ÿæ”¹å˜ã€‚</p>
<p data-nodeid="1832">Babel å·²ç»å†…ç½®äº†å‡ ä¸ªæ ¸å¿ƒåˆ†æã€æ“ä½œ AST çš„å·¥å…·é›†ï¼ŒBabel æ’ä»¶é€šè¿‡<strong data-nodeid="2040">è§‚å¯Ÿè€… + è®¿é—®è€…æ¨¡å¼</strong>ï¼Œå¯¹ AST èŠ‚ç‚¹ç»Ÿä¸€éå†ï¼Œå› æ­¤å…·å¤‡äº†è‰¯å¥½çš„æ‰©å±•æ€§å’Œçµæ´»æ€§ã€‚æ¯”å¦‚è¿™æ®µä»£ç ï¼š</p>
<pre class="lang-java" data-nodeid="1833"><code data-language="java">   <span class="hljs-keyword">import</span> {Button as Btn, Input} from <span class="hljs-string">'antd'</span>
</code></pre>
<p data-nodeid="1834">è¿™æ ·çš„ä»£ç ï¼Œç»è¿‡ Babel AST åˆ†æåï¼Œå¾—åˆ°ç»“æ„ï¼š</p>
<pre class="lang-java" data-nodeid="1835"><code data-language="java">{
    <span class="hljs-string">"type"</span>: <span class="hljs-string">"ImportDeclaration"</span>,
    <span class="hljs-string">"specifiers"</span>: [
        {
            <span class="hljs-string">"type"</span>: <span class="hljs-string">"ImportSpecifier"</span>,
            <span class="hljs-string">"imported"</span>: {
                <span class="hljs-string">"type"</span>: <span class="hljs-string">"Identifier"</span>,
                <span class="hljs-string">"loc"</span>: {
                    <span class="hljs-string">"identifierName"</span>: <span class="hljs-string">"Button"</span>
                },
                <span class="hljs-string">"name"</span>: <span class="hljs-string">"Button"</span>
            },
            <span class="hljs-string">"importKind"</span>: <span class="hljs-keyword">null</span>,
            <span class="hljs-string">"local"</span>: {
                <span class="hljs-string">"type"</span>: <span class="hljs-string">"Identifier"</span>,
                <span class="hljs-string">"loc"</span>: {
                    <span class="hljs-string">"identifierName"</span>: <span class="hljs-string">"Btn"</span>
                },
                <span class="hljs-string">"name"</span>: <span class="hljs-string">"Btn"</span>
            }
        },
        {
            <span class="hljs-string">"type"</span>: <span class="hljs-string">"ImportSpecifier"</span>,
            <span class="hljs-string">"imported"</span>: {
                <span class="hljs-string">"type"</span>: <span class="hljs-string">"Identifier"</span>,
                <span class="hljs-string">"loc"</span>: {
                    <span class="hljs-string">"identifierName"</span>: <span class="hljs-string">"Input"</span>
                },
                <span class="hljs-string">"name"</span>: <span class="hljs-string">"Input"</span>
            },
            <span class="hljs-string">"importKind"</span>: <span class="hljs-keyword">null</span>,
            <span class="hljs-string">"local"</span>: {
                <span class="hljs-string">"type"</span>: <span class="hljs-string">"Identifier"</span>,
                <span class="hljs-string">"start"</span>: <span class="hljs-number">23</span>,
                <span class="hljs-string">"end"</span>: <span class="hljs-number">28</span>,
                <span class="hljs-string">"loc"</span>: {
                    <span class="hljs-string">"identifierName"</span>: <span class="hljs-string">"Input"</span>
                },
                <span class="hljs-string">"name"</span>: <span class="hljs-string">"Input"</span>
            }
        }
    ],
    <span class="hljs-string">"importKind"</span>: <span class="hljs-string">"value"</span>,
    <span class="hljs-string">"source"</span>: {
        <span class="hljs-string">"type"</span>: <span class="hljs-string">"StringLiteral"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-string">"antd"</span>
    }
}
</code></pre>
<p data-nodeid="1836">é€šè¿‡ä¸Šè¿°ç»“æ„ï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“å®ç°éå† specifiers å±æ€§ï¼Œè‡³äºæ›´æ”¹æœ€åä»£ç çš„ import éƒ¨åˆ†ï¼Œä½ å¯ä»¥å‚è€ƒ <a href="https://github.com/ant-design/babel-plugin-import/blob/master/src/Plugin.js" data-nodeid="2045">babel-plugin-import ç›¸å…³å¤„ç†é€»è¾‘</a>ã€‚</p>
<p data-nodeid="1837">é¦–å…ˆé€šè¿‡<code data-backticks="1" data-nodeid="2048">buildExpressionHandler</code>æ–¹æ³•å¯¹ import è·¯å¾„è¿›è¡Œæ”¹å†™ï¼š</p>
<pre class="lang-java" data-nodeid="1838"><code data-language="java">buildExpressionHandler(node, props, path, state) {
    <span class="hljs-comment">// è·å–æ–‡ä»¶</span>
    <span class="hljs-keyword">const</span> file = (path &amp;&amp; path.hub &amp;&amp; path.hub.file) || (state &amp;&amp; state.file);
    <span class="hljs-keyword">const</span> { types } = <span class="hljs-keyword">this</span>;
    <span class="hljs-keyword">const</span> pluginState = <span class="hljs-keyword">this</span>.getPluginState(state);
    <span class="hljs-comment">// è¿›è¡Œéå†</span>
    props.forEach(prop =&gt; {
      <span class="hljs-keyword">if</span> (!types.isIdentifier(node[prop])) <span class="hljs-keyword">return</span>;
      <span class="hljs-keyword">if</span> (
        pluginState.specified[node[prop].name] &amp;&amp;
        types.isImportSpecifier(path.scope.getBinding(node[prop].name).path)
      ) {
        <span class="hljs-comment">// ä¿®æ”¹è·¯å¾„å†…å®¹</span>
        node[prop] = <span class="hljs-keyword">this</span>.importMethod(pluginState.specified[node[prop].name], file, pluginState); <span class="hljs-comment">// eslint-disable-line</span>
      }
    });
}
</code></pre>
<p data-nodeid="1839"><code data-backticks="1" data-nodeid="2050">buildExpressionHandler</code>æ–¹æ³•ä¾èµ–<code data-backticks="1" data-nodeid="2052">importMethod</code>æ–¹æ³•ï¼š</p>
<pre class="lang-java" data-nodeid="1840"><code data-language="java">importMethod(methodName, file, pluginState) {
    <span class="hljs-keyword">if</span> (!pluginState.selectedMethods[methodName]) {
      <span class="hljs-keyword">const</span> { style, libraryDirectory } = <span class="hljs-keyword">this</span>;
      <span class="hljs-comment">// è·å–æ‰§è¡Œæ–¹æ³•å</span>
      <span class="hljs-keyword">const</span> transformedMethodName = <span class="hljs-keyword">this</span>.camel2UnderlineComponentName <span class="hljs-comment">// eslint-disable-line</span>
        ? transCamel(methodName, <span class="hljs-string">'_'</span>)
        : <span class="hljs-keyword">this</span>.camel2DashComponentName
        ? transCamel(methodName, <span class="hljs-string">'-'</span>)
        : methodName;
      <span class="hljs-comment">// è·å–ç›¸åº”è·¯å¾„</span>
      <span class="hljs-keyword">const</span> path = winPath(
        <span class="hljs-keyword">this</span>.customName
          ? <span class="hljs-keyword">this</span>.customName(transformedMethodName, file)
          : join(<span class="hljs-keyword">this</span>.libraryName, libraryDirectory, transformedMethodName, <span class="hljs-keyword">this</span>.fileName), <span class="hljs-comment">// eslint-disable-line</span>
      );
      pluginState.selectedMethods[methodName] = <span class="hljs-keyword">this</span>.transformToDefaultImport <span class="hljs-comment">// eslint-disable-line</span>
        ? addDefault(file.path, path, { nameHint: methodName })
        : addNamed(file.path, methodName, path);
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.customStyleName) {
        <span class="hljs-keyword">const</span> stylePath = winPath(<span class="hljs-keyword">this</span>.customStyleName(transformedMethodName));
        addSideEffect(file.path, `${stylePath}`);
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.styleLibraryDirectory) {
        <span class="hljs-keyword">const</span> stylePath = winPath(
          join(<span class="hljs-keyword">this</span>.libraryName, <span class="hljs-keyword">this</span>.styleLibraryDirectory, transformedMethodName, <span class="hljs-keyword">this</span>.fileName),
        );
        addSideEffect(file.path, `${stylePath}`);
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (style === <span class="hljs-keyword">true</span>) {
        addSideEffect(file.path, `${path}/style`);
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (style === <span class="hljs-string">'css'</span>) {
        addSideEffect(file.path, `${path}/style/css`);
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (typeof style === <span class="hljs-string">'function'</span>) {
        <span class="hljs-keyword">const</span> stylePath = style(path, file);
        <span class="hljs-keyword">if</span> (stylePath) {
          addSideEffect(file.path, stylePath);
        }
      }
    }
    <span class="hljs-keyword">return</span> { ...pluginState.selectedMethods[methodName] };
}
</code></pre>
<p data-nodeid="1841"><code data-backticks="1" data-nodeid="2054">importMethod</code>æ–¹æ³•è°ƒç”¨äº†<code data-backticks="1" data-nodeid="2056">@babel/helper-module-imports</code>ä¸­çš„<code data-backticks="1" data-nodeid="2058">addSideEffect</code>æ–¹æ³•æ‰§è¡Œè·¯å¾„çš„è½¬æ¢æ“ä½œã€‚<code data-backticks="1" data-nodeid="2060">addSideEffect</code>æ–¹æ³•åœ¨æºç ä¸­é€šè¿‡å®ä¾‹åŒ–ä¸€ä¸ª Import Injectorï¼Œå¹¶è°ƒç”¨å®ä¾‹æ–¹æ³•å®Œæˆäº† AST è½¬æ¢ï¼Œå…·ä½“æºç å¯ä»¥å‚è€ƒï¼š<a href="https://github.com/babel/babel/blob/eea156b2cb8deecfcf82d52aa1b71ba4995c7d68/packages/babel-helper-module-imports/src/index.js" data-nodeid="2064">babel-helper-module-imports</a>ã€‚</p>
<p data-nodeid="1842">ç°åœ¨æˆ‘ä»¬å·²ç»çœ‹å®Œäº†æŒ‰éœ€åŠ è½½æ‰“åŒ…å†…å®¹ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬çœ‹çœ‹åŠ¨æ€å¯¼å…¥ä»¥åŠæŒ‰éœ€åŠ è½½è¿™ä¸ªé‡è¦æ¦‚å¿µã€‚</p>
<h4 data-nodeid="1843">â€œé‡æ–°è®¤è¯†â€ dynamic importï¼ˆåŠ¨æ€å¯¼å…¥ï¼‰</h4>
<p data-nodeid="1844">ES module æ— ç–‘åœ¨å·¥ç¨‹åŒ–æ–¹é¢ç»™å‰ç«¯æ’ä¸Šäº†ä¸€åŒèµ·é£çš„ç¿…è†€ã€‚æº¯æºå†å²æˆ‘ä»¬å‘ç°ï¼šæ—©æœŸ import æ˜¯å®Œå…¨é™æ€åŒ–çš„ï¼Œè€Œå¦‚ä»Š dynamic import çš„ææ¡ˆæ—©å·²æ¨ªç©ºå‡ºä¸–ï¼Œç›®å‰å·²ç»è¿›å…¥äº† stage 4 é˜¶æ®µã€‚dynamic import ç®€å•ç¿»è¯‘ä¸ºåŠ¨æ€å¯¼å…¥ï¼Œä»åå­—ä¸Šçœ‹ï¼Œæˆ‘ä»¬å°±èƒ½çŸ¥æ™“è¿™ä¸ªæ–°ç‰¹æ€§å’ŒæŒ‰éœ€åŠ è½½å¯†ä¸å¯åˆ†ã€‚ä½†åœ¨æ·±å…¥è®²è§£ dynamic import ä¹‹å‰ï¼Œæˆ‘æƒ³å…ˆä»é™æ€å¯¼å…¥è¯´èµ·ï¼Œä»¥å¸®åŠ©ä½ å…¨æ–¹ä½åœ°ç†è§£ã€‚</p>
<p data-nodeid="1845"><strong data-nodeid="2072">é™æ€å¯¼å…¥çš„æ€§èƒ½ä¼˜åŠ£</strong></p>
<p data-nodeid="1846">æ ‡å‡†ç”¨æ³•çš„ import å±äºé™æ€å¯¼å…¥ï¼Œå®ƒåªæ”¯æŒä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„ module specifierï¼ˆæ¨¡å—è·¯å¾„å£°æ˜ï¼‰ï¼Œè¿™æ ·çš„ç‰¹æ€§ä¼šä½¿æ‰€æœ‰<strong data-nodeid="2078">è¢« import çš„æ¨¡å—åœ¨åŠ è½½æ—¶å°±è¢«ç¼–è¯‘</strong>ã€‚ä»æŸäº›è§’åº¦çœ‹ï¼Œè¿™ç§åšæ³•å¯¹äºç»å¤§å¤šæ•°åœºæ™¯æ¥è¯´æ€§èƒ½æ˜¯å‹å¥½çš„ï¼Œå› ä¸ºè¿™æ„å‘³ç€å¯¹å·¥ç¨‹ä»£ç çš„é™æ€åˆ†ææˆä¸ºå¯èƒ½ï¼Œè¿›è€Œä½¿å¾—ç±»ä¼¼ tree-shaking çš„æŠ€æœ¯æœ‰äº†åº”ç”¨ç©ºé—´ã€‚</p>
<p data-nodeid="1847">ä½†æ˜¯å¯¹äºä¸€äº›ç‰¹æ®Šåœºæ™¯ï¼Œé™æ€å¯¼å…¥ä¹Ÿå¯èƒ½æˆä¸ºæ€§èƒ½çš„çŸ­æ¿ï¼Œæ¯”å¦‚ï¼Œå½“æˆ‘ä»¬éœ€è¦ï¼š</p>
<ul data-nodeid="1848">
<li data-nodeid="1849">
<p data-nodeid="1850">æŒ‰éœ€åŠ è½½ä¸€ä¸ªæ¨¡å—ï¼›</p>
</li>
<li data-nodeid="1851">
<p data-nodeid="1852">æŒ‰è¿è¡Œäº‹ä»¶é€‰å®šä¸€ä¸ªæ¨¡å—ã€‚</p>
</li>
</ul>
<p data-nodeid="1853">æ­¤æ—¶ï¼Œdynamic import å°±å˜å¾—å°¤ä¸ºé‡è¦ã€‚æ¯”å¦‚åœ¨<strong data-nodeid="2087">æµè§ˆå™¨ä¾§ï¼Œæ ¹æ®ç”¨æˆ·çš„ç³»ç»Ÿè¯­è¨€é€‰æ‹©åŠ è½½ä¸åŒçš„è¯­è¨€æ¨¡å—ï¼Œæ ¹æ®ç”¨æˆ·çš„æ“ä½œå»åŠ è½½ä¸åŒçš„å†…å®¹é€»è¾‘</strong>ã€‚</p>
<p data-nodeid="1854"><a href="https://developer.mozilla.org/en-us/docs/web/javascript/reference/statements/import" data-nodeid="2090">MDN æ–‡æ¡£</a>ä¸­ç»™å‡ºäº† dynamic import æ›´å…·ä½“çš„ä½¿ç”¨åœºæ™¯ï¼š</p>
<ul data-nodeid="8619">
<li data-nodeid="8620">
<p data-nodeid="8621">é™æ€å¯¼å…¥çš„æ¨¡å—å¾ˆæ˜æ˜¾é™ä½äº†ä»£ç çš„åŠ è½½é€Ÿåº¦ä¸”è¢«ä½¿ç”¨çš„å¯èƒ½æ€§å¾ˆä½ï¼Œæˆ–è€…å¹¶ä¸éœ€è¦é©¬ä¸Šä½¿ç”¨å®ƒï¼›</p>
</li>
<li data-nodeid="8622">
<p data-nodeid="8623">é™æ€å¯¼å…¥çš„æ¨¡å—å¾ˆæ˜æ˜¾å ç”¨äº†å¤§é‡ç³»ç»Ÿå†…å­˜ä¸”è¢«ä½¿ç”¨çš„å¯èƒ½æ€§å¾ˆä½ï¼›</p>
</li>
<li data-nodeid="8624">
<p data-nodeid="8625">è¢«å¯¼å…¥çš„æ¨¡å—åœ¨åŠ è½½æ—¶å¹¶ä¸å­˜åœ¨ï¼Œéœ€è¦å¼‚æ­¥è·å–ï¼›</p>
</li>
<li data-nodeid="8626">
<p data-nodeid="8627">å¯¼å…¥æ¨¡å—çš„è¯´æ˜ç¬¦ï¼Œéœ€è¦åŠ¨æ€æ„å»ºï¼ˆé™æ€å¯¼å…¥åªèƒ½ä½¿ç”¨é™æ€è¯´æ˜ç¬¦ï¼‰ï¼›</p>
</li>
<li data-nodeid="8628">
<p data-nodeid="8629" class="te-preview-highlight">è¢«å¯¼å…¥çš„æ¨¡å—æœ‰å‰¯ä½œç”¨ï¼ˆå¯ä»¥ç†è§£ä¸ºæ¨¡å—ä¸­ä¼šç›´æ¥è¿è¡Œçš„ä»£ç ï¼‰ï¼Œè¿™äº›å‰¯ä½œç”¨åªæœ‰åœ¨è§¦å‘æŸäº›æ¡ä»¶æ—¶æ‰è¢«éœ€è¦ã€‚</p>
</li>
</ul>




<p data-nodeid="1866"><strong data-nodeid="2100">æ·±å…¥ç†è§£ dynamic importï¼ˆåŠ¨æ€å¯¼å…¥ï¼‰</strong></p>
<p data-nodeid="1867">è¿™é‡Œæˆ‘ä»¬ä¸å†èµ˜è¿° dynamic import çš„æ ‡å‡†ç”¨æ³•ï¼Œä½ å¯ä»¥ä»<a href="https://tc39.es/proposal-dynamic-import/#sec-import-calls" data-nodeid="2104">å®˜æ–¹è§„èŒƒ</a>å’Œ <a href="https://github.com/tc39/proposal-dynamic-import" data-nodeid="2108">tc39 proposal</a> ä¸­æ‰¾åˆ°æœ€å…¨é¢å’ŒåŸå§‹çš„å†…å®¹ã€‚</p>
<p data-nodeid="1868">é™¤äº†åŸºç¡€ç”¨æ³•ï¼Œæˆ‘æƒ³ä»è¯­è¨€å±‚é¢å¼ºè°ƒä¸€ä¸ª Function-like çš„æ¦‚å¿µã€‚æˆ‘ä»¬å…ˆçœ‹è¿™æ ·ä¸€æ®µä»£ç ï¼š</p>
<pre class="lang-java" data-nodeid="1869"><code data-language="java">// html éƒ¨åˆ†
&lt;nav&gt;
  &lt;a href="" data-script-path="books"&gt;Books&lt;/a&gt;
  &lt;a href="" data-script-path="movies"&gt;Movies&lt;/a&gt;
  &lt;a href="" data-script-path="video-games"&gt;Video Games&lt;/a&gt;
&lt;/nav&gt;
&lt;div id="content"&gt;
&lt;/div&gt;
// script éƒ¨åˆ†
&lt;script&gt;
  // è·å– element
  const contentEle = document.querySelector('#content');
  const links = document.querySelectorAll('nav &gt; a');
  // éå†ç»‘å®šç‚¹å‡»é€»è¾‘
  for (const link of links) {
    link.addEventListener('click', async (event) =&gt; {
      event.preventDefault();
      try {
        const asyncScript = await import(`/${link.dataset.scriptPath}.js`);
        // å¼‚æ­¥åŠ è½½è„šæœ¬
        asyncScript.loadContentTo(contentEle);
      } catch (error) {
        contentEle.textContent = `We got error: ${error.message}`;
      }
    });
  }
&lt;/script&gt;
</code></pre>
<p data-nodeid="1870">ç‚¹å‡»é¡µé¢å½“ä¸­çš„ a æ ‡ç­¾åï¼Œä¼šåŠ¨æ€åŠ è½½ä¸€ä¸ªæ¨¡å—ï¼Œå¹¶è°ƒç”¨æ¨¡å—å®šä¹‰çš„ loadContentTo æ–¹æ³•å®Œæˆé¡µé¢å†…å®¹çš„å¡«å……ã€‚</p>
<p data-nodeid="1871">è¡¨é¢ä¸Šçœ‹ï¼Œawait import() çš„ç”¨æ³•ä½¿å¾— import åƒä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°é€šè¿‡ () æ“ä½œç¬¦è°ƒç”¨å¹¶è¿”å›ä¸€ä¸ª Promiseã€‚äº‹å®ä¸Šï¼Œ<strong data-nodeid="2117">dynamic import åªæ˜¯ä¸€ä¸ª function like çš„è¯­æ³•å½¢å¼</strong>ã€‚åœ¨ ES class ç‰¹æ€§ä¸­ï¼Œsuper() ä¸ dynamic import ç±»ä¼¼ï¼Œä¹Ÿæ˜¯ä¸€ä¸ª function like è¯­æ³•å½¢å¼ã€‚æ‰€ä»¥å®ƒå’Œå‡½æ•°è¿˜æ˜¯æœ‰ç€æœ¬è´¨çš„åŒºåˆ«ï¼Œæ¯”å¦‚ï¼š</p>
<ul data-nodeid="1872">
<li data-nodeid="1873">
<p data-nodeid="1874">dynamic import å¹¶éç»§æ‰¿è‡ª Function.prototypeï¼Œå› æ­¤ä¸èƒ½ä½¿ç”¨ Function æ„é€ å‡½æ•°åŸå‹ä¸Šçš„æ–¹æ³• impoort.call(null, <code data-backticks="1" data-nodeid="2119">${path}</code>)ï¼Œè°ƒç”¨å®ƒæ˜¯ä¸åˆæ³•çš„ï¼›</p>
</li>
<li data-nodeid="1875">
<p data-nodeid="1876">dynamic import å¹¶éç»§æ‰¿è‡ª Object.prototypeï¼Œå› æ­¤ä¸èƒ½ä½¿ç”¨ Object æ„é€ å‡½æ•°åŸå‹ä¸Šçš„æ–¹æ³•ã€‚</p>
</li>
</ul>
<p data-nodeid="1877">è™½ç„¶ dynamic import å¹¶ä¸æ˜¯ä¸€ä¸ªçœŸæ­£æ„ä¹‰ä¸Šçš„å‡½æ•°ï¼Œä½†æˆ‘ä»¬å¯ä»¥é€šè¿‡å®ç°ä¸€ä¸ª dynamicImport å‡½æ•°æ¨¡å¼æ¥å®ç° dynamic importï¼Œè¿›ä¸€æ­¥åŠ æ·±å¯¹å…¶è¯­æ³•ç‰¹æ€§çš„ç†è§£ã€‚</p>
<p data-nodeid="1878"><strong data-nodeid="2126">å®ç°ä¸€ä¸ª dynamic importï¼ˆåŠ¨æ€å¯¼å…¥ï¼‰</strong></p>
<p data-nodeid="1879">dynamicImport å‡½æ•°å®ç°å¦‚ä¸‹ï¼š</p>
<pre class="lang-java" data-nodeid="1880"><code data-language="java"><span class="hljs-keyword">const</span> importModule = url =&gt; {
  <span class="hljs-comment">// è¿”å›ä¸€ä¸ªæ–°çš„ Promise å®ä¾‹</span>
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Promise((resolve, reject) =&gt; {
    <span class="hljs-comment">// åˆ›å»º script æ ‡ç­¾</span>
    <span class="hljs-keyword">const</span> script = document.createElement(<span class="hljs-string">"script"</span>);

    <span class="hljs-keyword">const</span> tempGlobal = <span class="hljs-string">"__tempModuleLoadingVariable"</span> + Math.random().toString(<span class="hljs-number">32</span>).substring(<span class="hljs-number">2</span>);

    script.type = <span class="hljs-string">"module"</span>;
    script.textContent = `<span class="hljs-keyword">import</span> * as m from <span class="hljs-string">"${url}"</span>; window.${tempGlobal} = m;`;
    <span class="hljs-comment">// load å›è°ƒ</span>
    script.onload = () =&gt; {
      resolve(window[tempGlobal]);
      delete window[tempGlobal];
      script.remove();
    };
    <span class="hljs-comment">// error å›è°ƒ</span>
    script.onerror = () =&gt; {
      reject(<span class="hljs-keyword">new</span> Error(<span class="hljs-string">"Failed to load module script with URL "</span> + url));
      delete window[tempGlobal];
      script.remove();
    };
    document.documentElement.appendChild(script);
  });
}
</code></pre>
<p data-nodeid="1881">è¿™é‡Œï¼Œæˆ‘ä»¬é€šè¿‡åŠ¨æ€æ’å…¥ä¸€ä¸ª script æ ‡ç­¾å®ç°å¯¹ç›®æ ‡ script url çš„åŠ è½½ï¼Œå¹¶é€šè¿‡å°†æ¨¡å—å¯¼å‡ºå†…å®¹èµ‹å€¼ç»™ window å¯¹è±¡ã€‚æˆ‘ä»¬ä½¿ç”¨<code data-backticks="1" data-nodeid="2129">__tempModuleLoadingVariable" + Math.random().toString(32).substring(2) key</code>ä¿è¯æ¨¡å—å¯¼å‡ºå¯¹è±¡çš„å‘½åä¸ä¼šå‡ºç°å†²çªã€‚</p>
<p data-nodeid="1882">è‡³æ­¤ï¼Œæˆ‘ä»¬å¯¹ dynamic import çš„åˆ†æå‘Šä¸€æ®µè½ã€‚æ€»ä¹‹ï¼Œä»£ç æ‹†åˆ†å’ŒæŒ‰éœ€åŠ è½½å¹¶ä¸å®Œå…¨æ˜¯å·¥ç¨‹åŒ–çš„å®æ–½ï¼ŒåŒæ—¶ä¹Ÿè¦æ±‚å¯¹è¯­è¨€æ·±åˆ»æŒæ¡ã€‚</p>
<h3 data-nodeid="1883">Webpack èµ‹èƒ½ä»£ç æ‹†åˆ†å’ŒæŒ‰éœ€åŠ è½½</h3>
<p data-nodeid="1884">é€šè¿‡å‰é¢çš„å­¦ä¹ ï¼Œæˆ‘ä»¬äº†è§£äº†ä»£ç æ‹†åˆ†å’ŒæŒ‰éœ€åŠ è½½ï¼Œå­¦ä¹ äº†åŠ¨æ€å¯¼å…¥è¿™ä¸€ç‰¹æ€§ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘æƒ³è¯·ä½ æ€è€ƒï¼Œå¦‚ä½•åœ¨ä»£ç ä¸­å®‰å…¨åœ°ä½¿ç”¨åŠ¨æ€å¯¼å…¥è€Œä¸ç”¨å»è¿‡å¤šå…³å¿ƒæµè§ˆå™¨çš„å…¼å®¹æƒ…å†µï¼Œå¦‚ä½•åœ¨å·¥ç¨‹ç¯å¢ƒä¸­å®ç°ä»£ç æ‹†åˆ†å’ŒæŒ‰éœ€åŠ è½½å‘¢ï¼Ÿ</p>
<p data-nodeid="1885">ä»¥æœ€å¸¸è§ã€æœ€å…¸å‹çš„å‰ç«¯æ„å»ºå·¥å…·â€”â€”Webpack ä¸ºä¾‹ï¼Œæˆ‘ä»¬æ¥åˆ†æå¦‚ä½•åœ¨ Webpack ç¯å¢ƒä¸‹æ”¯æŒä»£ç æ‹†åˆ†å’ŒæŒ‰éœ€åŠ è½½ã€‚</p>
<p data-nodeid="1886">æ€»çš„æ¥è¯´ï¼ŒWebpack æä¾›äº†ä¸‰ç§ç›¸å…³èƒ½åŠ›ï¼š</p>
<ul data-nodeid="1887">
<li data-nodeid="1888">
<p data-nodeid="1889"><strong data-nodeid="2139">é€šè¿‡å…¥å£é…ç½®æ‰‹åŠ¨åˆ†å‰²ä»£ç ï¼›</strong></p>
</li>
<li data-nodeid="1890">
<p data-nodeid="1891"><strong data-nodeid="2143">åŠ¨æ€å¯¼å…¥æ”¯æŒï¼›</strong></p>
</li>
<li data-nodeid="1892">
<p data-nodeid="1893"><strong data-nodeid="2148">é€šè¿‡ splitChunk æ’ä»¶æå–å…¬å…±ä»£ç ï¼ˆå…¬å…±ä»£ç åˆ†å‰²ï¼‰</strong>ã€‚</p>
</li>
</ul>
<p data-nodeid="1894">å…¶ä¸­ç¬¬ä¸€ç§æ˜¯é€šè¿‡é…ç½® Entry æ¥ç”±å¼€å‘è€…æ‰‹åŠ¨è¿›è¡Œä»£ç é¡¹ç›®æ‰“åŒ…ï¼Œä¸æˆ‘ä»¬è¿™èŠ‚å†…å®¹ä¸»é¢˜å¹¶ä¸ç›¸å…³ï¼Œå°±ä¸å±•å¼€è®²è§£äº†ã€‚ä¸‹é¢æˆ‘ä»¬ä»åŠ¨æ€å¯¼å…¥å’Œ splitChunk æ’ä»¶è¿›è¡Œè¯¦ç»†è§£æã€‚</p>
<h4 data-nodeid="1895">Webpack å¯¹ dynamic import èƒ½åŠ›æ”¯æŒ</h4>
<p data-nodeid="1896">äº‹å®ä¸Šï¼Œåœ¨ Webpack æ—©æœŸç‰ˆæœ¬ä¸­ï¼Œæä¾›äº† require.ensure() èƒ½åŠ›ã€‚è¯·æ³¨æ„è¿™æ˜¯ Webpack ç‰¹æœ‰çš„å®ç°ï¼š<strong data-nodeid="2156">require.ensure() èƒ½å¤Ÿå°†å…¶å‚æ•°å¯¹åº”çš„æ–‡ä»¶æ‹†åˆ†åˆ°ä¸€ä¸ªå•ç‹¬çš„ bundle ä¸­ï¼Œæ­¤ bundle ä¼šè¢«å¼‚æ­¥åŠ è½½</strong>ã€‚</p>
<p data-nodeid="1897">ç›®å‰ require.ensure() å·²ç»è¢«ç¬¦åˆ ES è§„èŒƒçš„ dynamic import å–ä»£ã€‚è°ƒç”¨ import()ï¼Œè¢«è¯·æ±‚çš„æ¨¡å—å’Œå®ƒå¼•ç”¨çš„æ‰€æœ‰å­æ¨¡å—ï¼Œä¼šåˆ†ç¦»åˆ°ä¸€ä¸ªå•ç‹¬çš„ chunk ä¸­ã€‚å€¼å¾—å­¦ä¹ çš„æ˜¯ï¼ŒWebpack å¯¹äº import() çš„æ”¯æŒå’Œå¤„ç†éå¸¸â€œå·§å¦™â€ï¼Œæˆ‘ä»¬çŸ¥é“ ES ä¸­å…³äº dynamic import çš„è§„èŒƒï¼Œåªæ¥å—ä¸€ä¸ªå‚æ•°ï¼Œè¡¨ç¤ºæ¨¡å—çš„è·¯å¾„ï¼š</p>
<pre class="lang-java" data-nodeid="1898"><code data-language="java"><span class="hljs-keyword">import</span>(`${path}`) -&gt; Promise
</code></pre>
<p data-nodeid="1899">ä½†æ˜¯ Webpack æ˜¯ä¸€ä¸ªæ„å»ºå·¥å…·ï¼ŒWebpack ä¸­å¯¹äº import() çš„å¤„ç†ï¼Œå¯ä»¥é€šè¿‡æ³¨é‡Šæ¥æ”¶ä¸€äº›ç‰¹æ®Šçš„å‚æ•°ï¼Œæ— é¡»ç ´å ES å¯¹äº dynamic import è§„å®šã€‚æ¯”å¦‚ï¼š</p>
<pre class="lang-java" data-nodeid="1900"><code data-language="java"><span class="hljs-keyword">import</span>(
  <span class="hljs-comment">/* webpackChunkName: "chunk-name" */</span>
  <span class="hljs-comment">/* webpackMode: "lazy" */</span>
  <span class="hljs-string">'module'</span>
);
</code></pre>
<p data-nodeid="3155" class="">Webpack åœ¨æ„å»ºæ—¶ï¼Œå¯ä»¥è¯»å–åˆ° import å‚æ•°ï¼Œå³ä¾¿æ˜¯å‚æ•°å†…çš„æ³¨é‡Šéƒ¨åˆ†ï¼ŒWebpack ä¹Ÿå¯ä»¥è·å–å¹¶å¤„ç†ã€‚å¦‚ä¸Šè¿°ä»£ç ï¼Œ<code data-backticks="1" data-nodeid="3157">webpackChunkName: "chunk-name"</code>è¡¨ç¤ºè‡ªå®šä¹‰æ–° chunk åç§°ï¼›<code data-backticks="1" data-nodeid="3159">webpackMode: "lazy"</code>è¡¨ç¤ºæ¯ä¸ª import() å¯¼å…¥çš„æ¨¡å—ï¼Œä¼šç”Ÿæˆä¸€ä¸ªå¯å»¶è¿ŸåŠ è½½ï¼ˆlazy-loadableï¼‰ chunkã€‚æ­¤å¤–ï¼ŒwebpackMode çš„å–å€¼è¿˜å¯ä»¥æ˜¯ lazy-onceã€eagerã€weakï¼Œå…·ä½“å«ä¹‰å¯å‚è€ƒï¼š<a href="https://www.webpackjs.com/api/module-methods/#import-" data-nodeid="3163">Webpack import()</a>ã€‚</p>


<p data-nodeid="1902">ä½ å¯èƒ½å¾ˆå¥½å¥‡ï¼šWebpack åœ¨ç¼–è¯‘æ„å»ºæ—¶ï¼Œä¼šå¦‚ä½•å¤„ç†ä»£ç ä¸­çš„ dynamic import å‘¢ï¼Ÿä¸‹é¢ï¼Œæˆ‘ä»¬ä¸€æ¢ç©¶ç«Ÿã€‚</p>
<p data-nodeid="1903">index.js æ–‡ä»¶ï¼š</p>
<pre class="lang-java" data-nodeid="1904"><code data-language="java"><span class="hljs-keyword">import</span>(<span class="hljs-string">'./module'</span>).then((data) =&gt; {
  console.log(data)
});
</code></pre>
<p data-nodeid="1905">module.js æ–‡ä»¶ï¼š</p>
<pre class="lang-java" data-nodeid="1906"><code data-language="java"><span class="hljs-keyword">const</span> <span class="hljs-keyword">module</span> = {
	value: <span class="hljs-string">'moduleValue'</span>
}
export <span class="hljs-keyword">default</span> <span class="hljs-keyword">module</span>
</code></pre>
<p data-nodeid="1907">æˆ‘ä»¬é…ç½®å…¥å£æ–‡ä»¶ä¸º index.jsï¼Œè¾“å‡ºæ–‡ä»¶ä¸º bundle.jsï¼Œç®€å•çš„ Webpack é…ç½®ä¿¡æ¯ï¼ˆwebpack@4.44.2ï¼‰ï¼š</p>
<pre class="lang-java" data-nodeid="1908"><code data-language="java"><span class="hljs-keyword">const</span> path = require(<span class="hljs-string">'path'</span>);
<span class="hljs-keyword">module</span>.<span class="hljs-keyword">exports</span> = {
  mode: <span class="hljs-string">'development'</span>,
  entry: <span class="hljs-string">'./index.js'</span>,
  output: {
    filename: <span class="hljs-string">'bundle.js'</span>,
    path: path.resolve(__dirname, <span class="hljs-string">'dist'</span>),
  },
};
</code></pre>
<p data-nodeid="1909">è¿è¡Œæ„å»ºå‘½ä»¤åï¼Œå¾—åˆ°ä¸¤ä¸ªæ–‡ä»¶ï¼š</p>
<ul data-nodeid="1910">
<li data-nodeid="1911">
<p data-nodeid="1912">0.bundle.js</p>
</li>
<li data-nodeid="1913">
<p data-nodeid="1914">bundle.js</p>
</li>
</ul>
<p data-nodeid="1915">bundle.js ä¸­å¯¹ index.js dynamic import ç¼–è¯‘ç»“æœä¸ºï¼š</p>
<pre class="lang-java" data-nodeid="1916"><code data-language="java"><span class="hljs-comment">/******/</span> ({
<span class="hljs-comment">/***/</span> <span class="hljs-string">"./index.js"</span>:
<span class="hljs-comment">/*!******************!*\
  !*** ./index.js ***!
  \******************/</span>
<span class="hljs-comment">/*! no static exports found */</span>
<span class="hljs-comment">/***/</span> (function(<span class="hljs-keyword">module</span>, <span class="hljs-keyword">exports</span>, __webpack_require__) {
eval(<span class="hljs-string">"__webpack_require__.e(/*! import() */ 0).then(__webpack_require__.bind(null, /*! ./module */ \"./module.js\")).then((data) =&gt; {\n  console.log(data)\n});\n\n//# sourceURL=webpack:///./index.js?"</span>);
<span class="hljs-comment">/***/</span> })
<span class="hljs-comment">/******/</span> });
</code></pre>
<p data-nodeid="1917">ç”±æ­¤å¯çŸ¥ï¼ŒWebpack å¯¹äºä¸šåŠ¡ä¸­å†™åˆ°çš„ dynamic import ä»£ç ï¼Œä¼šè½¬æ¢æˆäº† Webpack è‡ªå·±è‡ªå®šä¹‰çš„ webpack_require.e å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°è¿”å›äº†ä¸€ä¸ª promise æ•°ç»„ï¼Œæœ€ç»ˆæ¨¡æ‹Ÿå‡ºäº†åŠ¨æ€å¯¼å…¥çš„æ•ˆæœï¼Œwebpack_require.e æºç å¦‚ä¸‹ï¼š</p>
<pre class="lang-java" data-nodeid="1918"><code data-language="java"><span class="hljs-comment">/******/</span> 	<span class="hljs-comment">// This file contains only the entry chunk.</span>
<span class="hljs-comment">/******/</span> 	<span class="hljs-comment">// The chunk loading function for additional chunks</span>
<span class="hljs-comment">/******/</span> 	__webpack_require__.e = <span class="hljs-function">function <span class="hljs-title">requireEnsure</span><span class="hljs-params">(chunkId)</span> </span>{
<span class="hljs-comment">/******/</span> 		<span class="hljs-keyword">var</span> promises = [];
<span class="hljs-comment">/******/</span>
<span class="hljs-comment">/******/</span>
<span class="hljs-comment">/******/</span> 		<span class="hljs-comment">// JSONP chunk loading for javascript</span>
<span class="hljs-comment">/******/</span>
<span class="hljs-comment">/******/</span> 		<span class="hljs-keyword">var</span> installedChunkData = installedChunks[chunkId];
<span class="hljs-comment">/******/</span> 		<span class="hljs-keyword">if</span>(installedChunkData !== <span class="hljs-number">0</span>) { <span class="hljs-comment">// 0 means "already installed".</span>
<span class="hljs-comment">/******/</span>
<span class="hljs-comment">/******/</span> 			<span class="hljs-comment">// a Promise means "currently loading".</span>
<span class="hljs-comment">/******/</span> 			<span class="hljs-keyword">if</span>(installedChunkData) {
<span class="hljs-comment">/******/</span> 				promises.push(installedChunkData[<span class="hljs-number">2</span>]);
<span class="hljs-comment">/******/</span> 			} <span class="hljs-keyword">else</span> {
<span class="hljs-comment">/******/</span> 				<span class="hljs-comment">// setup Promise in chunk cache</span>
<span class="hljs-comment">/******/</span> 				<span class="hljs-keyword">var</span> promise = <span class="hljs-keyword">new</span> Promise(function(resolve, reject) {
<span class="hljs-comment">/******/</span> 					installedChunkData = installedChunks[chunkId] = [resolve, reject];
<span class="hljs-comment">/******/</span> 				});
<span class="hljs-comment">/******/</span> 				promises.push(installedChunkData[<span class="hljs-number">2</span>] = promise);
<span class="hljs-comment">/******/</span>
<span class="hljs-comment">/******/</span> 				<span class="hljs-comment">// start chunk loading</span>
<span class="hljs-comment">/******/</span> 				<span class="hljs-keyword">var</span> script = document.createElement(<span class="hljs-string">'script'</span>);
<span class="hljs-comment">/******/</span> 				<span class="hljs-keyword">var</span> onScriptComplete;
<span class="hljs-comment">/******/</span>
<span class="hljs-comment">/******/</span> 				script.charset = <span class="hljs-string">'utf-8'</span>;
<span class="hljs-comment">/******/</span> 				script.timeout = <span class="hljs-number">120</span>;
<span class="hljs-comment">/******/</span> 				<span class="hljs-keyword">if</span> (__webpack_require__.nc) {
<span class="hljs-comment">/******/</span> 					script.setAttribute(<span class="hljs-string">"nonce"</span>, __webpack_require__.nc);
<span class="hljs-comment">/******/</span> 				}
<span class="hljs-comment">/******/</span> 				script.src = jsonpScriptSrc(chunkId);
<span class="hljs-comment">/******/</span>
<span class="hljs-comment">/******/</span> 				<span class="hljs-comment">// create error before stack unwound to get useful stacktrace later</span>
<span class="hljs-comment">/******/</span> 				<span class="hljs-keyword">var</span> error = <span class="hljs-keyword">new</span> Error();
<span class="hljs-comment">/******/</span> 				onScriptComplete = function (event) {
<span class="hljs-comment">/******/</span> 					<span class="hljs-comment">// avoid mem leaks in IE.</span>
<span class="hljs-comment">/******/</span> 					script.onerror = script.onload = <span class="hljs-keyword">null</span>;
<span class="hljs-comment">/******/</span> 					clearTimeout(timeout);
<span class="hljs-comment">/******/</span> 					<span class="hljs-keyword">var</span> chunk = installedChunks[chunkId];
<span class="hljs-comment">/******/</span> 					<span class="hljs-keyword">if</span>(chunk !== <span class="hljs-number">0</span>) {
<span class="hljs-comment">/******/</span> 						<span class="hljs-keyword">if</span>(chunk) {
<span class="hljs-comment">/******/</span> 							<span class="hljs-keyword">var</span> errorType = event &amp;&amp; (event.type === <span class="hljs-string">'load'</span> ? <span class="hljs-string">'missing'</span> : event.type);
<span class="hljs-comment">/******/</span> 							<span class="hljs-keyword">var</span> realSrc = event &amp;&amp; event.target &amp;&amp; event.target.src;
<span class="hljs-comment">/******/</span> 							error.message = <span class="hljs-string">'Loading chunk '</span> + chunkId + <span class="hljs-string">' failed.\n('</span> + errorType + <span class="hljs-string">': '</span> + realSrc + <span class="hljs-string">')'</span>;
<span class="hljs-comment">/******/</span> 							error.name = <span class="hljs-string">'ChunkLoadError'</span>;
<span class="hljs-comment">/******/</span> 							error.type = errorType;
<span class="hljs-comment">/******/</span> 							error.request = realSrc;
<span class="hljs-comment">/******/</span> 							chunk[<span class="hljs-number">1</span>](error);
<span class="hljs-comment">/******/</span> 						}
<span class="hljs-comment">/******/</span> 						installedChunks[chunkId] = undefined;
<span class="hljs-comment">/******/</span> 					}
<span class="hljs-comment">/******/</span> 				};
<span class="hljs-comment">/******/</span> 				<span class="hljs-keyword">var</span> timeout = setTimeout(function(){
<span class="hljs-comment">/******/</span> 					onScriptComplete({ type: <span class="hljs-string">'timeout'</span>, target: script });
<span class="hljs-comment">/******/</span> 				}, <span class="hljs-number">120000</span>);
<span class="hljs-comment">/******/</span> 				script.onerror = script.onload = onScriptComplete;
<span class="hljs-comment">/******/</span> 				document.head.appendChild(script);
<span class="hljs-comment">/******/</span> 			}
<span class="hljs-comment">/******/</span> 		}
<span class="hljs-comment">/******/</span> 		<span class="hljs-keyword">return</span> Promise.all(promises);
<span class="hljs-comment">/******/</span> 	};
</code></pre>
<p data-nodeid="1919">ä»£ç å·²ç»éå¸¸ç›´è§‚ï¼Œwebpack_require.e ä¸»è¦åšäº†å¦‚ä¸‹å†…å®¹ï¼š</p>
<ul data-nodeid="1920">
<li data-nodeid="1921">
<p data-nodeid="1922">å®šä¹‰ä¸€ä¸ª promise æ•°ç»„ promisesï¼Œæœ€ç»ˆä»¥ Promise.all(promises) å½¢å¼è¿”å›ï¼›</p>
</li>
<li data-nodeid="1923">
<p data-nodeid="1924">é€šè¿‡ installedChunkData å˜é‡åˆ¤æ–­å½“å‰æ¨¡å—æ˜¯å¦å·²ç»è¢«åŠ è½½ï¼Œå¦‚æœå·²ç»åŠ è½½è¿‡ï¼Œå°†æ¨¡å—å†…å®¹ push åˆ° promises æ•°ç»„ä¸­ï¼›</p>
</li>
<li data-nodeid="1925">
<p data-nodeid="1926">å¦‚æœå½“å‰æ¨¡å—æ²¡æœ‰è¢«åŠ è½½è¿‡ï¼Œåˆ™å…ˆå®šä¹‰ä¸€ä¸ª promiseï¼Œç„¶ååˆ›å»ºä¸€ä¸ª script æ ‡ç­¾ï¼ŒåŠ è½½æ¨¡å—å†…å®¹ï¼Œå¹¶å®šä¹‰æ­¤ script çš„ onload å’Œ onerror å›è°ƒï¼›</p>
</li>
<li data-nodeid="1927">
<p data-nodeid="1928">æœ€ç»ˆå¯¹æ–°å¢ script æ ‡ç­¾å¯¹åº”çš„ promise ï¼ˆresolve/rejectï¼‰å¤„ç†å®šä¹‰åœ¨ webpackJsonpCallback å‡½æ•°ä¸­ã€‚</p>
</li>
</ul>
<pre class="lang-java" data-nodeid="1929"><code data-language="java"><span class="hljs-comment">/******/</span> 	<span class="hljs-function">function <span class="hljs-title">webpackJsonpCallback</span><span class="hljs-params">(data)</span> </span>{
<span class="hljs-comment">/******/</span> 		<span class="hljs-keyword">var</span> chunkIds = data[<span class="hljs-number">0</span>];
<span class="hljs-comment">/******/</span> 		<span class="hljs-keyword">var</span> moreModules = data[<span class="hljs-number">1</span>];
<span class="hljs-comment">/******/</span>
<span class="hljs-comment">/******/</span>
<span class="hljs-comment">/******/</span> 		<span class="hljs-comment">// add "moreModules" to the modules object,</span>
<span class="hljs-comment">/******/</span> 		<span class="hljs-comment">// then flag all "chunkIds" as loaded and fire callback</span>
<span class="hljs-comment">/******/</span> 		<span class="hljs-keyword">var</span> moduleId, chunkId, i = <span class="hljs-number">0</span>, resolves = [];
<span class="hljs-comment">/******/</span> 		<span class="hljs-keyword">for</span>(;i &lt; chunkIds.length; i++) {
<span class="hljs-comment">/******/</span> 			chunkId = chunkIds[i];
<span class="hljs-comment">/******/</span> 			<span class="hljs-keyword">if</span>(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) &amp;&amp; installedChunks[chunkId]) {
<span class="hljs-comment">/******/</span> 				resolves.push(installedChunks[chunkId][<span class="hljs-number">0</span>]);
<span class="hljs-comment">/******/</span> 			}
<span class="hljs-comment">/******/</span> 			installedChunks[chunkId] = <span class="hljs-number">0</span>;
<span class="hljs-comment">/******/</span> 		}
<span class="hljs-comment">/******/</span> 		<span class="hljs-keyword">for</span>(moduleId in moreModules) {
<span class="hljs-comment">/******/</span> 			<span class="hljs-keyword">if</span>(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {
<span class="hljs-comment">/******/</span> 				modules[moduleId] = moreModules[moduleId];
<span class="hljs-comment">/******/</span> 			}
<span class="hljs-comment">/******/</span> 		}
<span class="hljs-comment">/******/</span> 		<span class="hljs-keyword">if</span>(parentJsonpFunction) parentJsonpFunction(data);
<span class="hljs-comment">/******/</span>
<span class="hljs-comment">/******/</span> 		<span class="hljs-keyword">while</span>(resolves.length) {
<span class="hljs-comment">/******/</span> 			resolves.shift()();
<span class="hljs-comment">/******/</span> 		}
<span class="hljs-comment">/******/</span>
<span class="hljs-comment">/******/</span> 	};
</code></pre>
<p data-nodeid="1930">å®Œæ•´çš„æºç å†…å®¹æˆ‘ä»¬ä¸å†ä¸€ä¸€ç²˜è´´ï¼Œä½ å¯ä»¥å‚è€ƒä¸‹å›¾çš„æ•´ä¸ªå¤„ç†æµç¨‹ï¼š</p>
<p data-nodeid="1931"><img src="https://s0.lgstatic.com/i/image2/M01/05/28/Cip5yF_9BziALsMpAAFUvdp7KoQ251.png" alt="Drawing 1.png" data-nodeid="2191"></p>
<div data-nodeid="1932"><p style="text-align:center">webpack_require.e å¤„ç†æµç¨‹å›¾</p></div>
<h4 data-nodeid="1933">Webpack ä¸­ splitChunk æ’ä»¶å’Œä»£ç åˆ†å‰²</h4>
<p data-nodeid="1934">ä½ å¯èƒ½å¯¹ Webpack 4.0 ç‰ˆæœ¬æ¨å‡ºçš„ splitChunk æ’ä»¶å¹¶ä¸é™Œç”Ÿã€‚è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<strong data-nodeid="2206">ä»£ç åˆ†å‰²åŒºåˆ«äºåŠ¨æ€åŠ è½½ï¼Œå®ƒä»¬æœ¬è´¨ä¸Šæ˜¯ä¸¤ä¸ªæ¦‚å¿µ</strong>ã€‚å‰æ–‡ä»‹ç»åˆ°çš„ dynamic importï¼ˆåŠ¨æ€å¯¼å…¥ï¼‰æŠ€æœ¯æœ¬è´¨ä¸Šä¸€ç§æ˜¯æ‡’åŠ è½½â€”â€”<strong data-nodeid="2207">æŒ‰éœ€åŠ è½½</strong>ï¼Œå³åªæœ‰åœ¨éœ€è¦çš„æ—¶å€™ï¼Œæ‰åŠ è½½ä»£ç ã€‚è€Œä»¥ splitChunk æ’ä»¶ä¸ºä»£è¡¨çš„ä»£ç åˆ†å‰²ï¼Œæ˜¯ä¸€ç§<strong data-nodeid="2208">ä»£ç æ‹†åŒ…</strong>æŠ€æœ¯ï¼Œä¸ä»£ç åˆå¹¶æ‰“åŒ…æ˜¯ä¸€ä¸ªç›¸é€†çš„è¿‡ç¨‹ã€‚</p>
<p data-nodeid="1935">ä»£ç åˆ†å‰²çš„æ ¸å¿ƒæ„ä¹‰åœ¨äº<strong data-nodeid="2214">é¿å…é‡å¤æ‰“åŒ…ä»¥åŠæå‡ç¼“å­˜åˆ©ç”¨ç‡ï¼Œè¿›è€Œæå‡è®¿é—®é€Ÿåº¦</strong>ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬å°†ä¸å¸¸å˜åŒ–çš„ç¬¬ä¸‰æ–¹ä¾èµ–åº“è¿›è¡Œä»£ç æ‹†åˆ†ï¼Œæ–¹ä¾¿å¯¹ç¬¬ä¸‰æ–¹ä¾èµ–åº“ç¼“å­˜ï¼ŒåŒæ—¶æŠ½ç¦»å…¬å…±é€»è¾‘ï¼Œå‡å°‘å•ä¸ªæ–‡ä»¶çš„ size å¤§å°ã€‚</p>
<p data-nodeid="1936">äº†è§£äº†ä»£ç åˆ†å‰²çš„æ¦‚å¿µï¼Œé‚£ä¹ˆå°±å¾ˆå¥½ç†è§£ Webpack splitChunk æ’ä»¶æ»¡è¶³ä¸‹è¿°æ¡ä»¶æ—¶ï¼Œè‡ªåŠ¨è¿›è¡Œä»£ç åˆ†å‰²ï¼š</p>
<ul data-nodeid="4972">
<li data-nodeid="4973">
<p data-nodeid="4974">å¯ä»¥è¢«å…±äº«çš„ï¼ˆå³é‡å¤è¢«å¼•ç”¨çš„ï¼‰æ¨¡å—æˆ–è€… node_modules ä¸­çš„æ¨¡å—ï¼›</p>
</li>
<li data-nodeid="4975">
<p data-nodeid="4976" class="">åœ¨å‹ç¼©å‰ä½“ç§¯å¤§äº 30KB çš„æ¨¡å—ï¼›</p>
</li>
<li data-nodeid="4977">
<p data-nodeid="4978">åœ¨æŒ‰éœ€åŠ è½½æ¨¡å—æ—¶ï¼Œå¹¶è¡ŒåŠ è½½çš„æ¨¡å—ä¸å¾—è¶…è¿‡ 5 ä¸ªï¼›</p>
</li>
<li data-nodeid="4979">
<p data-nodeid="4980">åœ¨é¡µé¢åˆå§‹åŒ–åŠ è½½æ—¶ï¼Œå¹¶è¡ŒåŠ è½½çš„æ¨¡å—ä¸å¾—è¶…è¿‡ 3 ä¸ªã€‚</p>
</li>
</ul>


<p data-nodeid="1946">å½“ç„¶ï¼Œä¸Šè¿°é…ç½®æ•°æ®æ˜¯å®Œå…¨å¯ä»¥ç”±å¼€å‘è€…æŒæ¡ä¸»åŠ¨æƒï¼Œå¹¶æ ¹æ®é¡¹ç›®å®é™…æƒ…å†µè¿›è¡Œè°ƒæ•´çš„ã€‚æ›´å¤šå†…å®¹å¯ä»¥å‚è€ƒï¼š<a href="https://www.webpackjs.com/plugins/split-chunks-plugin/" data-nodeid="2225">split-chunks-plugin</a>ã€‚ä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå…³äº splitChunk æ’ä»¶çš„é»˜è®¤å‚æ•°æ˜¯ Webpack å›¢é˜Ÿæ‰€è®¾å®šçš„é€šç”¨æ€§ä¼˜åŒ–æ‰‹æ®µï¼Œæ˜¯ç»è¿‡â€œåƒæŒ‘ä¸‡é€‰â€ç¡®å®šçš„ï¼Œå› æ­¤é€‚ç”¨äºå¤šæ•°å¼€å‘åœºæ™¯ã€‚<strong data-nodeid="2231">å¦‚æœåœ¨æ²¡æœ‰å®è·µæµ‹é‡çš„æƒ…å†µä¸‹ï¼Œä¸å»ºè®®å¼€å‘è€…æ‰‹åŠ¨ä¼˜åŒ–è¿™äº›å‚æ•°</strong>ã€‚</p>
<p data-nodeid="1947">å¦å¤–ï¼Œ Webpack splitChunk æ’ä»¶ä¹Ÿæ”¯æŒä¸Šæ–‡æåˆ°çš„â€œæŒ‰éœ€åŠ è½½â€ï¼Œå³å¯ä»¥å’Œ dynamic import æ­é…ä½¿ç”¨ã€‚æ¯”å¦‚ï¼Œpage1 å’Œ page2 é¡µé¢é‡ŒåŠ¨æ€å¼•å…¥ async.jsï¼Œå³ page1.js å’Œ page2.js éƒ½æœ‰è¿™æ ·çš„é€»è¾‘ï¼š</p>
<pre class="lang-java" data-nodeid="1948"><code data-language="java"><span class="hljs-keyword">import</span>(<span class="hljs-comment">/* webpackChunkName: "async.js" */</span><span class="hljs-string">"./async"</span>).then(common =&gt; {
 console.log(common);
})
</code></pre>
<p data-nodeid="1949">åœ¨è¿›è¡Œæ„å»ºåï¼Œasync.js ä¼šè¢«å•ç‹¬æ‰“åŒ…ã€‚å¦‚æœè¿›ä¸€æ­¥åœ¨ async.js æ–‡ä»¶ä¸­å¼•å…¥ module.js æ¨¡å—ï¼Œå³ async.js ä¸­çš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre class="lang-java" data-nodeid="1950"><code data-language="java"><span class="hljs-keyword">import</span>(<span class="hljs-comment">/* webpackChunkName: "module.js" */</span><span class="hljs-string">"./module.js"</span>).then(<span class="hljs-keyword">module</span> =&gt; {
 console.log(<span class="hljs-keyword">module</span>);
})
</code></pre>
<p data-nodeid="1951">ä¾èµ–å…³ç³»å›¾å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p data-nodeid="1952"><img src="https://s0.lgstatic.com/i/image/M00/8D/58/CgqCHl_9YFqAKybyAAGp092kEyI435.png" alt="Lark20210112-163942.png" data-nodeid="2237"></p>
<div data-nodeid="1953"><p style="text-align:center">ä¸‰é‡ä¾èµ–å…³ç³»å›¾</p></div>
<p data-nodeid="1954">æœ€ç»ˆæ‰“åŒ…ç»“æœä¼šæŒ‰éœ€åŠ¨æ€å¼•å…¥ async.jsï¼ŒåŒæ—¶ module.js ä¹Ÿè¢«æˆåŠŸå•ç‹¬æ‹†åˆ†å‡ºæ¥ã€‚</p>
<h3 data-nodeid="1955">æ€»ç»“</h3>
<p data-nodeid="1956">è¿™ä¸€è®²æˆ‘ä»¬å°±ä»£ç æ‹†åˆ†å’ŒæŒ‰éœ€åŠ è½½è¿™ä¸€è¯é¢˜è¿›è¡Œäº†åˆ†æï¼š</p>
<ul data-nodeid="1957">
<li data-nodeid="1958">
<p data-nodeid="1959">é¦–å…ˆä»ä»£ç æ‹†åˆ†å’ŒæŒ‰éœ€åŠ è½½çš„ä¸šåŠ¡åœºæ™¯å…¥æ‰‹ï¼Œåˆ†æäº†è¿™ä¸€æŠ€æœ¯æ‰‹æ®µçš„å¿…è¦æ€§å’Œä¸šåŠ¡ä»·å€¼ï¼›</p>
</li>
<li data-nodeid="1960">
<p data-nodeid="1961">æ¥ç€ï¼Œæˆ‘ä»¬ä» ES è§„èŒƒå…¥æ‰‹ï¼Œæ·±å…¥è§£è¯»äº† dynamic import åŠ¨æ€åŠ è½½è¿™ä¸€æ ¸å¿ƒè¯­è¨€ç‰¹æ€§ï¼ŒåŒæ—¶ä» Tree Shaking å’Œç¼–å†™ Babel æ’ä»¶çš„è§’åº¦ï¼Œåœ¨è¾ƒæ·±å±‚çš„è¯­æ³•å’Œå·¥ç¨‹ç†å¿µä¸Šå¯¹æ¯”äº†æŒ‰éœ€æ‰“åŒ…è¿™ä¸€è¯é¢˜ï¼›</p>
</li>
<li data-nodeid="1962">
<p data-nodeid="1963">æœ€åï¼Œæˆ‘ä»¬é€šè¿‡å¯¹ Webpack èƒ½åŠ›çš„æ¢ç©¶ï¼Œå‰–æäº†å¦‚ä½•åœ¨å·¥ç¨‹ä¸­å®ç°ä»£ç æ‹†åˆ†å’ŒæŒ‰éœ€åŠ è½½ã€‚</p>
</li>
</ul>
<p data-nodeid="1964"><img src="https://s0.lgstatic.com/i/image2/M01/05/34/CgpVE1_9YDyAVOWwAAel8VpUNt4885.png" alt="Lark20210112-163852.png" data-nodeid="2246"></p>
<p data-nodeid="1965">åœ¨å®é™…å·¥ä½œä¸­ï¼Œæˆ‘å¸Œæœ›ä½ èƒ½åˆ©ç”¨æœ¬èŠ‚å†…å®¹ï¼Œå¹¶ç»“åˆé¡¹ç›®å®é™…æƒ…å†µï¼Œæ’æŸ¥ä»£ç æ‹†åˆ†å’ŒæŒ‰éœ€åŠ è½½æ˜¯å¦åˆç†ï¼›å¦‚æœæœ‰ä¸åˆç†ä¹‹å¤„ï¼Œå¯ä»¥åŠ¨æ‰‹å®è·µã€å®éªŒï¼Œè¿›è¡Œè®ºè¯ã€‚</p>
<p data-nodeid="1966" class="">æœ¬èŠ‚å†…å®¹æ—¢æœ‰ç†è®ºå†…å®¹ï¼Œåˆæœ‰å·¥ç¨‹å®è·µï¼Œåªè¦ä½ æœ‰â€œåº–ä¸è§£ç‰›â€çš„å†³å¿ƒï¼Œç›¸ä¿¡å¾ˆå¿«å°±æœ‰â€œå…¥æœ¨ä¸‰åˆ†â€çš„ç†è§£ã€‚</p>

---

### ç²¾é€‰è¯„è®º

##### *æµ©ï¼š
> æœ‰åº–ä¸è§£ç‰›çš„å†³å¿ƒå¾ˆå¿«å°±ä¼šæœ‰å…¥æœ¨ä¸‰åˆ†çš„ç†è§£ï¼Œ

##### cxlï¼š
> è¿™ç¯‡å¾ˆæ·±å…¥äººå¿ƒï¼

##### *ä¿Šï¼š
> èµğŸ‘ğŸ»

