---
title: react基础教程
date: 2020-11-08 14:35:56
permalink: /pages/b360d8fb74ce7/
categories:
  - 笔记
  - React
tags:
  - 
---


<https://zh-hans.react.dev/learn/start-a-new-react-project>

<!-- more -->

## 环境搭建

create-react-app

```bash
npx create-react-app my-app
cd my-app
npm start
```

## JSX

JSX 是 JavaScript 的语法扩展。React 使用 JSX 来替代常规的 JavaScript。浏览器不能直接解析JSX，需要使用babel进行编译

<https://babeljs.io/repl/#?browsers=defaults%2C%20not%20ie%2011%2C%20not%20ie_mob%2011&build=&builtIns=false&corejs=3.21&spec=false&loose=false&code_lz=DwEwlgbgfAUAkAFwBZgM4AI3vBGwD0OUQA&debug=false&forceAllTransforms=false&modules=false&shippedProposals=false&evaluate=false&fileSize=false&timeTravel=false&sourceType=module&lineWrap=true&presets=env%2Creact%2Cstage-2&prettier=false&targets=&version=7.26.2&externalPlugins=&assumptions=%7B%7D>

![20241108144358](https://gcore.jsdelivr.net/gh/wu529778790/image/blog/20241108144358.png)

### 在 jsx 中可以通过 {} 来使用 js 表达式，但是不能使用 if else 语句，可以使用三元运算符

`if语句、switch语句、变量声明属于语句，不是表达式，不能出现在{}中`

### jsx 中可以使用map实现列表渲染

```jsx
const list = [1, 2, 3, 4, 5];
const listItems = list.map((item) => <li>{item}</li>);
```

### jsx 中实现条件渲染

在React中，可以通过逻辑与运算符&&、三元表达式（?:）实现基础的条件渲染

```jsx
const isLogin = true;
const element = isLogin ? <div>登录成功</div> : <div>登录失败</div>;
```

### jsx 实现复杂条件渲染

列表中需要根据文章状态适配三种情况，单图，三图，和无图三种模式

自定义函数 + if判断语句

```jsx
function getArticleType(article) {
  if (article.images.length === 1) {
    return <div>单图</div>;
  } else if (article.images.length === 3) {
    return <div>三图</div>;
  } else {
    return <div>无图</div>;
  }
}
```

## 事件绑定

on + 事件名称 = { 事件处理程序 }，整体上遵循驼峰命名法

### 使用时间对象参数

在事件回调函数中设置形参e

```jsx
function App() {
  function handleClick(e) {
    console.log(e);
  }
  return (
    <div>
      <button onClick={handleClick}>点我</button>
    </div>
  );
}
```

传递自定义参数

事件绑定的位置改造成箭头函数的写法，在执行clickHandler实际处理业务函数的时候传递实参

```jsx
function App() {
  function handleClick(name) {
    console.log(name);
  }
  return (
    <div>
      <button onClick={() => handleClick("wu")}>点我</button>
    </div>
  );
}
```

> 不能直接写函数调用，这里事件绑定需要一个函数引用，而不是函数调用，所以需要使用箭头函数

### 同时传递事件对象和自定义参数

```jsx
function App() {
  function handleClick(e, name) {
    console.log(e, name);
  }
  return (
    <div>
      <button onClick={(e) => handleClick(e, "wu")}>点我</button>
    </div>
  );
}
```

## useState

useState 是一个 React Hook（函数），它允许我们向组件添加一个状态变量, 从而控制影响组件的渲染结果.

本质：和普通JS变量不同的是，状态变量一旦发生变化组件的视图UI也会跟着变化（数据驱动视图）

```jsx
const [count, setCount] = useState(0); // count 是状态变量，setCount 是修改状态变量的方法
```

1. useState是一个函数，返回值是一个数组
2. 数组中的第一个参数是状态变量，第二个参数是set函数用来修改状态变量
3. useState的参数是状态变量的初始值

### 状态不可变

在React中，状态被认为是只读的，我们应该始终替换它而不是修改它，直接修改状态不能引发视图更新

```jsx
const [count, setCount] = useState(0);
const handleClick = () => {
    count = count + 1; // 错误写法
    setCount(count + 1); // 正确写法
};
```

### 修改对象状态

```jsx
const [person, setPerson] = useState({ name: "wu", age: 18 });
const handleClick = () => {
    person.age = "19"; // 错误写法
    setPerson({ ...person, age: 19 }); // 正确写法
};
```

## 组件的样式处理

React组件基础的样式控制有俩种方式

### 内联样式

```jsx
<div style={{ color: "red" }}>hello world</div>
```

### class样式

```jsx
<div className="red">hello world</div>
```
