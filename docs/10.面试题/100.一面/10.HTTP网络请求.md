---
title: HTTP网络请求
date: 2025-12-08 19:36:11
permalink: /pages/b402a341959d/
categories:
  - 面试题
  - 一面
tags:
  - 
---

## 简述https加密过程

![20251208194017](https://gcore.jsdelivr.net/gh/wu529778790/img.shenzjd.com/blog/20251208194017.png)

HTTPS 使用 TLS/SSL 协议进行加密，主要包含以下步骤：

### 1.客户端发起请求

- 发送支持的加密算法列表
- 发送随机数 Client Random

### 2.服务器回应

- 选择加密算法
- 发送数字证书（包含公钥）
- 发送随机数 Server Random

### 3.客户端验证证书

- 验证证书是否由可信 CA 签发
- 验证证书域名是否匹配
- 验证证书是否在有效期内

### 4.生成会话密钥

- 客户端生成随机数 Pre-master secret
- 使用服务器公钥加密 Pre-master secret
- 客户端和服务器都通过三个随机数生成会话密钥 (Client Random + Server Random + Pre-master secret)

### 5.开始加密通信

- 双方使用会话密钥进行对称加密通信
- 保证通信内容的机密性和完整性

特点：

- 采用混合加密：非对称加密传输密钥，对称加密传输数据
- 数字证书保证服务器身份可信
- 具有防篡改和不可否认性

## TCP 是如何建立连接的，三次握手，四次挥手

![20251208194623](https://gcore.jsdelivr.net/gh/wu529778790/img.shenzjd.com/blog/20251208194623.png)

三次握手

- 客户端向服务端发送建立连接请求，客户端进入 SYN-SEND 状态
- 服务端收到建立连接请求后，向客户端发送一个应答，服务端进入 SYN-RECEIVED 状态
- 客户端接收到应答后，向服务端发送确认接收到应答，客户端进入 ESTABLISHED 状态

![20251208194638](https://gcore.jsdelivr.net/gh/wu529778790/img.shenzjd.com/blog/20251208194638.png)

四次挥手

- 客户端向服务端发送断开连接请求
- 服务端收到断开连接请求后，告诉应用层去释放 tcp 连接
- 服务端向客户端发送最后一个数据包 FINBIT ，服务端进入 LAST-ACK 状态
- 客户端收到服务端的断开连接请求后，向服务端确认应答

> 三次握手四次挥手，客户端都是主动方，服务端都是被动方。在状态方面：三次握手的客户端和服务端都是由原来的 closed 变为 established，四次挥手的客户端和服务端都是由原来的 established 变为 closed。

## http 几个版本的区别

### HTTP/0.9

- 仅支持 GET 请求，无请求头和请求体
- 只能传输 HTML 文件，返回 ASCII 字符流
- 无响应头

> 缺点：功能极其有限

### HTTP/1.0 多类型支持

- 支持多种文件类型（不限于 ASCII）
- 引入请求头和响应头（key-value 形式）
- 每个请求都需要建立新的 TCP 连接

> 缺点：频繁连接导致性能开销

### HTTP/1.1 持久连接

- 引入持久连接(keep-alive): 一个 TCP 连接可传输多个 HTTP 请求
- 默认开启 keep-alive，通常限制 6-8 个并发连接
- 引入 Host 字段，支持虚拟主机
- 引入 Chunk transfer 机制处理动态内容长度

> 缺点：存在队头阻塞问题（前面的请求阻塞后续请求）

### HTTP/2.0 多路复用

- 一个域名仅使用一个 TCP 长连接
- 引入二进制分帧层，实现多路复用（并行传输请求）
- 支持请求优先级
- 强制使用 HTTPS（HTTP + TLS 加密）

> 仍依赖 TCP，存在 TCP 队头阻塞问题

### HTTP/3.0 QUIC 协议

- 基于 UDP 协议而非 TCP
- 实现了类似 TCP 的流量控制和可靠传输
- 继承 TLS 加密
- 多路费用
- 解决 TCP 对头阻塞问题
